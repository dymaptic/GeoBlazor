using dymaptic.GeoBlazor.Core.Components.Renderers.ColorRamps;

namespace dymaptic.GeoBlazor.Core.Objects;

/// <summary>
///     Authoring information related to generating renderers and visual variables with the Smart Mapping methods. This includes information from UI elements such as sliders and selected classification methods and themes. This allows the authoring clients to save settings so that their selections can be remembered.
///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html">ArcGIS Maps SDK for JavaScript</a>
/// </summary>
/// <param name="ClassificationMethod">
///     Indicates which classification method was used if a classed color or classed size renderer was generated using one of the Smart Mapping functions.
/// </param>
/// <param name="ColorRamp">
///     Indicates the color ramp was used to create the symbols for Unique Value or Class Breaks renderer for Imagery Layer.
/// </param>
/// <param name="FadeRatio">
///     Only applicable to HeatmapRenderer created with the heatmap renderer creator. Indicates how much the user opted to fade the edges of the heatmap to transparent.
/// </param>
/// <param name="Field1">
///     A numeric field used for generating a relationship renderer along with field2. In the default visualization, the values of this field are rendered along the vertical axis of the Legend.
/// </param>
/// <param name="Field2">
///     A numeric field used for generating a relationship renderer along with field1. In the default visualization, the values of this field are rendered along the horizontal axis of the Legend.
/// </param>
/// <param name="Fields">
///     An array of string values representing field names used for creating a predominance renderer.
/// </param>
/// <param name="FlowTheme">
///     Only applicable to flow renderers. Indicates the user-selected theme of the generated renderer.
/// </param>
/// <param name="Focus">
///     The focus of a relationship renderer. This determines the orientation of the legend.
/// </param>
/// <param name="IsAutoGenerated">
///     Indicates whether the renderer was created internally by the JS API's rendering engine for default FeatureReductionCluster visualizations. You should avoid setting or changing this value.
///     Default Value:false
/// </param>
/// <param name="LengthUnit">
///     Only applicable to renderer used in web scenes. Indicates the unit used in real-world sizes.
/// </param>
/// <param name="MaxSliderValue">
///     Indicates the value of the upper handle if a slider was used to generate the dot value for dot density renderer.
/// </param>
/// <param name="MinSliderValue">
///     Indicates the value of the lower handle if a slider was used to generate the dot value for dot density renderer.
/// </param>
/// <param name="NumClasses">
///     The number of classes used to classify each field of a relationship renderer. This determines the number of categories in the legend.
/// </param>
/// <param name="StandardDeviationInterval">
///     Indicates the standard deviation interval for each stop in a classed color or classed size renderer that was generated using the standard-deviation classification method.
///     Possible Values: 0.25 | 0.33 | 0.5 | 1
/// </param>
/// <param name="Statistics">
///     Only for renderers of type univariate-color-size with an above-and-below univariateTheme. Contains summary statistics about the data represented by the renderer. The Legend can use this information to avoid displaying values beyond the min and max data values of the layer.
/// </param>
/// <param name="Type">
///     Indicates the renderer type generated from one of the Smart Mapping functions.
/// </param>
/// <param name="UnivariateSymbolStyle">
///     Only applicable to univariateColorSize renderers with an above-and-below univariateTheme. Indicates if the above and below renderer uses a predefined symbol pair provided by the API.
///     The custom style indicates the renderer was authored with custom symbols not provided as a predefined symbol pair in the renderer creator.
/// </param>
/// <param name="UnivariateTheme">
///     Only applicable to univariateColorSize renderers. Indicates the theme of the univariate color and size renderer.
/// </param>
/// <param name="VisualVariables">
///     Contains authoring properties of visual variables generated from one of the Smart Mapping methods or sliders.
/// </param>
public record AuthoringInfo(string ClassificationMethod, ColorRamp ColorRamp, double FadeRatio, 
    AuthoringInfoField Field1, AuthoringInfoField Field2, IReadOnlyCollection<string> Fields,
    string FlowTheme, string Focus, bool IsAutoGenerated, string LengthUnit, double MaxSliderValue,
    double MinSliderValue, int NumClasses, double StandardDeviationInterval, AuthoringInfoStatistics Statistics,
    string Type, string UnivariateSymbolStyle, string UnivariateTheme, 
    IReadOnlyCollection<AuthoringInfoVisualVariable> VisualVariables);

/// <summary>
///     A numeric field used for generating a relationship renderer
/// </summary>
/// <param name="Field">
///     The name of a numeric field.
/// </param>
/// <param name="NormalizationField">
///     The name of a numeric field used to normalize the given field. In choropleth visualizations it is best practice to normalize your data values if they haven't already been normalized.
/// </param>
/// <param name="ClassBreakInfos">
///     Describes the class breaks generated for this field.
/// </param>
/// <param name="Label">
///     The label used to describe the field or variable in the legend.
/// </param>
public record AuthoringInfoField(string Field, string? NormalizationField, 
    IReadOnlyCollection<ClassBreakInfo>? ClassBreakInfos, string? Label);
    
/// <summary>
///     Describes the class breaks generated for an <see cref="AuthoringInfoField"/>
/// </summary>
/// <param name="MaxValue">
///     The maximum bound of values to visualize in the given field. If a feature's value is greater than this value, then it will be assigned the default symbol of the renderer.
/// </param>
/// <param name="MinValue">
///     The minimum bound of values to visualize in the given field. If a feature's value is less than this value, then it will be assigned the default symbol of the renderer.
/// </param>
public record ClassBreakInfo(double MaxValue, double MinValue);

/// <summary>
///      Contains summary statistics about the data represented by the renderer.
/// </summary>
/// <param name="Max">
///     The maximum data value of the attribute represented by the renderer. Legends displaying above-and-below themed data will not display values greater than this number.
/// </param>
/// <param name="Min">
///     The minimum data value of the attribute represented by the renderer. Legends displaying above-and-below themed data will not display values smaller than this number.
/// </param>
public record AuthoringInfoStatistics(double Max, double Min);

/// <summary>
///     Contains authoring properties of visual variables generated from one of the Smart Mapping methods or sliders.
///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfoVisualVariable.html">ArcGIS Maps SDK for JavaScript</a>
/// </summary>
/// <param name="EndTime">
///     If an age or timeline renderer was generated, indicates the end time of the visualization.
/// </param>
/// <param name="Field">
///     Indicates the field name used for generating the data-driven visualization.
/// </param>
/// <param name="MaxSliderValue">
///     Indicates the value of the upper handle if a slider was used to generate the visual variable.
/// </param>
/// <param name="MinSliderValue">
///     Indicates the value of the lower handle if a slider was used to generate the visual variable.
/// </param>
/// <param name="StartTime">
///     If an age or timeline renderer was generated, indicates the start time of the visualization.
/// </param>
/// <param name="Style">
///     If the UI offers the option to display values based on a ratio or percentage, this indicates which selection was made.
/// </param>
/// <param name="Theme">
///     Indicates the theme selected by the user when generating a renderer or visual variable with one of the Smart Mapping functions.
/// </param>
/// <param name="Type">
///     The type of visual variable generated.
/// </param>
/// <param name="Units">
///     If an age or timeline renderer was generated, indicates the time units used.
/// </param>
public record AuthoringInfoVisualVariable(string EndTime, string Field, double MaxSliderValue, double MinSliderValue,
    string StartTime, string Style, string Theme, string Type, string Units);