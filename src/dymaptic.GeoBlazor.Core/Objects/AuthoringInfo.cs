using dymaptic.GeoBlazor.Core.Components;
using dymaptic.GeoBlazor.Core.Components.Renderers.ColorRamps;
using dymaptic.GeoBlazor.Core.Enums;


namespace dymaptic.GeoBlazor.Core.Objects;


/// <summary>
///    Authoring information related to generating renderers and visual variables with the Smart Mapping methods.
///    <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html">ArcGIS Maps SDK for JavaScript</a>
/// </summary>
public class AuthoringInfo : MapComponent
{

    /// <summary>
    ///     Parameterless constructor for use as a Razor Component.
    /// </summary>
    public AuthoringInfo()
    {
    }

    /// <summary>
    ///     Constructor for use in C# code.
    /// </summary>
    /// <param name="colorRamp">
    ///     Indicates the color ramp was used to create the symbols for Unique Value or Class Breaks renderer for Imagery Layer.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#colorRamp">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    /// <param name="fadeRatio">
    ///     Only applicable to [HeatmapRenderer](https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-HeatmapRenderer.html) created with the [heatmap renderer creator](https://developers.arcgis.com/javascript/latest/api-reference/esri-smartMapping-renderers-heatmap.html).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#fadeRatio">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    /// <param name="field1">
    ///     A numeric field used for generating a [relationship renderer](https://developers.arcgis.com/javascript/latest/api-reference/esri-smartMapping-renderers-relationship.html) along with [field2](https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#field2).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#field1">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    /// <param name="field2">
    ///     A numeric field used for generating a [relationship renderer](https://developers.arcgis.com/javascript/latest/api-reference/esri-smartMapping-renderers-relationship.html) along with [field1](https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#field1).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#field2">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    /// <param name="fields">
    ///     An array of string values representing field names used for creating a [predominance renderer](https://developers.arcgis.com/javascript/latest/api-reference/esri-smartMapping-renderers-predominance.html).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#fields">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    /// <param name="focus">
    ///     The focus of a [relationship renderer](https://developers.arcgis.com/javascript/latest/api-reference/esri-smartMapping-renderers-relationship.html).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#focus">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    /// <param name="isAutoGenerated">
    ///     Indicates whether the renderer was created internally by the JS API's rendering engine for default [FeatureReductionCluster](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-support-FeatureReductionCluster.html) visualizations.
    ///     default false
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#isAutoGenerated">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    /// <param name="lengthUnit">
    ///     Only applicable to renderer used in web scenes. Indicates the unit used in real-world sizes.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#lengthUnit">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    /// <param name="maxSliderValue">
    ///     Indicates the value of the upper handle if a slider was used to generate the dot value for dot density renderer.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#maxSliderValue">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    /// <param name="minSliderValue">
    ///     Indicates the value of the lower handle if a slider was used to generate the dot value for dot density renderer.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#minSliderValue">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    /// <param name="numClasses">
    ///     The number of classes used to classify each field of a [relationship renderer](https://developers.arcgis.com/javascript/latest/api-reference/esri-smartMapping-renderers-relationship.html).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#numClasses">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    /// <param name="standardDeviationInterval">
    ///     Indicates the standard deviation interval for each stop in a classed color or classed size renderer that was generated using the `standard-deviation` classification method.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#standardDeviationInterval">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    /// <param name="statistics">
    ///     Only for renderers of type `univariate-color-size` with an `above-and-below` [univariateTheme](https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#univariateTheme).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#statistics">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    /// <param name="visualVariables">
    ///     Contains authoring properties of visual variables generated from one of the Smart Mapping methods or sliders.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#visualVariables">ArcGIS Maps SDK for JavaScript</a>
    /// </param>
    public AuthoringInfo(
        ColorRamp? colorRamp = null,
        double? fadeRatio = null,
        AuthoringInfoField? field1 = null,
        AuthoringInfoField? field2 = null,
        IReadOnlyList<string>? fields = null,
        string? focus = null,
        bool? isAutoGenerated = null,
        LengthUnit? lengthUnit = null,
        double? maxSliderValue = null,
        double? minSliderValue = null,
        double? numClasses = null,
        double? standardDeviationInterval = null,
        AuthoringInfoStatistics? statistics = null,
        IReadOnlyList<AuthoringInfoVisualVariable>? visualVariables = null)
    {
#pragma warning disable BL0005
        ColorRamp = colorRamp;
        FadeRatio = fadeRatio;
        Field1 = field1;
        Field2 = field2;
        Fields = fields;
        Focus = focus;
        IsAutoGenerated = isAutoGenerated;
        LengthUnit = lengthUnit;
        MaxSliderValue = maxSliderValue;
        MinSliderValue = minSliderValue;
        NumClasses = numClasses;
        StandardDeviationInterval = standardDeviationInterval;
        Statistics = statistics;
        VisualVariables = visualVariables;
#pragma warning restore BL0005    
    }
    
    
    /// <inheritdoc />
    public override async Task SetParametersAsync(ParameterView parameters)
    {
        foreach (Microsoft.AspNetCore.Components.ParameterValue parameterValue in parameters)
        {
            if (parameterValue is { Name: nameof(Fields), Value: IReadOnlyList<string> fields }
                && !fields.Equals(Fields))
            {
                Fields = new List<string>(fields);
            }
            if (parameterValue is { Name: nameof(VisualVariables), Value: IReadOnlyList<AuthoringInfoVisualVariable> visualVariables }
                && !visualVariables.Equals(VisualVariables))
            {
                VisualVariables = new List<AuthoringInfoVisualVariable>(visualVariables);
            }
        }
        await base.SetParametersAsync(parameters);
    }
    
#region Public Properties / Blazor Parameters

    /// <summary>
    ///     Indicates the color ramp was used to create the symbols for Unique Value or Class Breaks renderer for Imagery Layer.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#colorRamp">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public ColorRamp? ColorRamp { get; set; }
    
    /// <summary>
    ///     Only applicable to [HeatmapRenderer](https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-HeatmapRenderer.html) created with the [heatmap renderer creator](https://developers.arcgis.com/javascript/latest/api-reference/esri-smartMapping-renderers-heatmap.html).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#fadeRatio">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public double? FadeRatio { get; set; }
    
    /// <summary>
    ///     A numeric field used for generating a [relationship renderer](https://developers.arcgis.com/javascript/latest/api-reference/esri-smartMapping-renderers-relationship.html) along with [field2](https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#field2).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#field1">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public AuthoringInfoField? Field1 { get; set; }
    
    /// <summary>
    ///     A numeric field used for generating a [relationship renderer](https://developers.arcgis.com/javascript/latest/api-reference/esri-smartMapping-renderers-relationship.html) along with [field1](https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#field1).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#field2">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public AuthoringInfoField? Field2 { get; set; }
    
    /// <summary>
    ///     An array of string values representing field names used for creating a [predominance renderer](https://developers.arcgis.com/javascript/latest/api-reference/esri-smartMapping-renderers-predominance.html).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#fields">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public IReadOnlyList<string>? Fields { get; set; }
    
    /// <summary>
    ///     The focus of a [relationship renderer](https://developers.arcgis.com/javascript/latest/api-reference/esri-smartMapping-renderers-relationship.html).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#focus">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public string? Focus { get; set; }
    
    /// <summary>
    ///     Indicates whether the renderer was created internally by the JS API's rendering engine for default [FeatureReductionCluster](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-support-FeatureReductionCluster.html) visualizations.
    ///     default false
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#isAutoGenerated">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public bool? IsAutoGenerated { get; set; }
    
    /// <summary>
    ///     Only applicable to renderer used in web scenes. Indicates the unit used in real-world sizes.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#lengthUnit">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public LengthUnit? LengthUnit { get; set; }
    
    /// <summary>
    ///     Indicates the value of the upper handle if a slider was used to generate the dot value for dot density renderer.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#maxSliderValue">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public double? MaxSliderValue { get; set; }
    
    /// <summary>
    ///     Indicates the value of the lower handle if a slider was used to generate the dot value for dot density renderer.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#minSliderValue">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public double? MinSliderValue { get; set; }
    
    /// <summary>
    ///     The number of classes used to classify each field of a [relationship renderer](https://developers.arcgis.com/javascript/latest/api-reference/esri-smartMapping-renderers-relationship.html).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#numClasses">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public double? NumClasses { get; set; }
    
    /// <summary>
    ///     Indicates the standard deviation interval for each stop in a classed color or classed size renderer that was generated using the `standard-deviation` classification method.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#standardDeviationInterval">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public double? StandardDeviationInterval { get; set; }
    
    /// <summary>
    ///     Only for renderers of type `univariate-color-size` with an `above-and-below` [univariateTheme](https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#univariateTheme).
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#statistics">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public AuthoringInfoStatistics? Statistics { get; set; }
    
    /// <summary>
    ///     Contains authoring properties of visual variables generated from one of the Smart Mapping methods or sliders.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-renderers-support-AuthoringInfo.html#visualVariables">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [Parameter]
    [JsonIgnore(Condition = JsonIgnoreCondition.WhenWritingNull)]
    public IReadOnlyList<AuthoringInfoVisualVariable>? VisualVariables { get; set; }
    
#endregion


    public override async Task RegisterChildComponent(MapComponent child)
    {
        switch (child)
        {
            case ColorRamp colorRamp:
                if (colorRamp != ColorRamp)
                {
                    ColorRamp = colorRamp;
                    
                }

                break;
            default:
                await base.RegisterChildComponent(child);
                
                break;
        }
    }

    public override async Task UnregisterChildComponent(MapComponent child)
    {
        switch (child)
        {
            case ColorRamp _:
                ColorRamp = null;

                break;
            default:
                await base.UnregisterChildComponent(child);
                break;
        }
    }
    
    /// <inheritdoc />
    internal override void ValidateRequiredChildren()
    {
        ColorRamp?.ValidateRequiredChildren();
        base.ValidateRequiredChildren();
    }
      
}
