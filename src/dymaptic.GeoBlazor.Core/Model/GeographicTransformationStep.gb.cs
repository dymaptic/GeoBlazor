// File auto-generated by dymaptic tooling. Any changes made here will be lost on future generation. To override functionality, use the relevant root .cs file.

namespace dymaptic.GeoBlazor.Core.Model;

/// <summary>
///     <a target="_blank" href="https://docs.geoblazor.com/pages/classes/dymaptic.GeoBlazor.Core.Model.GeographicTransformationStep.html">GeoBlazor Docs</a>
///     Represents a step in the process of transforming coordinates from one geographic coordinate system to another.
///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-operators-support-GeographicTransformationStep.html">ArcGIS Maps SDK for JavaScript</a>
/// </summary>
/// <param name="IsInverse">
///     Indicates if the geographic transformation is inverted.
///     default false
///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-operators-support-GeographicTransformationStep.html#isInverse">ArcGIS Maps SDK for JavaScript</a>
/// </param>
/// <param name="Wkid">
///     The well-known id (wkid) hat represents a known geographic transformation.
///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-operators-support-GeographicTransformationStep.html#wkid">ArcGIS Maps SDK for JavaScript</a>
/// </param>
/// <param name="Wkt">
///     The well-known text (wkt) that represents a known geographic transformation.
///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-operators-support-GeographicTransformationStep.html#wkt">ArcGIS Maps SDK for JavaScript</a>
/// </param>
public partial record GeographicTransformationStep(
    bool? IsInverse = null,
    int? Wkid = null,
    string? Wkt = null): IInteractiveRecord
{
    /// <summary>
    ///     Represents the JavaScript component reference.
    /// </summary>
    public IJSObjectReference? JsComponentReference { get; set; }
    
    /// <summary>
    ///     Allows for transmitting CancellationToken cancel signals to JavaScript.
    /// </summary>
    public AbortManager? AbortManager { get; set; }
    
    /// <summary>
    ///     A unique Id to identify this record in JavaScript.
    /// </summary>
    public Guid Id { get; set; } = Guid.NewGuid();
    
    /// <summary>
    ///     Reference to the Core JavaScript module.
    /// </summary>
    public IJSObjectReference? CoreJsModule { get; set; }
    
    /// <summary>
    ///     Boolean flag to identify if GeoBlazor is running in Blazor Server mode
    /// </summary>
    public bool IsServer { get; set; }
    
    /// <summary>
    ///     Cancellation Token for async methods.
    /// </summary>
    protected readonly CancellationTokenSource CancellationTokenSource = new();
#region Public Methods

    /// <summary>
    ///     <a target="_blank" href="https://docs.geoblazor.com/pages/classes/dymaptic.GeoBlazor.Core.Model.GeographicTransformationStep.html#geographictransformationstepgetinverse-method">GeoBlazor Docs</a>
    ///     Returns the inverse of this geographic transformation step.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-operators-support-GeographicTransformationStep.html#getInverse">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    [ArcGISMethod]
    public async Task<GeographicTransformationStep?> GetInverse()
    {
        if (CoreJsModule is null)
        {
            return null;
        }
        
        try
        {
            JsComponentReference ??= await CoreJsModule.InvokeAsync<IJSObjectReference?>(
                "getJsComponent", CancellationTokenSource.Token, Id);
        }
        catch (JSException)
        {
            // this is expected if the component is not yet built
        }
        
        if (JsComponentReference is null)
        {
            return null;
        }
        
        return await JsComponentReference!.InvokeJsMethod<GeographicTransformationStep?>(
            IsServer, nameof(GetInverse), nameof(GeographicTransformationStep), 
            CancellationTokenSource.Token);
    }
    
#endregion

}
