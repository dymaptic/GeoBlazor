// File auto-generated by dymaptic tooling. Any changes made here will be lost on future generation. To override functionality, use the relevant root .cs file.

namespace dymaptic.GeoBlazor.Core.Model;

/// <summary>
///    Represents information pertaining to the execution of an asynchronous request on the server.
///    <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-networks-support-TraceJobInfo.html">ArcGIS Maps SDK for JavaScript</a>
/// </summary>
/// <param name="LastUpdatedTime">
///     The last date and time the service was updated.
///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-networks-support-TraceJobInfo.html#lastUpdatedTime">ArcGIS Maps SDK for JavaScript</a>
/// </param>
/// <param name="Status">
///     The job status.
///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-networks-support-TraceJobInfo.html#status">ArcGIS Maps SDK for JavaScript</a>
/// </param>
/// <param name="StatusUrl">
///     ArcGIS Server Rest API endpoint to the resource that receives the validate network topology request.
///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-networks-support-TraceJobInfo.html#statusUrl">ArcGIS Maps SDK for JavaScript</a>
/// </param>
/// <param name="SubmissionTime">
///     The date and time in which <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-networks-Network.html#submitTopologyValidationJob">submitTopologyValidationJob()</a> is first called.
///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-networks-support-TraceJobInfo.html#submissionTime">ArcGIS Maps SDK for JavaScript</a>
/// </param>
public partial record TraceJobInfo(
    DateTime? LastUpdatedTime = null,
    Status? Status = null,
    string? StatusUrl = null,
    DateTime? SubmissionTime = null)
{
    internal IJSObjectReference? JsComponentReference { get; set; }
    internal AbortManager? AbortManager { get; set; }
    private readonly CancellationTokenSource _cancellationTokenSource = new();
#region Public Methods

    /// <summary>
    ///     Sends a request for the current state of this job.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-networks-support-TraceJobInfo.html#checkJobStatus">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    /// <param name="requestOptions">
    ///     Additional <a href="https://developers.arcgis.com/javascript/latest/api-reference/esri-request.html#esriRequest">options</a> to be used for the data request
    ///     (will override requestOptions defined during construction).
    /// </param>
    [ArcGISMethod]
    public async Task<TraceJobInfo?> CheckJobStatus(string requestOptions)
    {
        if (JsComponentReference is null) return null;
        
        return await JsComponentReference!.InvokeAsync<TraceJobInfo?>(
            "checkJobStatus", 
            _cancellationTokenSource.Token,
            requestOptions);
    }
    
    /// <summary>
    ///     Resolves when an asynchronous job has completed.
    ///     <a target="_blank" href="https://developers.arcgis.com/javascript/latest/api-reference/esri-networks-support-TraceJobInfo.html#waitForJobCompletion">ArcGIS Maps SDK for JavaScript</a>
    /// </summary>
    /// <param name="options">
    ///     Options. See properties below for object specifications.
    /// </param>
    [ArcGISMethod]
    public async Task<TraceJobInfo?> WaitForJobCompletion(TraceJobInfoWaitForJobCompletionOptions options)
    {
        if (JsComponentReference is null) return null;
        
        return await JsComponentReference!.InvokeAsync<TraceJobInfo?>(
            "waitForJobCompletion", 
            _cancellationTokenSource.Token,
            options);
    }
    
#endregion

}
