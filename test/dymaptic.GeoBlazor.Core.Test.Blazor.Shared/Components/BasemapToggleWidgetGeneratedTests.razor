@inherits TestRunnerBase

@{
    base.BuildRenderTree(__builder);
}

@code {

    [TestMethod]
    public async Task TestCanRenderGeneratedBasemapToggleWidget(Action renderHandler)
    {
        BasemapToggleWidget? basemapToggleWidget = null;

        AddMapRenderFragment(
            @<MapView class="map-view" OnViewRendered="renderHandler">
                <Map>
                    <Basemap>
                        <BasemapStyle Name="BasemapStyleName.ArcgisTopographic" />
                    </Basemap>
                </Map>
                <BasemapToggleWidget 
                    Icon="@("et")"
                    Label="@("sit")"
                    WidgetId="@("aut")">
                    <BasemapToggleVisibleElements 
                        Title="@(true)">
                    </BasemapToggleVisibleElements>
                    <BasemapToggleViewModel 
>
                        <Basemap 
                            BaseLayers="@([new WebTileLayer(BlendMode.SourceIn,
                                    "suscipit",
                                    new Effect("nam",
                                        42877306.2143),
                                new Extent(-35.1435,
                                        -73.3301,
                                        0.6889,
                                        -2.3089,
                                        527.5003,
                                        209.3973,
                                        467.6643,
                                        212.9598,
                                    new SpatialReference(7,
                                            "incidunt",
                                            "nam",
                                            "dolores"),
                                        true,
                                        true),
                                ListMode.Hide,
                                    21408169.0936,
                                    7261.6439,
                                    0.0907,
                                    true,
                                new PortalItem(),
                                    878.4823,
                                    ["quod"],
                                new TileInfo(527.2096,
                                        TileInfoFormat.Png,
                                        true,
                                    [new LOD(2,
                                            "sit",
                                            23.8768,
                                            36414191.5009),
                                    new LOD(5,
                                            "et",
                                            59.8798,
                                            34170008.4469)],
                                    new Point(-31.2735,
                                            73.4985,
                                            15.7501,
                                            -11.0162,
                                            924.1069,
                                        new SpatialReference(1,
                                                "quod",
                                                "autem",
                                                "assumenda"),
                                            true,
                                            true,
                                            951.6676),
                                        [9,
                                            4],
                                    new SpatialReference(2,
                                            "quas",
                                            "voluptatem",
                                            "tenetur")),
                                    "odit eos corrupti")])"
                            BasemapId="@("doloribus")"
                            PortalItem="@(new PortalItem())"
                            ReferenceLayers="@([new GeoRSSLayer("https://arcgis.github.io/arcgis-samples-javascript/sample-data/layers-georss/sample-georss.xml",
                                    "quidem harum id",
                                    0.0386,
                                    true,
                                ListMode.Show,
                                BlendMode.DestinationIn,
                                    new Effect("et",
                                        19208510.7581),
                                new Extent(-150.4079,
                                        20.0866,
                                        39.8505,
                                        89.7073,
                                        126.8580,
                                        374.2136,
                                        897.9107,
                                        933.5160,
                                    new SpatialReference(6,
                                            "earum",
                                            "voluptatem",
                                            "corporis"),
                                        true,
                                        true),
                                    true,
                                new SimpleLineSymbol(new MapColor(157, 8, 148),
                                        new Dimension(92.2522),
                                    SimpleLineSymbolStyle.LongDashDotDot,
                                    Cap.Butt,
                                    Join.Round,
                                    new LineSymbolMarker(new MapColor(214, 244, 218),
                                        LinePlacement.BeginEnd,
                                        LineSymbolMarkerStyle.Arrow),
                                        555.7900),
                                    1442275.2210,
                                    11652.0853,
                                    true,
                                new PictureMarkerSymbol("https://static.arcgis.com/images/Symbols/Shapes/BluePin1LargeB.png",
                                        new Dimension(296.4210),
                                        new Dimension(699.8462),
                                        599.9058,
                                        new Dimension(261.0200),
                                        new Dimension(50.9268),
                                    new MapColor(231, 42, 138))),
                            new BingMapsLayer("iure",
                                    BingImageryStyle.Road,
                                BlendMode.Multiply,
                                    new Effect("fuga",
                                        42531469.5195),
                                    22087171.8089,
                                    18921.7655,
                                    550.7854,
                                new SpatialReference(5,
                                        "in",
                                        "eaque",
                                        "qui"),
                                    default,
                                new Extent(-130.6341,
                                        -134.6019,
                                        -67.4388,
                                        36.5482,
                                        114.9588,
                                        743.2941,
                                        902.0509,
                                        186.6832,
                                    new SpatialReference(8,
                                            "labore",
                                            "vero",
                                            "magni"),
                                        true,
                                        true),
                                ListMode.Show,
                                    0.8153,
                                    true,
                                    "ut")])"
                            SpatialReference="@(new SpatialReference(2,
                                    "pariatur",
                                    "mollitia",
                                    "alias"))"
                            Style="@(new BasemapStyle())"
                            ThumbnailUrl="@("https://sofia.com")"
                            Title="@("dolor ex vel")">
                        </Basemap>
                    </BasemapToggleViewModel>
                    <Basemap 
                        BaseLayers="@([new MapImageLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer",
                            new PortalItem(),
                            BlendMode.SourceOut,
                                default,
                                928.2197,
                                new Effect("ratione",
                                    22539564.7987),
                                "7.7.0.7",
                                MapImageFormat.Svg,
                                7,
                                5,
                                true,
                                true,
                                15441454.0272,
                                48743.1930,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                                true),
                        new ImageryLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/NLCDLandCover2001/ImageServer",
                            new PortalItem(),
                                new RasterStretchRenderer(new AlgorithmicColorRamp(Algorithm.CieLab,
                                        new MapColor(187, 148, 211),
                                        new MapColor(14, 86, 176)),
                                    true,
                                    true,
                                    [8],
                                    9,
                                    9,
                                    StretchType.PercentClip,
                                    [new RasterBandStatistics(976.3585,
                                        5,
                                        520.3518,
                                        661.5170,
                                        606.1271,
                                        88.5986,
                                        920.0199,
                                        256.8695),
                                    new RasterBandStatistics(370.9990,
                                        2,
                                        394.3228,
                                        127.6938,
                                        143.7935,
                                        802.9250,
                                        318.8466,
                                        198.0828)],
                                    true,
                                    8),
                                [2,
                                    1],
                            BlendMode.Invert,
                                823.1310,
                                37.4934,
                                "aliquid",
                                "dolor",
                                new Effect("quia",
                                    34237469.5760),
                            ImageFormat.Png32,
                                true,
                                7,
                                9,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                            new TileInfo(268.9183,
                                    TileInfoFormat.Tiff,
                                    true,
                                [new LOD(3,
                                        "id",
                                        84.8164,
                                        26537808.1882),
                                new LOD(6,
                                        "at",
                                        99.7354,
                                        28361098.9704)],
                                new Point(1.9288,
                                        -73.0696,
                                        58.5295,
                                        -85.0498,
                                        541.0586,
                                    new SpatialReference(5,
                                            "quo",
                                            "sequi",
                                            "est"),
                                        true,
                                        true,
                                        209.3201),
                                    [1,
                                        1],
                                new SpatialReference(2,
                                        "quis",
                                        "temporibus",
                                        "ut")),
                            null,
                            null,
                            null,
                            null,
                            null,
                            null,
                                true)])"
                        BasemapId="@("vero")"
                        PortalItem="@(new PortalItem())"
                        ReferenceLayers="@([new BingMapsLayer("nemo",
                                BingImageryStyle.Aerial,
                            BlendMode.Color,
                                new Effect("magni",
                                    48747855.6143),
                                29769896.0643,
                                1058.5082,
                                559.6935,
                            new SpatialReference(5,
                                    "nostrum",
                                    "blanditiis",
                                    "laborum"),
                                default,
                            new Extent(-44.2196,
                                    171.8478,
                                    -54.4698,
                                    -76.4065,
                                    108.3633,
                                    766.9744,
                                    477.6066,
                                    53.7809,
                                new SpatialReference(6,
                                        "neque",
                                        "iure",
                                        "dolores"),
                                    true,
                                    true),
                            ListMode.Show,
                                0.5928,
                                true,
                                "voluptatum"),
                        new BaseTileLayer(BlendMode.Exclusion,
                                new Effect("quia",
                                    21783364.1586),
                                28037580.0760,
                                13926.5324,
                                538.9393,
                            new SpatialReference(1,
                                    "ex",
                                    "provident",
                                    "earum"),
                            new Extent(25.8848,
                                    -19.1723,
                                    42.4050,
                                    -20.0093,
                                    53.4779,
                                    763.3499,
                                    812.3617,
                                    176.1271,
                                new SpatialReference(9,
                                        "eius",
                                        "omnis",
                                        "mollitia"),
                                    true,
                                    true),
                            ListMode.Hide,
                                0.1730,
                                true,
                            new TileInfo(768.6185,
                                    TileInfoFormat.Jpg,
                                    true,
                                [new LOD(2,
                                        "quis",
                                        92.3787,
                                        6332405.0647)],
                                new Point(179.3369,
                                        -50.3714,
                                        85.5562,
                                        -59.5521,
                                        405.0063,
                                    new SpatialReference(6,
                                            "explicabo",
                                            "consequatur",
                                            "repellat"),
                                        true,
                                        true,
                                        711.5656),
                                    [2,
                                        5],
                                new SpatialReference(6,
                                        "voluptate",
                                        "mollitia",
                                        "sit")),
                                "libero magni labore",
                            new TimeExtent(new DateTime(2011, 3, 26, 4, 38, 14),
                                    new DateTime(2022, 5, 21, 8, 47, 31)))])"
                        SpatialReference="@(new SpatialReference(1,
                                "optio",
                                "voluptatibus",
                                "quaerat"))"
                        Style="@(new BasemapStyle())"
                        ThumbnailUrl="@("https://fredrick.com")"
                        Title="@("cum est officia")">
                    </Basemap>
                </BasemapToggleWidget>
            </MapView>);
        await WaitForMapToRender();
        Assert.IsNotNull(basemapToggleWidget!);
        await AssertJavaScript("assertWidgetExists", args: "basemap-toggle");
        var toggleMethodResult = await basemapToggleWidget.Toggle();
        Assert.IsNotNull(toggleMethodResult);
        BasemapToggleViewModel testViewModel = new BasemapToggleViewModel(new Basemap([new GraphicsLayer([new Graphic(new Polygon([new MapPath([new MapPoint([314.5990])])],
                                new SpatialReference(6,
                                        "natus",
                                        "corrupti",
                                        "vel"),
                                new Point(142.5768,
                                        55.3453,
                                        -179.0410,
                                        -20.6045,
                                        905.8200,
                                    new SpatialReference(6,
                                            "autem",
                                            "non",
                                            "laudantium"),
                                        true,
                                        true,
                                        864.8399),
                                    true,
                                    true,
                                    true),
                            new TextSymbol("rerum ullam qui",
                                new MapColor(252, 239, 138),
                                new MapColor(179, 226, 215),
                                    new Dimension(993.5060),
                                new MapFont(new Dimension(840.6749),
                                        "Georgia",
                                    MapFontStyle.Italic,
                                    FontWeight.Lighter,
                                    TextDecoration.LineThrough),
                                    110.7038,
                                new MapColor(166, 175, 112),
                                new MapColor(109, 237, 180),
                                    33.2119,
                                HorizontalAlignment.Right,
                                    true,
                                    244.7044,
                                    new Dimension(888.9392),
                                    true),
                            new PopupTemplate("eius est deleniti",
                                    "autem",
                                    ["voluptatem",
                                        "eum"],
                                [new FieldInfo("updatedAt",
                                        "illo",
                                        "rem",
                                    StringFieldOption.TextArea,
                                    new FieldInfoFormat(6,
                                            true,
                                        DateFormat.ShortDate),
                                        true,
                                        true,
                                    StatisticType.Max),
                                new FieldInfo("comment",
                                        "voluptatem",
                                        "labore",
                                    StringFieldOption.RichText,
                                    new FieldInfoFormat(4,
                                            true,
                                        DateFormat.LongDateLongTime24),
                                        true,
                                        true,
                                    StatisticType.Max)],
                                [new RelationshipPopupContent("necessitatibus fuga dolorem",
                                        "commodi repudiandae dolorem hic",
                                        7,
                                        "fugit",
                                    [new RelatedRecordsInfoFieldOrder("similique",
                                        OrderBy.Asc)],
                                        9),
                                new MediaPopupContent("repudiandae laborum mollitia",
                                        "nihil eos",
                                    [new ImageMediaInfo("officiis non eum",
                                            "adipisci",
                                            "magni voluptas accusantium",
                                        new ImageMediaInfoValue("https://stone.com",
                                                "http://gus.name"),
                                            345.4894),
                                    new BarChartMediaInfo("ipsum occaecati nulla",
                                            "voluptas",
                                            "commodi consequatur id",
                                        new ChartMediaInfoValue(["culpa"],
                                                "adipisci",
                                                "reprehenderit",
                                            [new ChartMediaInfoValueSeries("email",
                                                    "temporibus",
                                                    991.2820)],
                                            [new MapColor(149, 54, 84)]))],
                                        7)],
                                [new ExpressionInfo("return $feature.City + ', ' + $feature.Country;",
                                        "comment",
                                        "sunt et recusandae",
                                        ExpressionInfoReturnType.String)],
                                    true,
                                    true,
                                    [new ActionButton("error nobis molestias",
                                        "https://picsum.photos/640/480/?image=380",
                                        "887a2ca1-0bda-3c64-556f-09cbd665e742",
                                        () => { Console.WriteLine("consequatur"); return Task.CompletedTask; },
                                        "group",
                                        true,
                                        true,
                                        true,
                                        "id"),
                                        new ActionButton("beatae aliquid laborum",
                                            "https://picsum.photos/640/480/?image=710",
                                            "bda1a806-6ce2-6f0e-5f07-4300de83f24b",
                                            () => { Console.WriteLine("hic"); return Task.CompletedTask; },
                                            "password",
                                            true,
                                            true,
                                            true,
                                            "eius")]),
                                new AttributesDictionary(),
                                true,
                                "hic",
                                "natus",
                                new GraphicOrigin(Guid.NewGuid(),
                                    "consequatur",
                                    2))],
                            "reiciendis iste sed",
                            0.7946,
                            true,
                        ListMode.Hide,
                            true,
                            20946.3758,
                            49735021.5009,
                            true,
                        BlendMode.Reflect,
                            new Effect("consequatur",
                                36624634.3525),
                        new GraphicsLayerElevationInfo(new GraphicsLayerElevationInfoFeatureExpressionInfo("if ($feature.Age > 21) { return 'Adult'; } else { return 'Minor'; }",
                                    "blanditiis est voluptas"),
                            ElevationInfoMode.RelativeToScene,
                                611.4087,
                            ElevationUnit.Yards),
                        new Extent(-73.3590,
                                98.7318,
                                -84.9313,
                                32.7573,
                                764.1891,
                                129.8484,
                                887.3361,
                                20.9786,
                            new SpatialReference(4,
                                    "modi",
                                    "porro",
                                    "eum"),
                                true,
                                true),
                        new TimeExtent(new DateTime(2009, 10, 20, 1, 28, 16),
                                new DateTime(2021, 10, 14, 20, 52, 34)))],
                        "officia",
                    new PortalItem(),
                    [new WebTileLayer(BlendMode.Hue,
                            "et",
                            new Effect("commodi",
                                9798474.3879),
                        new Extent(166.6072,
                                90.8587,
                                42.6652,
                                73.8995,
                                87.5683,
                                3.5938,
                                424.0520,
                                819.8087,
                            new SpatialReference(9,
                                    "quaerat",
                                    "velit",
                                    "sint"),
                                true,
                                true),
                        ListMode.Show,
                            24008367.2575,
                            14617.7668,
                            0.9637,
                            true,
                        new PortalItem(),
                            748.7765,
                            ["minima",
                                "ipsum"],
                        new TileInfo(202.5924,
                                TileInfoFormat.Dib,
                                true,
                            [new LOD(2,
                                    "eligendi",
                                    42.0354,
                                    16169625.1699)],
                            new Point(146.3549,
                                    55.2602,
                                    -79.6838,
                                    -86.8535,
                                    909.9686,
                                new SpatialReference(1,
                                        "accusantium",
                                        "molestiae",
                                        "repellendus"),
                                    true,
                                    true,
                                    921.8138),
                                [5],
                            new SpatialReference(1,
                                    "quia",
                                    "id",
                                    "architecto")),
                            "voluptatem quidem quia")],
                    new SpatialReference(4,
                            "ab",
                            "in",
                            "aut"),
                    new BasemapStyle(),
                        "http://angie.com",
                        "debitis minus et"));
        await basemapToggleWidget.SetViewModel(testViewModel);
        var viewModel = await basemapToggleWidget.GetViewModel();
        Assert.AreEqual(testViewModel, viewModel);
        BasemapToggleVisibleElements testVisibleElements = new BasemapToggleVisibleElements(true);
        await basemapToggleWidget.SetVisibleElements(testVisibleElements);
        var visibleElements = await basemapToggleWidget.GetVisibleElements();
        Assert.AreEqual(testVisibleElements, visibleElements);
    }
}
