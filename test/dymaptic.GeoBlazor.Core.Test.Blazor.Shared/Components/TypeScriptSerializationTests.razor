@inherits TestRunnerBase

@{
base.BuildRenderTree(__builder);
}

@code {
    [Inject]
    public required AuthenticationManager AuthenticationManager { get; set; }
    
    [TestMethod]
    public async Task TestConvertPortalToArcGIS(Action renderHandler)
    {
        await AuthenticationManager.Initialize();
        Portal portal = new()
        {
            Url = "https://www.arcgis.com"
        };
        await AssertJavaScript("serialization.convertPortalToArcGIS", args: portal);
        Assert.IsNotNull(portal.JsComponentReference);
    }
    
    [TestMethod]
    public async Task TestConvertSimpleRendererToArcGIS(Action renderHandler)
    {
        await AuthenticationManager.Initialize();
        SimpleRenderer renderer = new(new SimpleMarkerSymbol(new Outline(new MapColor("red"), 1), 
            new MapColor("blue"), 10, SimpleMarkerStyle.Circle), "Test", 
            [new ColorVariable("TestField")]);
        await AssertJavaScript("serialization.convertSimpleRendererToArcGIS", args: renderer);
        Assert.IsNotNull(renderer.JsComponentReference);
    }
}