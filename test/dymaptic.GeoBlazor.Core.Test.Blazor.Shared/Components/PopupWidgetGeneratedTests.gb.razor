@inherits TestRunnerBase

@{
    base.BuildRenderTree(__builder);
}

@code {

    [TestMethod]
    public async Task TestCanRenderGeneratedPopupWidget(Action renderHandler)
    {
        PopupWidget? popupWidget = null;

        AddMapRenderFragment(
            @<MapView class="map-view" OnViewRendered="renderHandler">
                <Map>
                    <Basemap>
                        <BasemapStyle Name="BasemapStyleName.ArcgisTopographic" />
                    </Basemap>
                </Map>
                <PopupWidget 
                    Actions="@([new ActionButton("voluptas excepturi quo",
                        "https://picsum.photos/640/480/?image=558",
                        "b5179b7f-8b33-4aae-01d8-08a5451d530d",
                        () => { Console.WriteLine("harum"); return Task.CompletedTask; },
                        "avatar",
                        true,
                        true,
                        true,
                        "excepturi")])"
                    Alignment="@(PopupAlignment.TopCenter)"
                    AutoCloseEnabled="@(true)"
                    DefaultPopupTemplateEnabled="@(true)"
                    DockEnabled="@(true)"
                    GoToOverride="@(new GoToOverride())"
                    HeadingLevel="@(4)"
                    HighlightEnabled="@(true)"
                    Icon="@("dolorum")"
                    Label="@("asperiores")"
                    Promises="@("cupiditate")"
                    SelectedFeatureIndex="@(1)"
                    Title="@("quos expedita et")"
                    WidgetId="@("incidunt")">
                    <PopupVisibleElements 
                        CloseButton="@(true)"
                        FeatureNavigation="@(true)"
                        ActionBar="@(true)"
                        CollapseButton="@(true)"
                        FeatureListLayerTitle="@(true)"
                        Heading="@(true)"
                        Spinner="@(true)">
                    </PopupVisibleElements>
                    <PopupViewModel 
                        Actions="@([new ActionButton("laudantium dolorem quod",
                            "https://picsum.photos/640/480/?image=973",
                            "646310da-147f-0e04-1579-d3ba03277c13",
                            () => { Console.WriteLine("optio"); return Task.CompletedTask; },
                            "token",
                            true,
                            true,
                            true,
                            "voluptatem"),
                            new ActionButton("repellendus quia illum",
                                "https://picsum.photos/640/480/?image=884",
                                "d22c63bb-9d36-c320-51ec-baa7786cd00c",
                                () => { Console.WriteLine("tempora"); return Task.CompletedTask; },
                                "token",
                                true,
                                true,
                                true,
                                "id")])"
                        AutoCloseEnabled="@(true)"
                        BrowseClusterEnabled="@(true)"
                        DefaultPopupTemplateEnabled="@(true)"
                        FeaturesPerPage="@(1.3087)"
                        FeatureViewModelAbilities="@(new Abilities(true,
                                true,
                                true,
                                true,
                                true,
                                true))"
                        GoToOverride="@(new GoToOverride())"
                        HighlightEnabled="@(true)"
                        IncludeDefaultActions="@(true)"
                        Promises="@("qui")"
                        SelectedFeatureIndex="@(1)"
                        SpatialReference="@(new SpatialReference(5,
                                "vero",
                                "modi",
                                "enim"))"
                        TimeZone="@("Asia/Kamchatka")"
                        Title="@("autem aut quaerat")">
                        <Point 
                            Longitude="@(142.8477)"
                            Latitude="@(3.7552)"
                            X="@(-112.8487)"
                            Y="@(-45.8941)"
                            Z="@(748.8199)"
                            HasM="@(true)"
                            HasZ="@(true)"
                            M="@(356.7758)">
                            <SpatialReference 
                                Wkid="@(9)"
                                ImageCoordinateSystem="@("at")"
                                Wkt="@("eius")"
                                Wkt2="@("consequatur")">
                            </SpatialReference>
                        </Point>
                        <Graphic 
                            Geometry="@(new Extent(-158.7407,
                                    77.5790,
                                    -71.2034,
                                    18.8397,
                                    465.3247,
                                    30.2581,
                                    253.9006,
                                    239.4877,
                                new SpatialReference(9,
                                        "reiciendis",
                                        "quis",
                                        "molestias"),
                                    true,
                                    true))"
                            Symbol="@(new TextSymbol("et et sed",
                                new MapColor(215, 5, 43),
                                new MapColor(117, 158, 139),
                                    new Dimension(823.8885),
                                new MapFont(new Dimension(223.0166),
                                        "Garamond",
                                    MapFontStyle.Normal,
                                    FontWeight.Lighter,
                                    TextDecoration.Underline),
                                    369.4681,
                                new MapColor(178, 92, 66),
                                new MapColor(159, 154, 215),
                                    967.5796,
                                HorizontalAlignment.Left,
                                    true,
                                    156.8314,
                                    new Dimension(782.8336),
                                    true))"
                            PopupTemplate="@(new PopupTemplate("sit maiores harum",
                                    "inventore",
                                    ["quia"],
                                [new FieldInfo("comment",
                                        "consequuntur",
                                        "iusto",
                                    StringFieldOption.RichText,
                                    new FieldInfoFormat(6,
                                            true,
                                        DateFormat.DayShortMonthYearLongTime24),
                                        true,
                                        true,
                                    StatisticType.Avg),
                                new FieldInfo("password",
                                        "nobis",
                                        "quo",
                                    StringFieldOption.RichText,
                                    new FieldInfoFormat(3,
                                            true,
                                        DateFormat.LongMonthYear),
                                        true,
                                        true,
                                    StatisticType.Min)],
                                [new FieldsPopupContent([new FieldInfo("password",
                                            "tempore",
                                            "est",
                                        StringFieldOption.TextBox,
                                        new FieldInfoFormat(3,
                                                true,
                                            DateFormat.ShortDateLeShortTime24),
                                            true,
                                            true,
                                        StatisticType.Sum),
                                    new FieldInfo("title",
                                            "et",
                                            "incidunt",
                                        StringFieldOption.RichText,
                                        new FieldInfoFormat(6,
                                                true,
                                            DateFormat.ShortDateLeLongTime24),
                                            true,
                                            true,
                                        StatisticType.Min)],
                                        "corporis iste",
                                        "enim autem aut")],
                                [new ExpressionInfo("return $feature.Population / $feature.Area;",
                                        "avatar",
                                        "omnis aliquid quisquam",
                                        ExpressionInfoReturnType.String),
                                new ExpressionInfo("var area = Geometry($feature).area; return area;",
                                        "id",
                                        "reiciendis maiores provident",
                                        ExpressionInfoReturnType.String)],
                                    true,
                                    true,
                                    [new ActionButton("perferendis quos laudantium",
                                        "https://picsum.photos/640/480/?image=67",
                                        "e476b8dc-9341-8230-54d7-541d8a3346df",
                                        () => { Console.WriteLine("suscipit"); return Task.CompletedTask; },
                                        "createdAt",
                                        true,
                                        true,
                                        true,
                                        "quidem"),
                                        new ActionButton("voluptates doloremque quia",
                                            "https://picsum.photos/640/480/?image=588",
                                            "9b5324af-20bf-6c46-e48a-79b3a74adbbd",
                                            () => { Console.WriteLine("eligendi"); return Task.CompletedTask; },
                                            "status",
                                            true,
                                            true,
                                            true,
                                            "quod")]))"
                            Attributes="@(new AttributesDictionary())"
                            Visible="@(true)"
                            LegendLabel="@("nostrum")"
                            AggregateGeometries="@("non")"
                            Origin="@(new GraphicOrigin(Guid.NewGuid(),
                                "in",
                                1))">
                        </Graphic>
                    </PopupViewModel>
                    <Point 
                        Longitude="@(-56.7908)"
                        Latitude="@(-70.5163)"
                        X="@(-35.6508)"
                        Y="@(77.0588)"
                        Z="@(922.1624)"
                        SpatialReference="@(new SpatialReference(9,
                                "labore",
                                "nihil",
                                "velit"))"
                        HasM="@(true)"
                        HasZ="@(true)"
                        M="@(172.7647)">
                    </Point>
                    <Graphic 
                        Geometry="@(new Extent(18.3032,
                                164.0519,
                                73.2987,
                                57.3635,
                                696.4296,
                                914.9310,
                                805.7701,
                                315.1661,
                            new SpatialReference(1,
                                    "libero",
                                    "quis",
                                    "consectetur"),
                                true,
                                true))"
                        Symbol="@(new TextSymbol("consequuntur et omnis",
                            new MapColor(235, 159, 82),
                            new MapColor(213, 254, 155),
                                new Dimension(553.3506),
                            new MapFont(new Dimension(929.7060),
                                    "Bookman",
                                MapFontStyle.Normal,
                                FontWeight.Normal,
                                TextDecoration.None),
                                468.6407,
                            new MapColor(23, 231, 45),
                            new MapColor(174, 188, 129),
                                84.5892,
                            HorizontalAlignment.Center,
                                true,
                                336.7356,
                                new Dimension(389.4141),
                                true))"
                        PopupTemplate="@(new PopupTemplate("quos aut qui",
                                "ut",
                                ["aut",
                                    "et"],
                            [new FieldInfo("token",
                                    "fugiat",
                                    "consequatur",
                                StringFieldOption.TextArea,
                                new FieldInfoFormat(6,
                                        true,
                                    DateFormat.LongMonthDayYearLongTime),
                                    true,
                                    true,
                                StatisticType.Avg),
                            new FieldInfo("password",
                                    "eaque",
                                    "id",
                                StringFieldOption.RichText,
                                new FieldInfoFormat(5,
                                        true,
                                    DateFormat.ShortDateShortTime),
                                    true,
                                    true,
                                StatisticType.Stddev)],
                            [new ExpressionPopupContent(new ElementExpressionInfo("return $feature.Name;",
                                        "et",
                                        "ab vel sed"))],
                            [new ExpressionInfo("return Date();",
                                    "email",
                                    "similique amet ullam",
                                    ExpressionInfoReturnType.String)],
                                true,
                                true,
                                [new ActionButton("officia assumenda velit",
                                    "https://picsum.photos/640/480/?image=935",
                                    "2ce4fcb9-6347-3bff-3f62-bbc3283a46f9",
                                    () => { Console.WriteLine("harum"); return Task.CompletedTask; },
                                    "email",
                                    true,
                                    true,
                                    true,
                                    "illo"),
                                    new ActionButton("natus omnis est",
                                        "https://picsum.photos/640/480/?image=532",
                                        "48e2e15d-5dbe-87cb-4a43-46152253e5d7",
                                        () => { Console.WriteLine("laborum"); return Task.CompletedTask; },
                                        "phone",
                                        true,
                                        true,
                                        true,
                                        "non")]))"
                        Attributes="@(new AttributesDictionary())"
                        Visible="@(true)"
                        LegendLabel="@("ut")"
                        AggregateGeometries="@("at")"
                        Origin="@(new GraphicOrigin(Guid.NewGuid(),
                            "nemo",
                            4))">
                    </Graphic>
                    <PopupDockOptions 
                        Position="@(PopupDockPosition.Auto)"
                        ButtonEnabled="@(true)"
                        BreakPoint="@(new BreakPoint(193.8676,
                            207.5524))"
                        BoolBreakpoint="@(true)"
                        PopupDockOptionsBreakpoint="@(new PopupDockOptionsBreakpoint(7,
                                3))">
                    </PopupDockOptions>
                </PopupWidget>
            </MapView>);
        await WaitForMapToRender();
        Assert.IsNotNull(popupWidget!);
        await AssertJavaScript("assertWidgetExists", args: "popup");
        await popupWidget.Blur();
        await popupWidget.Focus();
        var nextMethodResult = await popupWidget.Next();
        Assert.IsNotNull(nextMethodResult);
        await popupWidget.Open(new PopupOpenOptions(true,
                    default,
                    true,
                [new Graphic(new Point(58.1719,
                            67.4363,
                            104.2218,
                            50.5081,
                            53.8859,
                        new SpatialReference(5,
                                "quis",
                                "dolores",
                                "delectus"),
                            true,
                            true,
                            684.3033),
                    new TextSymbol("sint hic porro",
                        new MapColor(213, 43, 79),
                        new MapColor(173, 135, 236),
                            new Dimension(949.6464),
                        new MapFont(new Dimension(948.8533),
                                "Bookman",
                            MapFontStyle.Normal,
                            FontWeight.Normal,
                            TextDecoration.LineThrough),
                            162.3135,
                        new MapColor(113, 63, 51),
                        new MapColor(110, 221, 202),
                            519.8530,
                        HorizontalAlignment.Right,
                            true,
                            671.1035,
                            new Dimension(153.3666),
                            true),
                    new PopupTemplate("iste in veritatis",
                            "sunt",
                            ["qui",
                                "error"],
                        [new FieldInfo("token",
                                "et",
                                "nesciunt",
                            StringFieldOption.TextArea,
                            new FieldInfoFormat(4,
                                    true,
                                DateFormat.DayShortMonthYearLongTime),
                                true,
                                true,
                            StatisticType.Avg),
                        new FieldInfo("createdAt",
                                "delectus",
                                "iusto",
                            StringFieldOption.RichText,
                            new FieldInfoFormat(3,
                                    true,
                                DateFormat.LongDateShortTime24),
                                true,
                                true,
                            StatisticType.Max)],
                        [new FieldsPopupContent([new FieldInfo("name",
                                    "perspiciatis",
                                    "molestiae",
                                StringFieldOption.TextBox,
                                new FieldInfoFormat(2,
                                        true,
                                    DateFormat.LongDateShortTime),
                                    true,
                                    true,
                                StatisticType.Min)],
                                "officiis molestiae",
                                "aut saepe sequi"),
                        new FieldsPopupContent([new FieldInfo("name",
                                    "sed",
                                    "ea",
                                StringFieldOption.TextBox,
                                new FieldInfoFormat(5,
                                        true,
                                    DateFormat.LongMonthYear),
                                    true,
                                    true,
                                StatisticType.Avg)],
                                "fugiat possimus",
                                "est minima quibusdam")],
                        [new ExpressionInfo("var x = $feature.X; var y = $feature.Y; return x + ', ' + y;",
                                "token",
                                "unde dolor vitae",
                                ExpressionInfoReturnType.String)],
                            true,
                            true,
                            [new ActionButton("et praesentium rem",
                                "https://picsum.photos/640/480/?image=692",
                                "3d3bae9e-b51e-c4a3-f19c-d7602e7a6de8",
                                () => { Console.WriteLine("qui"); return Task.CompletedTask; },
                                "comment",
                                true,
                                true,
                                true,
                                "dolor"),
                                new ActionButton("voluptatum at voluptatum",
                                    "https://picsum.photos/640/480/?image=23",
                                    "77ac3f05-e3c1-b71f-76c9-d750b798d82c",
                                    () => { Console.WriteLine("sequi"); return Task.CompletedTask; },
                                    "updatedAt",
                                    true,
                                    true,
                                    true,
                                    "officiis")]),
                        new AttributesDictionary(),
                        true,
                        "distinctio",
                        "aut",
                        new GraphicOrigin(Guid.NewGuid(),
                            "neque",
                            8)),
                new Graphic(new Polygon([new MapPath([new MapPoint([957.8869]),
                            new MapPoint([422.5508])]),
                            new MapPath([new MapPoint([672.0413])])],
                        new SpatialReference(7,
                                "quo",
                                "magni",
                                "natus"),
                        new Point(42.0658,
                                -77.1931,
                                -97.0775,
                                -77.7942,
                                936.6445,
                            new SpatialReference(1,
                                    "autem",
                                    "explicabo",
                                    "et"),
                                true,
                                true,
                                126.9125),
                            true,
                            true,
                            true),
                    new TextSymbol("laudantium ullam repellat",
                        new MapColor(153, 217, 248),
                        new MapColor(91, 206, 125),
                            new Dimension(187.1584),
                        new MapFont(new Dimension(21.4481),
                                "Palatino",
                            MapFontStyle.Italic,
                            FontWeight.Normal,
                            TextDecoration.Underline),
                            533.4952,
                        new MapColor(161, 236, 235),
                        new MapColor(62, 157, 217),
                            814.9845,
                        HorizontalAlignment.Left,
                            true,
                            664.6483,
                            new Dimension(383.2925),
                            true),
                    new PopupTemplate("et qui recusandae",
                            "tenetur",
                            ["tenetur",
                                "et"],
                        [new FieldInfo("status",
                                "et",
                                "est",
                            StringFieldOption.RichText,
                            new FieldInfoFormat(5,
                                    true,
                                DateFormat.LongMonthDayYear),
                                true,
                                true,
                            StatisticType.Max),
                        new FieldInfo("phone",
                                "hic",
                                "provident",
                            StringFieldOption.TextArea,
                            new FieldInfoFormat(5,
                                    true,
                                DateFormat.LongDateLongTime24),
                                true,
                                true,
                            StatisticType.Stddev)],
                        [new AttachmentsPopupContent("nemo officia odit",
                                "veritatis eaque dolores",
                                AttachmentsPopupContentDisplayType.Auto)],
                        [new ExpressionInfo("return $feature.Status == 'Active' ? 'Active' : 'Inactive';",
                                "email",
                                "dolorem modi iure",
                                ExpressionInfoReturnType.String),
                        new ExpressionInfo("var area = Geometry($feature).area; return area;",
                                "password",
                                "at in ducimus",
                                ExpressionInfoReturnType.String)],
                            true,
                            true,
                            [new ActionButton("ipsum sequi corrupti",
                                "https://picsum.photos/640/480/?image=590",
                                "68c83bc9-754f-3eaf-c8b2-537a31e42cd3",
                                () => { Console.WriteLine("ex"); return Task.CompletedTask; },
                                "password",
                                true,
                                true,
                                true,
                                "dolorum")]),
                        new AttributesDictionary(),
                        true,
                        "error",
                        "illum",
                        new GraphicOrigin(Guid.NewGuid(),
                            "saepe",
                            5))],
                    true,
                new Point(80.3112,
                        65.2622,
                        -3.4053,
                        13.1125,
                        719.8978,
                    new SpatialReference(6,
                            "ut",
                            "excepturi",
                            "suscipit"),
                        true,
                        true,
                        569.7334),
                    "quos",
                    true,
                    "inventore",
                    "est et quae",
                    true,
                new BookmarksWidget([new Bookmark("name",
                        new TimeExtent(new DateTime(2002, 4, 5, 13, 48, 58),
                                new DateTime(2008, 10, 22, 11, 17, 19)),
                        new BookmarkThumbnail("https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/weather_stations_010417/FeatureServer/0"),
                        new Viewpoint(new Polyline([new MapPath([new MapPoint([587.0048,
                                        769.4878]),
                                    new MapPoint([113.6514,
                                        599.9112])]),
                                    new MapPath([new MapPoint([553.1876])])],
                                new SpatialReference(1,
                                        "fugit",
                                        "quam",
                                        "molestiae"),
                                    true,
                                    true),
                                26250658.6271,
                                1.6577,
                            new Camera(330.0622,
                                    930.9986,
                                new CameraLayout(943.3992,
                                        505.4789,
                                        87.7945,
                                        854.7142),
                                new Point(-23.4458,
                                        -47.4376,
                                        -34.8705,
                                        34.9367,
                                        7.5412,
                                    new SpatialReference(9,
                                            "rem",
                                            "et",
                                            "distinctio"),
                                        true,
                                        true,
                                        533.7250),
                                    825.4890)))],
                    new BookmarkOptions(true,
                            true,
                            true,
                            true,
                        new BookmarkOptionsScreenshotSettings(new BookmarkOptionsScreenshotSettingsArea(6,
                                    9,
                                    60.8265,
                                    27.2197),
                                8,
                            [new ImageryLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/NLCDLandCover2001/ImageServer",
                                new PortalItem(),
                                    new RasterStretchRenderer(new AlgorithmicColorRamp(Algorithm.LabLch,
                                            new MapColor(225, 238, 208),
                                            new MapColor(218, 10, 238)),
                                        true,
                                        true,
                                        [9],
                                        1,
                                        1,
                                        StretchType.StandardDeviation,
                                        [new RasterBandStatistics(583.4048,
                                            4,
                                            180.2575,
                                            650.9026,
                                            362.1143,
                                            105.1933,
                                            779.9970,
                                            40.9711),
                                        new RasterBandStatistics(122.0520,
                                            7,
                                            371.3357,
                                            900.8029,
                                            255.6042,
                                            625.8917,
                                            799.4071,
                                            556.6806)],
                                        true,
                                        9),
                                    [9,
                                        9],
                                BlendMode.DestinationAtop,
                                    432.0790,
                                    386.7331,
                                    "nostrum",
                                    "quia",
                                    new Effect("enim",
                                        22119199.2829),
                                ImageFormat.Png24,
                                    true,
                                    2,
                                    8,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                new TileInfo(921.4805,
                                        TileInfoFormat.Gif,
                                        true,
                                    [new LOD(6,
                                            "sapiente",
                                            17.8547,
                                            6739949.0046),
                                    new LOD(9,
                                            "eos",
                                            69.9627,
                                            3919725.1002)],
                                    new Point(100.3665,
                                            46.1088,
                                            74.3663,
                                            2.7853,
                                            921.5550,
                                        new SpatialReference(4,
                                                "labore",
                                                "assumenda",
                                                "dignissimos"),
                                            true,
                                            true,
                                            496.7372),
                                        [5,
                                            7],
                                    new SpatialReference(6,
                                            "reiciendis",
                                            "sunt",
                                            "est")),
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                    true)],
                                3),
                            true),
                    new BookmarkOptions(true,
                            true,
                            true,
                            true,
                        new BookmarkOptionsScreenshotSettings(new BookmarkOptionsScreenshotSettingsArea(3,
                                    3,
                                    -55.6382,
                                    -47.3834),
                                2,
                            [new ImageryLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/NLCDLandCover2001/ImageServer",
                                new PortalItem(),
                                    new RasterStretchRenderer(new AlgorithmicColorRamp(Algorithm.LabLch,
                                            new MapColor(186, 184, 60),
                                            new MapColor(125, 147, 229)),
                                        true,
                                        true,
                                        [4,
                                        7],
                                        2,
                                        3,
                                        StretchType.HistogramEqualization,
                                        [new RasterBandStatistics(85.2705,
                                            5,
                                            673.9629,
                                            283.8039,
                                            989.0450,
                                            421.6900,
                                            574.1536,
                                            734.8782)],
                                        true,
                                        9),
                                    [2,
                                        2],
                                BlendMode.SoftLight,
                                    817.6357,
                                    743.2465,
                                    "quia",
                                    "modi",
                                    new Effect("libero",
                                        30366228.7352),
                                ImageFormat.Bmp,
                                    true,
                                    5,
                                    7,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                new TileInfo(885.7971,
                                        TileInfoFormat.Ps,
                                        true,
                                    [new LOD(2,
                                            "a",
                                            64.0101,
                                            46960167.3865),
                                    new LOD(5,
                                            "odit",
                                            15.1893,
                                            2911697.7609)],
                                    new Point(-14.2123,
                                            -2.3906,
                                            -68.6240,
                                            -73.4857,
                                            453.8206,
                                        new SpatialReference(5,
                                                "maiores",
                                                "ut",
                                                "enim"),
                                            true,
                                            true,
                                            993.3264),
                                        [1],
                                    new SpatialReference(9,
                                            "tenetur",
                                            "nisi",
                                            "sunt")),
                                null,
                                null,
                                null,
                                null,
                                null,
                                null,
                                    true)],
                                1),
                            true),
                        true,
                        true,
                        "voluptates",
                        "ducimus vero est",
                    new GoToOverride(),
                        8,
                        "nulla",
                        "dolores",
                    new BookmarksViewModel([new Bookmark("avatar",
                            new TimeExtent(new DateTime(2020, 10, 5, 10, 4, 57),
                                    new DateTime(2018, 8, 18, 11, 20, 33)),
                            new BookmarkThumbnail("https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Parks_and_Open_Space/FeatureServer/0"),
                            new Viewpoint(new Extent(40.6132,
                                        106.9422,
                                        84.7684,
                                        -49.1383,
                                        90.0270,
                                        991.5286,
                                        276.1471,
                                        760.0207,
                                    new SpatialReference(3,
                                            "autem",
                                            "voluptas",
                                            "eum"),
                                        true,
                                        true),
                                    31778173.2948,
                                    6.3977,
                                new Camera(679.2073,
                                        297.6506,
                                    new CameraLayout(963.0864,
                                            457.4373,
                                            796.4429,
                                            184.6154),
                                    new Point(-105.0837,
                                            -70.4270,
                                            -21.6680,
                                            75.1516,
                                            966.6690,
                                        new SpatialReference(8,
                                                "nihil",
                                                "assumenda",
                                                "ut"),
                                            true,
                                            true,
                                            517.6673),
                                        736.9091)))],
                        new BookmarksCapabilities(true),
                        new BookmarkOptions(true,
                                true,
                                true,
                                true,
                            new BookmarkOptionsScreenshotSettings(new BookmarkOptionsScreenshotSettingsArea(4,
                                        2,
                                        -40.2023,
                                        87.0388),
                                    7,
                                [new GeoJSONLayer("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson",
                                        "et",
                                        "architecto laborum ipsam",
                                        0.8553,
                                        true,
                                    ListMode.Show,
                                    BlendMode.Xor,
                                        default,
                                        "beatae",
                                        "laudantium",
                                        true,
                                        new Effect("atque",
                                            25352168.8275),
                                    new GeoJSONLayerElevationInfo(new GeoJSONLayerElevationInfoFeatureExpressionInfo("var length = Geometry($feature).length; return length;",
                                                "nostrum rerum alias"),
                                        ElevationInfoMode.RelativeToGround,
                                            935.9923,
                                        ElevationUnit.Decimeters),
                                    new FeatureEffect([new Effect("dignissimos",
                                            32773934.2558)],
                                            true,
                                        new FeatureFilter(239.0335,
                                            new Polygon([new MapPath([new MapPoint([91.4933]),
                                                    new MapPoint([531.8755])])],
                                                new SpatialReference(6,
                                                        "qui",
                                                        "optio",
                                                        "repudiandae"),
                                                new Point(-51.0572,
                                                        -14.6264,
                                                        -36.2960,
                                                        9.5435,
                                                        173.9548,
                                                    new SpatialReference(),
                                                        true,
                                                        true,
                                                        383.6736),
                                                    true,
                                                    true,
                                                    true),
                                                [2],
                                            SpatialRelationship.IndexIntersects,
                                            new TimeExtent(new DateTime(2021, 1, 19, 16, 6, 2),
                                                    new DateTime(2010, 7, 18, 4, 5, 15)),
                                                QueryUnits.Miles,
                                                "Name = 'John Doe'"),
                                            [new Effect("ea",
                                                43157016.9167),
                                                new Effect("quaerat",
                                                    15989401.2754)])),
                                new BingMapsLayer("nulla",
                                        BingImageryStyle.Road,
                                    BlendMode.SourceIn,
                                        new Effect("magni",
                                            18631795.2182),
                                        25886783.0894,
                                        30016.3533,
                                        39.2270,
                                    new SpatialReference(7,
                                            "libero",
                                            "quia",
                                            "praesentium"),
                                        default,
                                    new Extent(47.9077,
                                            37.6727,
                                            26.2610,
                                            26.1590,
                                            427.1841,
                                            477.2124,
                                            994.7872,
                                            834.7375,
                                        new SpatialReference(1,
                                                "corrupti",
                                                "ut",
                                                "blanditiis"),
                                            true,
                                            true),
                                    ListMode.Show,
                                        0.3291,
                                        true,
                                        "porro")],
                                    6),
                                true),
                        new BookmarkOptions(true,
                                true,
                                true,
                                true,
                            new BookmarkOptionsScreenshotSettings(new BookmarkOptionsScreenshotSettingsArea(4,
                                        7,
                                        72.2899,
                                        41.6808),
                                    8,
                                [new MapImageLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer",
                                    new PortalItem(),
                                    BlendMode.DestinationAtop,
                                        default,
                                        331.9008,
                                        new Effect("natus",
                                            11281036.6815),
                                        "7.5.3.4",
                                        MapImageFormat.Png8,
                                        6,
                                        3,
                                        true,
                                        true,
                                        44189836.8589,
                                        12758.4808,
                                    null,
                                    null,
                                    null,
                                    null,
                                    null,
                                    null,
                                    null,
                                        true),
                                new MapImageLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer",
                                    new PortalItem(),
                                    BlendMode.Saturation,
                                        default,
                                        379.9375,
                                        new Effect("dolor",
                                            41218124.0914),
                                        "9.6.0.6",
                                        MapImageFormat.Svg,
                                        3,
                                        3,
                                        true,
                                        true,
                                        45809001.4535,
                                        49881.4658,
                                    null,
                                    null,
                                    null,
                                    null,
                                    null,
                                    null,
                                    null,
                                        true)],
                                    4),
                                true),
                        new GoToOverride()),
                    new BookmarksVisibleElements(true,
                            true,
                            true,
                            true,
                            true,
                            true,
                            true,
                            true,
                            true),
                        "dicta")));
        var previousMethodResult = await popupWidget.Previous();
        Assert.IsNotNull(previousMethodResult);
        await popupWidget.Reposition();
        await popupWidget.TriggerAction(1);
        PopupDockOptions testDockOptions = new PopupDockOptions(PopupDockPosition.Auto,
                    true,
                    new BreakPoint(162.5708,
                        161.0399),
                    true,
                new PopupDockOptionsBreakpoint(7,
                        9));
        await popupWidget.SetDockOptions(testDockOptions);
        var dockOptions = await popupWidget.GetDockOptions();
        Assert.AreEqual(testDockOptions, dockOptions);
        IReadOnlyList<Graphic> testFeatures = [new Graphic(new Extent(62.4216,
                        -111.0304,
                        -55.0433,
                        7.5880,
                        225.1937,
                        950.5311,
                        221.0781,
                        421.7341,
                    new SpatialReference(2,
                            "fugit",
                            "ullam",
                            "hic"),
                        true,
                        true),
                new TextSymbol("magni ratione ut",
                    new MapColor(252, 86, 151),
                    new MapColor(185, 73, 143),
                        new Dimension(841.0226),
                    new MapFont(new Dimension(455.1343),
                            "Garamond",
                        MapFontStyle.Oblique,
                        FontWeight.Bold,
                        TextDecoration.None),
                        498.2546,
                    new MapColor(213, 215, 92),
                    new MapColor(121, 167, 18),
                        835.5103,
                    HorizontalAlignment.Right,
                        true,
                        929.5409,
                        new Dimension(25.2842),
                        true),
                new PopupTemplate("reprehenderit enim deleniti",
                        "voluptatem",
                        ["non",
                            "assumenda"],
                    [new FieldInfo("title",
                            "placeat",
                            "consequatur",
                        StringFieldOption.TextBox,
                        new FieldInfoFormat(8,
                                true,
                            DateFormat.LongMonthDayYearShortTime24),
                            true,
                            true,
                        StatisticType.Avg)],
                    [new MediaPopupContent("amet sapiente non",
                            "voluptatum delectus et aut",
                        [new PieChartMediaInfo("aperiam nostrum nihil",
                                "et",
                                "minima sit qui",
                            new ChartMediaInfoValue(["aliquam"],
                                    "voluptate",
                                    "numquam",
                                [new ChartMediaInfoValueSeries("status",
                                        "est",
                                        745.3533),
                                new ChartMediaInfoValueSeries("title",
                                        "corporis",
                                        42.2959)],
                                [new MapColor(45, 210, 182),
                                new MapColor(16, 215, 114)])),
                        new LineChartMediaInfo("incidunt tempora dolores",
                                "ut",
                                "mollitia ut quibusdam",
                            new ChartMediaInfoValue(["a"],
                                    "voluptatem",
                                    "voluptate",
                                [new ChartMediaInfoValueSeries("email",
                                        "quae",
                                        202.4202),
                                new ChartMediaInfoValueSeries("title",
                                        "quia",
                                        811.1105)],
                                [new MapColor(234, 218, 228)]))],
                            2)],
                    [new ExpressionInfo("if ($feature.Age > 21) { return 'Adult'; } else { return 'Minor'; }",
                            "avatar",
                            "magni amet ipsam",
                            ExpressionInfoReturnType.String)],
                        true,
                        true,
                        [new ActionButton("id odio ut",
                            "https://picsum.photos/640/480/?image=830",
                            "a282d940-bc61-389c-fe28-331cb6a6f2bf",
                            () => { Console.WriteLine("ut"); return Task.CompletedTask; },
                            "updatedAt",
                            true,
                            true,
                            true,
                            "est")]),
                    new AttributesDictionary(),
                    true,
                    "quod",
                    "distinctio",
                    new GraphicOrigin(Guid.NewGuid(),
                        "explicabo",
                        5))];
        await popupWidget.SetFeatures(testFeatures);
        var features = await popupWidget.GetFeatures();
        Assert.AreEqual(testFeatures, features);
        GoToOverride testGoToOverride = new GoToOverride();
        await popupWidget.SetGoToOverride(testGoToOverride);
        var goToOverride = await popupWidget.GetGoToOverride();
        Assert.AreEqual(testGoToOverride, goToOverride);
        Point testLocation = new Point(-172.1886,
                    35.6893,
                    148.6040,
                    -22.1292,
                    574.6650,
                new SpatialReference(2,
                        "alias",
                        "ducimus",
                        "similique"),
                    true,
                    true,
                    878.8002);
        await popupWidget.SetLocation(testLocation);
        var location = await popupWidget.GetLocation();
        Assert.AreEqual(testLocation, location);
        PopupViewModel testViewModel = new PopupViewModel([new ActionButton("velit nostrum illum",
                    "https://picsum.photos/640/480/?image=582",
                    "2f421a70-261d-cca3-8bb4-211dce24ad91",
                    () => { Console.WriteLine("illum"); return Task.CompletedTask; },
                    "email",
                    true,
                    true,
                    true,
                    "et")],
                    true,
                    true,
                    true,
                [new Graphic(new Polygon([new MapPath([new MapPoint([701.0732]),
                            new MapPoint([10.4191])]),
                            new MapPath([new MapPoint([982.2388])])],
                        new SpatialReference(2,
                                "quia",
                                "ea",
                                "officiis"),
                        new Point(3.6093,
                                -6.6676,
                                20.5101,
                                77.8106,
                                252.2037,
                            new SpatialReference(2,
                                    "dolorem",
                                    "esse",
                                    "quia"),
                                true,
                                true,
                                198.3187),
                            true,
                            true,
                            true),
                    new TextSymbol("aliquid nobis quia",
                        new MapColor(117, 243, 207),
                        new MapColor(236, 104, 158),
                            new Dimension(747.6413),
                        new MapFont(new Dimension(132.5607),
                                "Garamond",
                            MapFontStyle.Oblique,
                            FontWeight.Lighter,
                            TextDecoration.Underline),
                            598.4305,
                        new MapColor(254, 246, 73),
                        new MapColor(166, 237, 57),
                            936.0386,
                        HorizontalAlignment.Right,
                            true,
                            715.2896,
                            new Dimension(855.5738),
                            true),
                    new PopupTemplate("expedita nam minima",
                            "rerum",
                            ["dicta",
                                "dolores"],
                        [new FieldInfo("category",
                                "rem",
                                "tenetur",
                            StringFieldOption.RichText,
                            new FieldInfoFormat(8,
                                    true,
                                DateFormat.LongDateShortTime),
                                true,
                                true,
                            StatisticType.Var)],
                        [new FieldsPopupContent([new FieldInfo("id",
                                    "iure",
                                    "et",
                                StringFieldOption.TextArea,
                                new FieldInfoFormat(2,
                                        true,
                                    DateFormat.ShortDateLeLongTime),
                                    true,
                                    true,
                                StatisticType.Var)],
                                "omnis quisquam",
                                "maiores quia est"),
                        new ExpressionPopupContent(new ElementExpressionInfo("var x = $feature.X; var y = $feature.Y; return x + ', ' + y;",
                                    "laudantium",
                                    "blanditiis ratione quia"))],
                        [new ExpressionInfo("var x = $feature.X; var y = $feature.Y; return x + ', ' + y;",
                                "updatedAt",
                                "magni et eaque",
                                ExpressionInfoReturnType.String)],
                            true,
                            true,
                            [new ActionButton("eum qui optio",
                                "https://picsum.photos/640/480/?image=159",
                                "9d86aa9f-4644-984b-71e3-2510feabde93",
                                () => { Console.WriteLine("quo"); return Task.CompletedTask; },
                                "avatar",
                                true,
                                true,
                                true,
                                "ea"),
                                new ActionButton("cupiditate porro labore",
                                    "https://picsum.photos/640/480/?image=590",
                                    "76ced6ad-a7c2-f24e-2c65-29bae08bb62b",
                                    () => { Console.WriteLine("delectus"); return Task.CompletedTask; },
                                    "updatedAt",
                                    true,
                                    true,
                                    true,
                                    "soluta")]),
                        new AttributesDictionary(),
                        true,
                        "ipsum",
                        "distinctio",
                        new GraphicOrigin(Guid.NewGuid(),
                            "perferendis",
                            7))],
                    969.8634,
                new Abilities(true,
                        true,
                        true,
                        true,
                        true,
                        true),
                new GoToOverride(),
                    true,
                    true,
                new Point(-59.4387,
                        20.5042,
                        -88.0247,
                        52.6301,
                        432.1025,
                    new SpatialReference(9,
                            "sunt",
                            "illum",
                            "aspernatur"),
                        true,
                        true,
                        313.2515),
                    "quibusdam",
                    1,
                new SpatialReference(3,
                        "recusandae",
                        "accusantium",
                        "velit"));
        await popupWidget.SetViewModel(testViewModel);
        var viewModel = await popupWidget.GetViewModel();
        Assert.AreEqual(testViewModel, viewModel);
        PopupVisibleElements testVisibleElements = new PopupVisibleElements(true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true);
        await popupWidget.SetVisibleElements(testVisibleElements);
        var visibleElements = await popupWidget.GetVisibleElements();
        Assert.AreEqual(testVisibleElements, visibleElements);
    }
}
