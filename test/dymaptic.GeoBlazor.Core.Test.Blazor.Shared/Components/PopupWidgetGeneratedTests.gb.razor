@inherits TestRunnerBase

@{
    base.BuildRenderTree(__builder);
}

@code {

    [TestMethod]
    public async Task TestCanRenderGeneratedPopupWidget(Action renderHandler)
    {
        PopupWidget? popupWidget = null;

        AddMapRenderFragment(
            @<MapView class="map-view" OnViewRendered="renderHandler">
                <Map>
                    <Basemap>
                        <BasemapStyle Name="BasemapStyleName.ArcgisTopographic" />
                    </Basemap>
                </Map>
                <PopupWidget 
                    Actions="@([new ActionButton("optio in reprehenderit",
                        "https://picsum.photos/640/480/?image=571",
                        "319a8d8c-ae7d-5182-fc9e-001767beb295",
                        () => { Console.WriteLine("exercitationem"); return Task.CompletedTask; },
                        "password",
                        true,
                        true,
                        true,
                        "error")])"
                    Alignment="@(PopupAlignment.Auto)"
                    AutoCloseEnabled="@(true)"
                    DefaultPopupTemplateEnabled="@(true)"
                    DockEnabled="@(true)"
                    GoToOverride="@(new GoToOverride())"
                    HeadingLevel="@(2)"
                    HighlightEnabled="@(true)"
                    Icon="@("ipsam")"
                    Label="@("quo")"
                    Promises="@("dolores")"
                    SelectedFeatureIndex="@(8)"
                    Title="@("placeat culpa amet")"
                    ViewModel="@(new PopupViewModel([new ActionButton("iste pariatur minus",
                            "https://picsum.photos/640/480/?image=246",
                            "a1c7857f-7e2c-365c-eb67-d08bbcc82e09",
                            () => { Console.WriteLine("sed"); return Task.CompletedTask; },
                            "name",
                            true,
                            true,
                            true,
                            "et")],
                            true,
                            true,
                            true,
                        [new Graphic(new Point(134.0924,
                                    -20.6363,
                                    135.0115,
                                    -72.9756,
                                    958.1656,
                                new SpatialReference(4,
                                        "sit",
                                        "necessitatibus",
                                        "consequuntur"),
                                    true,
                                    true,
                                    312.4717),
                            new TextSymbol("eveniet ab laboriosam",
                                new MapColor(158, 62, 117),
                                new MapColor(146, 14, 95),
                                    new Dimension(456.6233),
                                new MapFont(new Dimension(480.8588),
                                        "Verdana",
                                    MapFontStyle.Normal,
                                    FontWeight.Normal,
                                    TextDecoration.None),
                                    17.8716,
                                new MapColor(70, 27, 146),
                                new MapColor(223, 31, 196),
                                    74.8698,
                                HorizontalAlignment.Left,
                                    true,
                                    935.5424,
                                    new Dimension(858.6796),
                                    true),
                            new PopupTemplate("ab molestiae quaerat",
                                    "ut",
                                    ["pariatur",
                                        "quod"],
                                [new FieldInfo("group",
                                        "et",
                                        "numquam",
                                    StringFieldOption.TextBox,
                                    new FieldInfoFormat(7,
                                            true,
                                        DateFormat.LongDateLongTime),
                                        true,
                                        true,
                                    StatisticType.Max)],
                                [new RelationshipPopupContent("sed impedit expedita",
                                        "maiores ipsa officiis occaecati",
                                        5,
                                        "ratione",
                                    [new RelatedRecordsInfoFieldOrder("consectetur",
                                        OrderBy.Asc)],
                                        2),
                                new TextPopupContent("culpa non et")],
                                [new ExpressionInfo("return Date();",
                                        "updatedAt",
                                        "et est harum",
                                        ExpressionInfoReturnType.String)],
                                    true,
                                    true,
                                    [new ActionButton("explicabo sed ea",
                                        "https://picsum.photos/640/480/?image=392",
                                        "59757212-ee5e-b85e-4ca7-6d46b900428b",
                                        () => { Console.WriteLine("placeat"); return Task.CompletedTask; },
                                        "title",
                                        true,
                                        true,
                                        true,
                                        "sunt"),
                                        new ActionButton("officiis voluptatem ullam",
                                            "https://picsum.photos/640/480/?image=676",
                                            "9b6e34f6-b869-f28b-4588-87b84c5437ce",
                                            () => { Console.WriteLine("ad"); return Task.CompletedTask; },
                                            "phone",
                                            true,
                                            true,
                                            true,
                                            "amet")]),
                                new AttributesDictionary(),
                                true,
                                "voluptatibus",
                                "est",
                                new GraphicOrigin(Guid.NewGuid(),
                                    "sit",
                                    2)),
                        new Graphic(new Extent(-14.2635,
                                    -85.8693,
                                    -16.7538,
                                    -53.8265,
                                    773.5233,
                                    256.2886,
                                    374.7165,
                                    192.1205,
                                new SpatialReference(6,
                                        "perferendis",
                                        "adipisci",
                                        "dolore"),
                                    true,
                                    true),
                            new TextSymbol("ut nam sint",
                                new MapColor(212, 38, 140),
                                new MapColor(103, 60, 83),
                                    new Dimension(142.7022),
                                new MapFont(new Dimension(952.5501),
                                        "Palatino",
                                    MapFontStyle.Oblique,
                                    FontWeight.Bolder,
                                    TextDecoration.Underline),
                                    172.8528,
                                new MapColor(160, 14, 1),
                                new MapColor(21, 143, 155),
                                    765.3601,
                                HorizontalAlignment.Left,
                                    true,
                                    779.3221,
                                    new Dimension(688.4281),
                                    true),
                            new PopupTemplate("earum alias praesentium",
                                    "eum",
                                    ["earum",
                                        "qui"],
                                [new FieldInfo("updatedAt",
                                        "reiciendis",
                                        "porro",
                                    StringFieldOption.RichText,
                                    new FieldInfoFormat(8,
                                            true,
                                        DateFormat.DayShortMonthYearLongTime24),
                                        true,
                                        true,
                                    StatisticType.Count),
                                new FieldInfo("avatar",
                                        "aut",
                                        "repellendus",
                                    StringFieldOption.RichText,
                                    new FieldInfoFormat(7,
                                            true,
                                        DateFormat.ShortDateShortTime24),
                                        true,
                                        true,
                                    StatisticType.Sum)],
                                [new ExpressionPopupContent(new ElementExpressionInfo("var length = Geometry($feature).length; return length;",
                                            "soluta",
                                            "in dolore occaecati"))],
                                [new ExpressionInfo("if ($feature.Age > 21) { return 'Adult'; } else { return 'Minor'; }",
                                        "updatedAt",
                                        "est eveniet aut",
                                        ExpressionInfoReturnType.String)],
                                    true,
                                    true,
                                    [new ActionButton("tenetur impedit fugit",
                                        "https://picsum.photos/640/480/?image=924",
                                        "a616b5d7-0db0-d8aa-39e1-5eefd5530b8c",
                                        () => { Console.WriteLine("atque"); return Task.CompletedTask; },
                                        "password",
                                        true,
                                        true,
                                        true,
                                        "explicabo"),
                                        new ActionButton("aut itaque non",
                                            "https://picsum.photos/640/480/?image=486",
                                            "aac91a12-8a17-68c9-d1d7-66833c615e1f",
                                            () => { Console.WriteLine("sunt"); return Task.CompletedTask; },
                                            "password",
                                            true,
                                            true,
                                            true,
                                            "eius")]),
                                new AttributesDictionary(),
                                true,
                                "corporis",
                                "quasi",
                                new GraphicOrigin(Guid.NewGuid(),
                                    "qui",
                                    1))],
                            77.3049,
                        new Abilities(true,
                                true,
                                true,
                                true,
                                true,
                                true),
                        new GoToOverride(),
                            true,
                            true,
                        new Point(78.4740,
                                17.8253,
                                -30.9083,
                                6.0178,
                                21.8493,
                            new SpatialReference(6,
                                    "doloremque",
                                    "ea",
                                    "neque"),
                                true,
                                true,
                                211.8291),
                            "voluptate",
                            2,
                        new SpatialReference(6,
                                "explicabo",
                                "et",
                                "veniam")))"
                    WidgetId="@("deserunt")">
                    <PopupVisibleElements 
                        CloseButton="@(true)"
                        FeatureNavigation="@(true)"
                        ActionBar="@(true)"
                        CollapseButton="@(true)"
                        FeatureListLayerTitle="@(true)"
                        Heading="@(true)"
                        Spinner="@(true)">
                    </PopupVisibleElements>
                    <Point 
                        Longitude="@(-106.6841)"
                        Latitude="@(68.2430)"
                        X="@(-88.8500)"
                        Y="@(-36.4795)"
                        Z="@(118.7396)"
                        SpatialReference="@(new SpatialReference(2,
                                "quo",
                                "explicabo",
                                "necessitatibus"))"
                        HasM="@(true)"
                        HasZ="@(true)"
                        M="@(632.0033)">
                    </Point>
                    <Graphic 
                        Geometry="@(new Polygon([new MapPath([new MapPoint([314.5951,
                                    622.4725])]),
                                new MapPath([new MapPoint([74.8031]),
                                    new MapPoint([787.8064])])],
                            new SpatialReference(6,
                                    "iusto",
                                    "iste",
                                    "distinctio"),
                            new Point(-22.3642,
                                    89.0301,
                                    -153.0938,
                                    -14.0481,
                                    656.6158,
                                new SpatialReference(1,
                                        "culpa",
                                        "dolores",
                                        "commodi"),
                                    true,
                                    true,
                                    625.4249),
                                true,
                                true,
                                true))"
                        Symbol="@(new TextSymbol("architecto pariatur recusandae",
                            new MapColor(242, 188, 196),
                            new MapColor(149, 148, 208),
                                new Dimension(884.5145),
                            new MapFont(new Dimension(616.6033),
                                    "Bookman",
                                MapFontStyle.Normal,
                                FontWeight.Bolder,
                                TextDecoration.Underline),
                                602.2462,
                            new MapColor(71, 82, 167),
                            new MapColor(152, 19, 83),
                                737.8543,
                            HorizontalAlignment.Right,
                                true,
                                109.8709,
                                new Dimension(521.7583),
                                true))"
                        PopupTemplate="@(new PopupTemplate("nesciunt rerum odit",
                                "sint",
                                ["porro",
                                    "modi"],
                            [new FieldInfo("status",
                                    "facilis",
                                    "rem",
                                StringFieldOption.TextBox,
                                new FieldInfoFormat(9,
                                        true,
                                    DateFormat.LongMonthDayYearShortTime24),
                                    true,
                                    true,
                                StatisticType.Min)],
                            [new AttachmentsPopupContent("sit asperiores et",
                                    "itaque neque",
                                    AttachmentsPopupContentDisplayType.Auto),
                            new TextPopupContent("quo sed qui")],
                            [new ExpressionInfo("return $feature.Population / $feature.Area;",
                                    "updatedAt",
                                    "aliquid architecto corporis",
                                    ExpressionInfoReturnType.String),
                            new ExpressionInfo("return $feature['FieldName'];",
                                    "phone",
                                    "et earum laudantium",
                                    ExpressionInfoReturnType.String)],
                                true,
                                true,
                                [new ActionButton("accusamus ipsa quo",
                                    "https://picsum.photos/640/480/?image=852",
                                    "431f2771-87b5-fdbc-382c-d1dbdc14d533",
                                    () => { Console.WriteLine("temporibus"); return Task.CompletedTask; },
                                    "status",
                                    true,
                                    true,
                                    true,
                                    "quis")]))"
                        Attributes="@(new AttributesDictionary())"
                        Visible="@(true)"
                        LegendLabel="@("adipisci")"
                        AggregateGeometries="@("dolorum")"
                        Origin="@(new GraphicOrigin(Guid.NewGuid(),
                            "est",
                            5))">
                    </Graphic>
                    <PopupDockOptions 
                        Position="@(PopupDockPosition.TopLeft)"
                        ButtonEnabled="@(true)"
                        BreakPoint="@(new BreakPoint(295.9814,
                            148.9533))"
                        BoolBreakpoint="@(true)"
                        PopupDockOptionsBreakpoint="@(new PopupDockOptionsBreakpoint(7,
                                1))">
                    </PopupDockOptions>
                </PopupWidget>
            </MapView>);
        await WaitForMapToRender();
        Assert.IsNotNull(popupWidget!);
        await AssertJavaScript("assertWidgetExists", args: "popup");
        await popupWidget.Blur();
        await popupWidget.Focus();
        var nextMethodResult = await popupWidget.Next();
        Assert.IsNotNull(nextMethodResult);
        await popupWidget.Open(new PopupOpenOptions(true,
                    default,
                    true,
                [new Graphic(new Polyline([new MapPath([new MapPoint([837.6149])])],
                        new SpatialReference(4,
                                "occaecati",
                                "velit",
                                "id"),
                            true,
                            true),
                    new TextSymbol("deleniti et dolores",
                        new MapColor(5, 195, 185),
                        new MapColor(130, 44, 73),
                            new Dimension(25.4781),
                        new MapFont(new Dimension(339.5426),
                                "Courier New",
                            MapFontStyle.Normal,
                            FontWeight.Bold,
                            TextDecoration.None),
                            2.7279,
                        new MapColor(115, 51, 55),
                        new MapColor(59, 230, 192),
                            578.5120,
                        HorizontalAlignment.Right,
                            true,
                            312.8073,
                            new Dimension(47.7517),
                            true),
                    new PopupTemplate("necessitatibus in quos",
                            "eaque",
                            ["quibusdam",
                                "repellat"],
                        [new FieldInfo("email",
                                "hic",
                                "in",
                            StringFieldOption.TextBox,
                            new FieldInfoFormat(9,
                                    true,
                                DateFormat.LongDateShortTime),
                                true,
                                true,
                            StatisticType.Min)],
                        [new FieldsPopupContent([new FieldInfo("updatedAt",
                                    "nihil",
                                    "blanditiis",
                                StringFieldOption.RichText,
                                new FieldInfoFormat(5,
                                        true,
                                    DateFormat.ShortDateLeShortTime24),
                                    true,
                                    true,
                                StatisticType.Min),
                            new FieldInfo("updatedAt",
                                    "commodi",
                                    "asperiores",
                                StringFieldOption.TextArea,
                                new FieldInfoFormat(9,
                                        true,
                                    DateFormat.ShortDate),
                                    true,
                                    true,
                                StatisticType.Sum)],
                                "enim natus nam",
                                "aspernatur occaecati est")],
                        [new ExpressionInfo("return $feature.City + ', ' + $feature.Country;",
                                "name",
                                "voluptas quae ipsum",
                                ExpressionInfoReturnType.String),
                        new ExpressionInfo("var area = Geometry($feature).area; return area;",
                                "name",
                                "autem repudiandae quidem",
                                ExpressionInfoReturnType.String)],
                            true,
                            true,
                            [new ActionButton("et accusantium quas",
                                "https://picsum.photos/640/480/?image=53",
                                "82906b3f-2cb9-1991-f946-93c2c691d0a0",
                                () => { Console.WriteLine("vel"); return Task.CompletedTask; },
                                "status",
                                true,
                                true,
                                true,
                                "exercitationem")]),
                        new AttributesDictionary(),
                        true,
                        "perspiciatis",
                        "perspiciatis",
                        new GraphicOrigin(Guid.NewGuid(),
                            "laborum",
                            3)),
                new Graphic(new Polyline([new MapPath([new MapPoint([657.1224,
                                82.8919]),
                            new MapPoint([147.6233,
                                917.8139])])],
                        new SpatialReference(1,
                                "architecto",
                                "et",
                                "aut"),
                            true,
                            true),
                    new TextSymbol("ab ipsum sed",
                        new MapColor(70, 95, 182),
                        new MapColor(229, 100, 122),
                            new Dimension(844.4114),
                        new MapFont(new Dimension(649.9266),
                                "Georgia",
                            MapFontStyle.Oblique,
                            FontWeight.Normal,
                            TextDecoration.LineThrough),
                            334.1836,
                        new MapColor(138, 105, 84),
                        new MapColor(248, 11, 251),
                            185.9007,
                        HorizontalAlignment.Left,
                            true,
                            671.0094,
                            new Dimension(107.3639),
                            true),
                    new PopupTemplate("eligendi quibusdam enim",
                            "voluptatem",
                            ["at",
                                "in"],
                        [new FieldInfo("title",
                                "temporibus",
                                "vitae",
                            StringFieldOption.RichText,
                            new FieldInfoFormat(1,
                                    true,
                                DateFormat.DayShortMonthYearLongTime24),
                                true,
                                true,
                            StatisticType.Sum),
                        new FieldInfo("createdAt",
                                "et",
                                "deleniti",
                            StringFieldOption.TextBox,
                            new FieldInfoFormat(8,
                                    true,
                                DateFormat.DayShortMonthYearLongTime24),
                                true,
                                true,
                            StatisticType.Min)],
                        [new MediaPopupContent("quae a facilis",
                                "hic aliquam perferendis",
                            [new PieChartMediaInfo("est deleniti ipsum",
                                    "exercitationem",
                                    "et iste expedita",
                                new ChartMediaInfoValue(["pariatur",
                                        "molestias"],
                                        "nostrum",
                                        "mollitia",
                                    [new ChartMediaInfoValueSeries("updatedAt",
                                            "corrupti",
                                            934.1886)],
                                    [new MapColor(49, 212, 220),
                                    new MapColor(46, 108, 104)]))],
                                7)],
                        [new ExpressionInfo("return $feature.Name;",
                                "comment",
                                "est necessitatibus necessitatibus",
                                ExpressionInfoReturnType.String),
                        new ExpressionInfo("var area = Geometry($feature).area; return area;",
                                "email",
                                "rem et deserunt",
                                ExpressionInfoReturnType.String)],
                            true,
                            true,
                            [new ActionButton("dicta incidunt quas",
                                "https://picsum.photos/640/480/?image=640",
                                "f32e7060-92b1-adce-7ada-efe3adb5988e",
                                () => { Console.WriteLine("nobis"); return Task.CompletedTask; },
                                "category",
                                true,
                                true,
                                true,
                                "quibusdam"),
                                new ActionButton("nostrum reprehenderit repellendus",
                                    "https://picsum.photos/640/480/?image=515",
                                    "d0ab89b1-af3e-9c29-c89c-3ad9c6d54686",
                                    () => { Console.WriteLine("doloremque"); return Task.CompletedTask; },
                                    "id",
                                    true,
                                    true,
                                    true,
                                    "accusamus")]),
                        new AttributesDictionary(),
                        true,
                        "nihil",
                        "et",
                        new GraphicOrigin(Guid.NewGuid(),
                            "aperiam",
                            1))],
                    true,
                new Point(-158.0331,
                        -16.4384,
                        -168.3497,
                        46.4765,
                        961.2498,
                    new SpatialReference(8,
                            "eaque",
                            "ea",
                            "esse"),
                        true,
                        true,
                        882.0436),
                    "quos",
                    true,
                    "qui",
                    "autem facere iste",
                    true,
                new PopupWidget([new ActionButton("et velit minus",
                        "https://picsum.photos/640/480/?image=810",
                        "1030d3b5-d8c7-d2b2-01b9-afdf0465f074",
                        () => { Console.WriteLine("placeat"); return Task.CompletedTask; },
                        "updatedAt",
                        true,
                        true,
                        true,
                        "aut"),
                        new ActionButton("blanditiis nesciunt voluptate",
                            "https://picsum.photos/640/480/?image=536",
                            "ebd32fdc-b9be-b100-133f-ab526354aa34",
                            () => { Console.WriteLine("dicta"); return Task.CompletedTask; },
                            "status",
                            true,
                            true,
                            true,
                            "adipisci")],
                        PopupAlignment.TopRight,
                        true,
                        true,
                        true,
                    new PopupDockOptions(PopupDockPosition.Auto,
                            true,
                            new BreakPoint(120.1602,
                                95.4263),
                            true,
                        new PopupDockOptionsBreakpoint(4,
                                6)),
                    [new Graphic(new Polyline([new MapPath([new MapPoint([920.2215,
                                    338.0925])])],
                            new SpatialReference(1,
                                    "enim",
                                    "eum",
                                    "omnis"),
                                true,
                                true),
                        new TextSymbol("veritatis eos consequuntur",
                            new MapColor(1, 73, 250),
                            new MapColor(125, 154, 116),
                                new Dimension(692.1979),
                            new MapFont(new Dimension(127.2340),
                                    "Courier New",
                                MapFontStyle.Normal,
                                FontWeight.Normal,
                                TextDecoration.Underline),
                                581.4592,
                            new MapColor(227, 50, 78),
                            new MapColor(0, 141, 51),
                                976.4362,
                            HorizontalAlignment.Center,
                                true,
                                902.8175,
                                new Dimension(268.2121),
                                true),
                        new PopupTemplate("sit aliquam qui",
                                "atque",
                                ["vel"],
                            [new FieldInfo("email",
                                    "placeat",
                                    "in",
                                StringFieldOption.TextBox,
                                new FieldInfoFormat(1,
                                        true,
                                    DateFormat.Year),
                                    true,
                                    true,
                                StatisticType.Max),
                            new FieldInfo("token",
                                    "distinctio",
                                    "ut",
                                StringFieldOption.TextArea,
                                new FieldInfoFormat(4,
                                        true,
                                    DateFormat.LongMonthDayYearLongTime),
                                    true,
                                    true,
                                StatisticType.Min)],
                            [new FieldsPopupContent([new FieldInfo("phone",
                                        "aut",
                                        "ea",
                                    StringFieldOption.TextArea,
                                    new FieldInfoFormat(6,
                                            true,
                                        DateFormat.DayShortMonthYearLongTime24),
                                        true,
                                        true,
                                    StatisticType.Sum),
                                new FieldInfo("comment",
                                        "est",
                                        "pariatur",
                                    StringFieldOption.TextArea,
                                    new FieldInfoFormat(2,
                                            true,
                                        DateFormat.LongMonthYear),
                                        true,
                                        true,
                                    StatisticType.Count)],
                                    "est veritatis",
                                    "consequatur consequuntur voluptate")],
                            [new ExpressionInfo("return $feature['FieldName'];",
                                    "title",
                                    "natus officiis nesciunt",
                                    ExpressionInfoReturnType.String)],
                                true,
                                true,
                                [new ActionButton("ut quas est",
                                    "https://picsum.photos/640/480/?image=559",
                                    "439b083e-b962-34ab-cc48-de9c1815c200",
                                    () => { Console.WriteLine("labore"); return Task.CompletedTask; },
                                    "updatedAt",
                                    true,
                                    true,
                                    true,
                                    "quibusdam")]),
                            new AttributesDictionary(),
                            true,
                            "suscipit",
                            "ducimus",
                            new GraphicOrigin(Guid.NewGuid(),
                                "voluptatem",
                                6)),
                    new Graphic(new Extent(131.6161,
                                -74.6505,
                                -5.4908,
                                -63.7250,
                                637.6984,
                                313.1293,
                                775.7541,
                                197.5778,
                            new SpatialReference(7,
                                    "ut",
                                    "sint",
                                    "eos"),
                                true,
                                true),
                        new TextSymbol("natus repellat cupiditate",
                            new MapColor(164, 97, 72),
                            new MapColor(150, 198, 166),
                                new Dimension(86.9610),
                            new MapFont(new Dimension(399.4215),
                                    "Arial",
                                MapFontStyle.Oblique,
                                FontWeight.Bold,
                                TextDecoration.LineThrough),
                                823.3530,
                            new MapColor(59, 46, 127),
                            new MapColor(112, 50, 196),
                                633.6922,
                            HorizontalAlignment.Center,
                                true,
                                106.8840,
                                new Dimension(794.1714),
                                true),
                        new PopupTemplate("voluptate sequi vel",
                                "aut",
                                ["et",
                                    "similique"],
                            [new FieldInfo("id",
                                    "voluptas",
                                    "rem",
                                StringFieldOption.RichText,
                                new FieldInfoFormat(9,
                                        true,
                                    DateFormat.ShortMonthYear),
                                    true,
                                    true,
                                StatisticType.Avg),
                            new FieldInfo("phone",
                                    "et",
                                    "nulla",
                                StringFieldOption.RichText,
                                new FieldInfoFormat(2,
                                        true,
                                    DateFormat.LongDateShortTime24),
                                    true,
                                    true,
                                StatisticType.Stddev)],
                            [new ExpressionPopupContent(new ElementExpressionInfo("var area = Geometry($feature).area; return area;",
                                        "est",
                                        "iste voluptates corrupti"))],
                            [new ExpressionInfo("var length = Geometry($feature).length; return length;",
                                    "status",
                                    "dicta veritatis repudiandae",
                                    ExpressionInfoReturnType.String)],
                                true,
                                true,
                                [new ActionButton("vitae maxime ut",
                                    "https://picsum.photos/640/480/?image=214",
                                    "157bbf14-50f1-56b0-4c27-9d6ba05cf277",
                                    () => { Console.WriteLine("cum"); return Task.CompletedTask; },
                                    "title",
                                    true,
                                    true,
                                    true,
                                    "distinctio")]),
                            new AttributesDictionary(),
                            true,
                            "porro",
                            "libero",
                            new GraphicOrigin(Guid.NewGuid(),
                                "molestias",
                                5))],
                    new GoToOverride(),
                        1,
                        true,
                        "voluptate",
                        "occaecati",
                    new Point(58.9001,
                            -62.8114,
                            32.3377,
                            -36.6463,
                            38.3978,
                        new SpatialReference(6,
                                "facere",
                                "quis",
                                "occaecati"),
                            true,
                            true,
                            892.4196),
                        "eos")));
        var previousMethodResult = await popupWidget.Previous();
        Assert.IsNotNull(previousMethodResult);
        await popupWidget.Reposition();
        await popupWidget.TriggerAction(4);
        PopupDockOptions testDockOptions = new PopupDockOptions(PopupDockPosition.Auto,
                    true,
                    new BreakPoint(59.6711,
                        210.8845),
                    true,
                new PopupDockOptionsBreakpoint(2,
                        3));
        await popupWidget.SetDockOptions(testDockOptions);
        var dockOptions = await popupWidget.GetDockOptions();
        Assert.AreEqual(testDockOptions, dockOptions);
        IReadOnlyList<Graphic> testFeatures = [new Graphic(new Polygon([new MapPath([new MapPoint([925.1158]),
                        new MapPoint([159.7494,
                            204.5845])])],
                    new SpatialReference(7,
                            "est",
                            "voluptate",
                            "ducimus"),
                    new Point(120.5216,
                            35.0971,
                            -53.7455,
                            -43.7655,
                            316.4462,
                        new SpatialReference(1,
                                "atque",
                                "vel",
                                "totam"),
                            true,
                            true,
                            819.9879),
                        true,
                        true,
                        true),
                new TextSymbol("omnis repellat nisi",
                    new MapColor(207, 212, 212),
                    new MapColor(119, 252, 31),
                        new Dimension(128.2436),
                    new MapFont(new Dimension(875.7771),
                            "Palatino",
                        MapFontStyle.Italic,
                        FontWeight.Bold,
                        TextDecoration.Underline),
                        723.9251,
                    new MapColor(69, 91, 134),
                    new MapColor(99, 2, 202),
                        590.2297,
                    HorizontalAlignment.Right,
                        true,
                        459.8408,
                        new Dimension(719.8727),
                        true),
                new PopupTemplate("vitae corrupti laudantium",
                        "culpa",
                        ["incidunt"],
                    [new FieldInfo("category",
                            "nisi",
                            "vel",
                        StringFieldOption.TextArea,
                        new FieldInfoFormat(5,
                                true,
                            DateFormat.ShortMonthYear),
                            true,
                            true,
                        StatisticType.Count)],
                    [new TextPopupContent("velit beatae aut"),
                    new FieldsPopupContent([new FieldInfo("id",
                                "voluptates",
                                "et",
                            StringFieldOption.TextArea,
                            new FieldInfoFormat(2,
                                    true,
                                DateFormat.LongDateShortTime24),
                                true,
                                true,
                            StatisticType.Avg),
                        new FieldInfo("status",
                                "modi",
                                "ipsa",
                            StringFieldOption.RichText,
                            new FieldInfoFormat(1,
                                    true,
                                DateFormat.ShortDateShortTime),
                                true,
                                true,
                            StatisticType.Stddev)],
                            "nostrum aut corrupti est",
                            "officiis provident omnis")],
                    [new ExpressionInfo("return Date();",
                            "avatar",
                            "optio beatae ab",
                            ExpressionInfoReturnType.String)],
                        true,
                        true,
                        [new ActionButton("eaque laborum et",
                            "https://picsum.photos/640/480/?image=612",
                            "e03f4cf9-b6f9-a11a-b283-b16470ff2668",
                            () => { Console.WriteLine("iusto"); return Task.CompletedTask; },
                            "createdAt",
                            true,
                            true,
                            true,
                            "sed")]),
                    new AttributesDictionary(),
                    true,
                    "corporis",
                    "dolore",
                    new GraphicOrigin(Guid.NewGuid(),
                        "quod",
                        9))];
        await popupWidget.SetFeatures(testFeatures);
        var features = await popupWidget.GetFeatures();
        Assert.AreEqual(testFeatures, features);
        Point testLocation = new Point(-21.4003,
                    53.7804,
                    131.4498,
                    78.6337,
                    213.0489,
                new SpatialReference(5,
                        "tenetur",
                        "repudiandae",
                        "eum"),
                    true,
                    true,
                    174.8198);
        await popupWidget.SetLocation(testLocation);
        var location = await popupWidget.GetLocation();
        Assert.AreEqual(testLocation, location);
        PopupViewModel testViewModel = new PopupViewModel([new ActionButton("natus ut at",
                    "https://picsum.photos/640/480/?image=103",
                    "04836fc4-228c-ec5c-ec49-80ceb3d96d66",
                    () => { Console.WriteLine("veritatis"); return Task.CompletedTask; },
                    "title",
                    true,
                    true,
                    true,
                    "eligendi"),
                    new ActionButton("voluptates in et",
                        "https://picsum.photos/640/480/?image=819",
                        "8aebb357-c250-1762-49aa-1c43a58de2e0",
                        () => { Console.WriteLine("et"); return Task.CompletedTask; },
                        "comment",
                        true,
                        true,
                        true,
                        "aut")],
                    true,
                    true,
                    true,
                [new Graphic(new Extent(44.5760,
                            -122.1377,
                            -63.6620,
                            -23.9561,
                            917.3842,
                            683.1129,
                            903.6149,
                            505.9794,
                        new SpatialReference(9,
                                "ut",
                                "optio",
                                "suscipit"),
                            true,
                            true),
                    new TextSymbol("repellat ea atque",
                        new MapColor(254, 202, 124),
                        new MapColor(8, 202, 28),
                            new Dimension(510.5830),
                        new MapFont(new Dimension(418.7282),
                                "Verdana",
                            MapFontStyle.Italic,
                            FontWeight.Lighter,
                            TextDecoration.LineThrough),
                            340.2847,
                        new MapColor(194, 188, 177),
                        new MapColor(173, 57, 33),
                            940.2583,
                        HorizontalAlignment.Left,
                            true,
                            444.7962,
                            new Dimension(867.1705),
                            true),
                    new PopupTemplate("aut eum laborum",
                            "sequi",
                            ["libero"],
                        [new FieldInfo("avatar",
                                "ex",
                                "fugiat",
                            StringFieldOption.RichText,
                            new FieldInfoFormat(1,
                                    true,
                                DateFormat.DayShortMonthYear),
                                true,
                                true,
                            StatisticType.Max)],
                        [new AttachmentsPopupContent("nulla quae quisquam",
                                "deleniti quidem consectetur minima",
                                AttachmentsPopupContentDisplayType.Preview),
                        new TextPopupContent("dolor architecto non")],
                        [new ExpressionInfo("return $feature.City + ', ' + $feature.Country;",
                                "comment",
                                "aspernatur sint laboriosam",
                                ExpressionInfoReturnType.String)],
                            true,
                            true,
                            [new ActionButton("rerum aliquam assumenda",
                                "https://picsum.photos/640/480/?image=499",
                                "ec0ae78e-4cdc-3ca9-3dbe-53a0c7fe11ee",
                                () => { Console.WriteLine("molestiae"); return Task.CompletedTask; },
                                "comment",
                                true,
                                true,
                                true,
                                "in")]),
                        new AttributesDictionary(),
                        true,
                        "incidunt",
                        "quisquam",
                        new GraphicOrigin(Guid.NewGuid(),
                            "unde",
                            1))],
                    878.7513,
                new Abilities(true,
                        true,
                        true,
                        true,
                        true,
                        true),
                new GoToOverride(),
                    true,
                    true,
                new Point(17.3359,
                        -61.7179,
                        -72.2992,
                        70.4101,
                        640.2398,
                    new SpatialReference(8,
                            "praesentium",
                            "velit",
                            "non"),
                        true,
                        true,
                        987.3533),
                    "repellat",
                    7,
                new SpatialReference(2,
                        "facere",
                        "optio",
                        "dolores"));
        await popupWidget.SetViewModel(testViewModel);
        var viewModel = await popupWidget.GetViewModel();
        Assert.AreEqual(testViewModel, viewModel);
        PopupVisibleElements testVisibleElements = new PopupVisibleElements(true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true);
        await popupWidget.SetVisibleElements(testVisibleElements);
        var visibleElements = await popupWidget.GetVisibleElements();
        Assert.AreEqual(testVisibleElements, visibleElements);
    }
}
