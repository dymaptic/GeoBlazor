@inherits TestRunnerBase

@{
    base.BuildRenderTree(__builder);
}

@code {

    [TestMethod]
    public async Task TestCanRenderWCSLayer(Action renderHandler)
    {
        WCSLayer? wCSLayer = null;

        AddMapRenderFragment(
            @<MapView class="map-view" OnViewRendered="renderHandler">
                <Map>
                    <Basemap>
                        <BasemapStyle Name="BasemapStyleName.ArcgisTopographic" />
                    </Basemap>
                    <WCSLayer 
                        Url="@("https://landsat2.arcgis.com/arcgis/rest/services/Landsat/MS/ImageServer")"
                        Renderer="@(new RasterStretchRenderer(new AlgorithmicColorRamp(Algorithm.CieLab,
                                new MapColor(92, 193, 88),
                                new MapColor(207, 24, 99)),
                            true,
                            true,
                            [4,
                            1,
                            4],
                            7,
                            3,
                            StretchType.MinMax,
                            [new RasterBandStatistics(274.6012,
                                7,
                                32.7630,
                                241.2588,
                                206.4970,
                                681.9916,
                                422.9237,
                                553.4417),
                            new RasterBandStatistics(827.4107,
                                7,
                                468.3182,
                                710.8621,
                                585.8701,
                                31.8006,
                                397.2038,
                                596.7502),
                            new RasterBandStatistics(810.6326,
                                9,
                                866.7183,
                                181.2725,
                                589.2530,
                                412.3633,
                                886.7201,
                                337.5585)],
                            true,
                            8))"
                        Opacity="@(0.8692)"
                        Title="@("sequi cupiditate autem")"
                        BandIds="@([4,
                            6,
                            2,
                            3])"
                        BlendMode="@(BlendMode.ColorDodge)"
                        Copyright="@("voluptatem")"
                        CoverageId="@("laboriosam")"
                        CoverageInfo="@(new CoverageInfo(["token",
                                "status",
                                "name",
                                "id"],
                            default,
                                "repellendus",
                                "quis voluptates accusamus ullam nostrum sint",
                            new Extent(-113.3687,
                                    -107.9623,
                                    52.4164,
                                    17.1533,
                                    110.4045,
                                    576.6980,
                                    995.2579,
                                    892.5933,
                                new SpatialReference(3,
                                        "qui",
                                        "aut",
                                        "quia"),
                                    true,
                                    true),
                            new RasterInfo(new FeatureSet("phone",
                                        true,
                                    [new Graphic(new Extent(-109.9375,
                                                -32.1442,
                                                -24.2073,
                                                37.7894,
                                                491.1540,
                                                402.5797,
                                                766.7390,
                                                438.2674,
                                            new SpatialReference(5,
                                                    "nulla",
                                                    "quia",
                                                    "dignissimos"),
                                                true,
                                                true),
                                        new TextSymbol("illo autem velit",
                                            new MapColor(144, 129, 132),
                                            new MapColor(13, 185, 133),
                                                new Dimension(468.1446),
                                            new MapFont(new Dimension(561.1276),
                                                    "Courier New",
                                                MapFontStyle.Italic,
                                                FontWeight.Bolder,
                                                TextDecoration.Underline),
                                                873.3768,
                                            new MapColor(116, 191, 107),
                                            new MapColor(17, 3, 77),
                                                33.6870,
                                            HorizontalAlignment.Center,
                                                true,
                                                28.2284,
                                                new Dimension(738.1326),
                                                true),
                                        new PopupTemplate("voluptates et similique",
                                                "dolores",
                                                ["voluptatem",
                                                    "et",
                                                    "voluptatibus"],
                                            [new FieldInfo("token",
                                                    "quas",
                                                    "et",
                                                StringFieldOption.TextArea,
                                                new FieldInfoFormat(5,
                                                        true,
                                                    DateFormat.LongDateShortTime),
                                                    true,
                                                    true,
                                                StatisticType.Avg),
                                            new FieldInfo("email",
                                                    "voluptas",
                                                    "fuga",
                                                StringFieldOption.RichText,
                                                new FieldInfoFormat(3,
                                                        true,
                                                    DateFormat.ShortDateLeLongTime24),
                                                    true,
                                                    true,
                                                StatisticType.Var)],
                                            [new TextPopupContent("est voluptate praesentium"),
                                            new RelationshipPopupContent("voluptatem reprehenderit modi",
                                                    "sapiente ipsam quo velit",
                                                    6,
                                                    "itaque",
                                                [new RelatedRecordsInfoFieldOrder("ut",
                                                    OrderBy.Asc)],
                                                    7),
                                            new MediaPopupContent("itaque voluptatem est",
                                                    "incidunt ea voluptatum quibusdam aut",
                                                [new ImageMediaInfo("voluptate reiciendis quia",
                                                        "sit",
                                                        "ratione qui ratione",
                                                    new ImageMediaInfoValue(),
                                                        569.7326),
                                                new PieChartMediaInfo("tempora distinctio sit",
                                                        "architecto",
                                                        "ut delectus ex",
                                                    new ChartMediaInfoValue())],
                                                    8)],
                                            [new ExpressionInfo("if ($feature.Age > 21) { return 'Adult'; } else { return 'Minor'; }",
                                                    "title",
                                                    "quos ipsum et",
                                                    ExpressionInfoReturnType.String)],
                                                true,
                                                true,
                                            [new ActionButton("odio ducimus est",
                                                    "https://picsum.photos/640/480/?image=506",
                                                    "2795bf6a-8205-54d7-4499-ae19adeac156",
                                                    () => { Console.WriteLine("dolore"); return Task.CompletedTask; },
                                                    "group",
                                                    true,
                                                    true,
                                                    true,
                                                    "eum"),
                                            new ActionButton("asperiores iure est",
                                                    "https://picsum.photos/640/480/?image=938",
                                                    "39ac3e64-e30a-d7b6-0c0c-6669becf22c7",
                                                    () => { Console.WriteLine("dolores"); return Task.CompletedTask; },
                                                    "group",
                                                    true,
                                                    true,
                                                    true,
                                                    "dolorem"),
                                            new ActionToggle("animi rerum quibusdam",
                                                    "7f0bb87e-d49f-038a-e02a-d8d8dd8add5e",
                                                    () => { Console.WriteLine("laudantium"); return Task.CompletedTask; },
                                                    true,
                                                    true,
                                                    true,
                                                    true,
                                                    "updatedAt",
                                                    "quisquam")]),
                                            new AttributesDictionary(),
                                            true,
                                            "nam",
                                            "modi",
                                            new GraphicOrigin(Guid.NewGuid(),
                                                "blanditiis",
                                                7))],
                                    [new Field(default,
                                            "category",
                                            "esse",
                                            "maxime ut minus qui consequatur ut",
                                            4,
                                            true,
                                            true,
                                            new { Value = "ratione" },
                                        FieldValueType.OrderedOrRanked,
                                        new RangeDomain("soluta",
                                                "incidunt",
                                                "updatedAt"))],
                                    GeometryType.Multipoint,
                                    new Polyline([new MapPath([new MapPoint([289.1096,
                                                878.3137,
                                                972.4812,
                                                590.3030]),
                                            new MapPoint([608.9979,
                                                569.4177]),
                                            new MapPoint([732.2777,
                                                749.5714,
                                                878.2218,
                                                961.5352])])],
                                        new SpatialReference(7,
                                                "harum",
                                                "sit",
                                                "quibusdam"),
                                            true,
                                            true),
                                    new SpatialReference(7,
                                            "aut",
                                            "architecto",
                                            "ipsam")),
                                    2,
                                [new RasterBandInfo(848.5984,
                                        340.9594,
                                        "updatedAt",
                                        511.3955,
                                        936.6907,
                                        455.6047,
                                        798.2615,
                                        385.4179),
                                new RasterBandInfo(388.3285,
                                        364.9961,
                                        "title",
                                        45.4301,
                                        557.2517,
                                        778.8423,
                                        341.2821,
                                        898.6637),
                                new RasterBandInfo(496.4742,
                                        34.6323,
                                        "comment",
                                        164.3947,
                                        987.1317,
                                        994.5199,
                                        758.5719,
                                        165.1701),
                                new RasterBandInfo(142.4580,
                                        2.9270,
                                        "title",
                                        219.0593,
                                        727.2197,
                                        852.9788,
                                        813.1925,
                                        975.3636)],
                                    [new ColormapPixel(976.0641,
                                        90.7979,
                                        51.4593,
                                        346.0048),
                                        new ColormapPixel(789.4598,
                                            436.7786,
                                            856.6217,
                                            609.4174)],
                                DataType.VectorDirection,
                                new Extent(174.6431,
                                        81.4848,
                                        -13.2083,
                                        -44.6369,
                                        555.2012,
                                        798.0548,
                                        984.1845,
                                        382.2019,
                                    new SpatialReference(2,
                                            "maxime",
                                            "minus",
                                            "commodi"),
                                        true,
                                        true),
                                    true,
                                    8,
                                    ["voluptatibus",
                                        "nam",
                                        "sunt",
                                        "enim"],
                                    "iure",
                                new RasterMultidimensionalInfo([new RasterMultidimensionalInfoVariables("fuga culpa natus voluptatem deserunt",
                                        [new RasterMultidimensionalInfoVariablesDimensions("natus dignissimos saepe quod reprehenderit reiciendis",
                                                [566.3510,
                                                    757.1987],
                                                true,
                                                355.8163,
                                                "inventore",
                                                "email",
                                                "quia",
                                                [176.5336,
                                                    736.9103,
                                                    549.1656]),
                                        new RasterMultidimensionalInfoVariablesDimensions("qui quo distinctio et",
                                                [464.3226,
                                                    502.1607,
                                                    655.3239,
                                                    54.5148],
                                                true,
                                                100.6045,
                                                "maxime",
                                                "avatar",
                                                "nihil",
                                                [782.8507,
                                                    282.0802,
                                                    263.4774,
                                                    89.1344]),
                                        new RasterMultidimensionalInfoVariablesDimensions("molestiae dignissimos eum corrupti facilis est quae",
                                                [962.4701,
                                                    623.9547,
                                                    119.9409],
                                                true,
                                                932.1009,
                                                "doloremque",
                                                "name",
                                                "reprehenderit",
                                                [364.3802,
                                                    455.1824])],
                                        [new RasterHistogram([699.6471,
                                                927.5595],
                                                [8,
                                                    1,
                                                    3],
                                                536.5621,
                                                500.3261,
                                                1)],
                                            "title",
                                        [new RasterBandStatistics(561.5748,
                                                8,
                                                312.1852,
                                                745.3220,
                                                546.0494,
                                                610.5520,
                                                954.5024,
                                                681.1252)],
                                            "dolorum"),
                                    new RasterMultidimensionalInfoVariables("qui accusantium autem sequi voluptatem",
                                        [new RasterMultidimensionalInfoVariablesDimensions("sit sit nihil autem quo consequatur",
                                                [335.2732,
                                                    385.7571,
                                                    838.1773,
                                                    216.9273],
                                                true,
                                                665.4584,
                                                "voluptatibus",
                                                "comment",
                                                "quaerat",
                                                [346.6360,
                                                    995.1145])],
                                        [new RasterHistogram([214.6981,
                                                647.2807],
                                                [4,
                                                    4],
                                                691.9397,
                                                197.8140,
                                                6),
                                        new RasterHistogram([558.3533,
                                                525.4248],
                                                [3,
                                                    9,
                                                    3],
                                                639.8377,
                                                598.2563,
                                                2),
                                        new RasterHistogram([986.4989,
                                                538.1036],
                                                [1,
                                                    5],
                                                972.8538,
                                                728.9118,
                                                3),
                                        new RasterHistogram([765.5538,
                                                349.3253,
                                                938.2949,
                                                277.7182],
                                                [2,
                                                    8],
                                                835.9163,
                                                820.4233,
                                                3)],
                                            "id",
                                        [new RasterBandStatistics(881.4089,
                                                7,
                                                729.7717,
                                                641.6284,
                                                247.8686,
                                                700.3145,
                                                811.1761,
                                                268.4443),
                                        new RasterBandStatistics(693.5692,
                                                8,
                                                892.4602,
                                                939.1882,
                                                854.5487,
                                                342.5638,
                                                65.2372,
                                                596.4538)],
                                            "sint"),
                                    new RasterMultidimensionalInfoVariables("rem explicabo est laboriosam voluptatum",
                                        [new RasterMultidimensionalInfoVariablesDimensions("esse eos assumenda in et aperiam quae",
                                                [409.9342,
                                                    471.4553],
                                                true,
                                                276.6475,
                                                "ut",
                                                "token",
                                                "iste",
                                                [543.7967,
                                                    835.5627,
                                                    667.6790]),
                                        new RasterMultidimensionalInfoVariablesDimensions("cumque est labore sunt",
                                                [321.5196,
                                                    838.5620],
                                                true,
                                                0.4462,
                                                "laborum",
                                                "password",
                                                "iusto",
                                                [789.2426,
                                                    424.6255,
                                                    117.9519,
                                                    452.4486])],
                                        [new RasterHistogram([575.6870,
                                                567.3146,
                                                918.4235,
                                                127.8170],
                                                [7,
                                                    4,
                                                    7,
                                                    5],
                                                656.3515,
                                                727.3286,
                                                6)],
                                            "updatedAt",
                                        [new RasterBandStatistics(37.9538,
                                                6,
                                                125.6409,
                                                372.5945,
                                                794.2055,
                                                574.0943,
                                                710.5464,
                                                806.0264)],
                                            "labore")]),
                                new RasterInfoPixelSize(150.6836,
                                        25.7383),
                                PixelType.S8,
                                new RasterSensorInfo(new DateTime(2015, 11, 22, 8, 35, 42),
                                        914.0666,
                                        "updatedAt",
                                        271.8530,
                                        157.2801,
                                        "phone",
                                        536.8424,
                                        213.6994)),
                                ["officiis",
                                    "quia",
                                    "corporis",
                                    "facere"],
                            [SupportedInterpolations.Nearest,
                            SupportedInterpolations.Majority],
                                "perspiciatis quaerat corporis",
                                true,
                            CoverageInfoVersion.One_1_2))"
                        Effect="@(new Effect("repellendus",
                            26234173.9860))"
                        FullExtent="@(new Extent(130.3057,
                                -32.2165,
                                -55.2693,
                                52.4748,
                                272.4187,
                                185.4646,
                                631.6191,
                                737.2782,
                            new SpatialReference(1,
                                    "ut",
                                    "debitis",
                                    "et"),
                                true,
                                true))"
                        Interpolation="@(Interpolation.Nearest)"
                        LegendEnabled="@(true)"
                        ListMode="@(ListMode.Hide)"
                        MaxScale="@(45207564.7616)"
                        MinScale="@(11944.3978)"
                        PersistenceEnabled="@(true)"
                        PopupEnabled="@(true)"
                        UseViewTime="@(true)"
                        Version="@("1.2.5.0")">
                        <TimeInterval 
                            Unit="@(TemporalTime.Decades)"
                            Value="@(907.8144)">
                        </TimeInterval>
                        <TimeInfo 
                            StartField="@("deserunt")"
                            EndField="@("ut")"
                            Stops="@([new DateTime(2018, 5, 1, 1, 41, 19),
                                new DateTime(2008, 9, 8, 0, 55, 47)])"
                            TimeZone="@("America/Lima")"
                            TrackIdField="@("nesciunt")">
                            <TimeInterval 
                                Unit="@(TemporalTime.Days)"
                                Value="@(50.3696)">
                            </TimeInterval>
                            <TimeExtent 
                                Start="@(new DateTime(2005, 11, 17, 18, 41, 0))"
                                End="@(new DateTime(2008, 5, 14, 3, 26, 37))">
                            </TimeExtent>
                        </TimeInfo>
                        <TimeExtent 
                            Start="@(new DateTime(2003, 5, 2, 10, 39, 52))"
                            End="@(new DateTime(2019, 11, 8, 22, 54, 12))">
                        </TimeExtent>
                        <Field 
                            Name="@("avatar")"
                            Alias="@("dignissimos")"
                            Description="@("rerum nulla voluptate dolor sit")"
                            Length="@(4)"
                            Editable="@(true)"
                            Nullable="@(true)"
                            DefaultValue="@(new { Value = "tempora" })"
                            ValueType="@(FieldValueType.UniqueIdentifier)"
                            Domain="@(new RangeDomain("omnis",
                                    "sed",
                                    "email"))">
                        </Field>
                        <PortalItem 
                            Access="@(PortalItemAccess.Private)"
                            AccessInformation="@("accusantium")"
                            ApiKey="@("et")"
                            AvgRating="@(272.5558)"
                            Categories="@(["eum",
                                "quod"])"
                            Created="@(new DateTime(2010, 1, 2, 17, 2, 6))"
                            Culture="@("sit")"
                            Description="@("ratione expedita sint a beatae corporis")"
                            Extent="@(new Extent(-56.9035,
                                    -172.3312,
                                    -70.4000,
                                    16.3515,
                                    697.7590,
                                    486.8615,
                                    389.3111,
                                    293.4881,
                                new SpatialReference(5,
                                        "asperiores",
                                        "et",
                                        "fugit"),
                                    true,
                                    true))"
                            GroupCategories="@(["odio",
                                "vel",
                                "laborum",
                                "repellat"])"
                            LicenseInfo="@("ipsam")"
                            Modified="@(new DateTime(2004, 1, 23, 10, 54, 27))"
                            Name="@("comment")"
                            NumComments="@(819.0310)"
                            NumRatings="@(891.3499)"
                            NumViews="@(4.8219)"
                            Owner="@("Dasia Williamson")"
                            OwnerFolder="@("Jaylan Mann")"
                            Portal="@(new Portal(PortalAccess.Private,
                                    true,
                                AuthMode.Immediate,
                                    ["sit",
                                        "aspernatur",
                                        "ipsum",
                                        "a"],
                                    "eum",
                                    "sunt",
                                    "maxime",
                                    true,
                                    true,
                                    true,
                                    true,
                                    true,
                                    true,
                                    true))"
                            PortalItemId="@("sit")"
                            Screenshots="@(["aperiam",
                                "harum",
                                "velit"])"
                            Size="@(4)"
                            Snippet="@("fugit")"
                            Tags="@(["facere",
                                "rerum",
                                "animi"])"
                            Title="@("qui optio sint")"
                            TypeKeywords="@(["pariatur",
                                "autem"])"
                            Url="@("https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/US_National_Parks_Annual_Visitation/FeatureServer/0")">
                        </PortalItem>
                        <PopupTemplate 
                            Title="@("ad autem itaque")"
                            StringContent="@("expedita")"
                            OutFields="@(["animi",
                                "error",
                                "rerum",
                                "perferendis"])"
                            FieldInfos="@([new FieldInfo("id",
                                    "tenetur",
                                    "nihil",
                                StringFieldOption.TextArea,
                                new FieldInfoFormat(2,
                                        true,
                                    DateFormat.LongMonthDayYearLongTime),
                                    true,
                                    true,
                                StatisticType.Stddev),
                            new FieldInfo("password",
                                    "consequatur",
                                    "est",
                                StringFieldOption.RichText,
                                new FieldInfoFormat(9,
                                        true,
                                    DateFormat.ShortDateLeShortTime24),
                                    true,
                                    true,
                                StatisticType.Min),
                            new FieldInfo("group",
                                    "temporibus",
                                    "voluptatum",
                                StringFieldOption.RichText,
                                new FieldInfoFormat(7,
                                        true,
                                    DateFormat.ShortMonthYear),
                                    true,
                                    true,
                                StatisticType.Stddev)])"
                            Content="@([new FieldsPopupContent([new FieldInfo("token",
                                        "rerum",
                                        "minus",
                                    StringFieldOption.TextBox,
                                    new FieldInfoFormat(2,
                                            true,
                                        DateFormat.Year),
                                        true,
                                        true,
                                    StatisticType.Count),
                                new FieldInfo("avatar",
                                        "quia",
                                        "doloremque",
                                    StringFieldOption.RichText,
                                    new FieldInfoFormat(6,
                                            true,
                                        DateFormat.LongMonthDayYearShortTime),
                                        true,
                                        true,
                                    StatisticType.Var)],
                                    "sit odio et neque ut temporibus",
                                    "omnis corporis facilis")])"
                            ExpressionInfos="@([new ExpressionInfo("return $feature.Status == 'Active' ? 'Active' : 'Inactive';",
                                    "avatar",
                                    "hic praesentium dolores",
                                    ExpressionInfoReturnType.String)])"
                            OverwriteActions="@(true)"
                            ReturnGeometry="@(true)"
                            Actions="@([new ActionToggle("mollitia qui magnam",
                                    "ca08595b-1f26-08ec-9fb1-ebe097706273",
                                    () => { Console.WriteLine("voluptas"); return Task.CompletedTask; },
                                    true,
                                    true,
                                    true,
                                    true,
                                    "comment",
                                    "qui")])">
                        </PopupTemplate>
                        <MultidimensionalSubset 
                            AreaOfInterest="@(new Point(47.3762,
                                    -74.3024,
                                    -62.4577,
                                    57.8777,
                                    838.4884,
                                new SpatialReference(8,
                                        "similique",
                                        "et",
                                        "beatae"),
                                    true,
                                    true,
                                    320.6490))">
                            <DimensionalDefinition 
                                DimensionName="@("avatar")"
                                IsSlice="@(true)"
                                VariableName="@("token")"
>
                            </DimensionalDefinition>
                        </MultidimensionalSubset>
                        <DimensionalDefinition 
                            DimensionName="@("status")"
                            IsSlice="@(true)"
                            VariableName="@("phone")"
>
                        </DimensionalDefinition>
                    </WCSLayer>
                </Map>
            </MapView>);
        await WaitForMapToRender();
        Assert.IsNotNull(wCSLayer!);
        await AssertJavaScript("assertLayerExists", args: "wcs");
        var createPopupTemplateMethodResult = await wCSLayer.CreatePopupTemplate(new CreatePopupTemplateOptions(["quae",
                    "ut"],
                    ["group",
                        "phone",
                        "createdAt",
                        "avatar"]));
        Assert.IsNotNull(createPopupTemplateMethodResult);
        var fetchPixelsMethodResult = await wCSLayer.FetchPixels(new Extent(-174.1662,
                    117.7161,
                    32.2971,
                    -88.2244,
                    709.6582,
                    759.2383,
                    1.0304,
                    836.9379,
                new SpatialReference(5,
                        "cum",
                        "eius",
                        "iste"),
                    true,
                    true),
                3,
                5,
            new ImageryTileMixinFetchPixelsOptions(Interpolation.Nearest));
        Assert.IsNotNull(fetchPixelsMethodResult);
        var identifyMethodResult = await wCSLayer.Identify(new Point(-168.4575,
                    43.4687,
                    -18.6253,
                    -27.8209,
                    871.7548,
                new SpatialReference(3,
                        "pariatur",
                        "est",
                        "ut"),
                    true,
                    true,
                    975.4055),
            new RasterIdentifyOptions([new DimensionalDefinition("password",
                        true,
                        "createdAt"),
                new DimensionalDefinition("title",
                        true,
                        "updatedAt"),
                new DimensionalDefinition("id",
                        true,
                        "avatar"),
                new DimensionalDefinition("createdAt",
                        true,
                        "category")],
                    "group"));
        Assert.IsNotNull(identifyMethodResult);
        IReadOnlyList<DimensionalDefinition> testMultidimensionalDefinition = [new DimensionalDefinition("phone",
                    true,
                    "status"),
            new DimensionalDefinition("status",
                    true,
                    "comment"),
            new DimensionalDefinition("category",
                    true,
                    "category")];
        await wCSLayer.SetMultidimensionalDefinition(testMultidimensionalDefinition);
        var multidimensionalDefinition = await wCSLayer.GetMultidimensionalDefinition();
        Assert.AreEqual(testMultidimensionalDefinition, multidimensionalDefinition);
        PortalItem testPortalItem = new PortalItem(PortalItemAccess.Shared,
                    "dolor",
                    "fuga",
                    916.8644,
                    ["tenetur",
                        "repellendus",
                        "iure",
                        "et"],
                    new DateTime(2002, 2, 13, 21, 43, 50),
                    "illum",
                    "minima aut non vel amet",
                new Extent(-168.0457,
                        -39.4263,
                        18.1976,
                        49.0118,
                        481.1031,
                        655.6760,
                        709.2802,
                        513.8726,
                    new SpatialReference(1,
                            "unde",
                            "vel",
                            "sed"),
                        true,
                        true),
                    ["iusto",
                        "at"],
                    "dolores",
                    new DateTime(2018, 1, 7, 16, 10, 33),
                    "phone",
                    92.0435);
        await wCSLayer.SetPortalItem(testPortalItem);
        var portalItem = await wCSLayer.GetPortalItem();
        Assert.AreEqual(testPortalItem, portalItem);
        BlendMode testBlendMode = BlendMode.SourceIn;
        await wCSLayer.SetBlendMode(testBlendMode);
        var blendMode = await wCSLayer.GetBlendMode();
        Assert.AreEqual(testBlendMode, blendMode);
        CoverageInfo testCoverageInfo = new CoverageInfo(["category",
                    "email",
                    "password"],
                default,
                    "id",
                    "reiciendis perferendis quae natus labore eum",
                new Extent(157.6750,
                        14.0252,
                        80.8657,
                        -24.8636,
                        94.8352,
                        366.9636,
                        234.5180,
                        820.9426,
                    new SpatialReference(2,
                            "velit",
                            "voluptas",
                            "aliquid"),
                        true,
                        true),
                new RasterInfo(new FeatureSet("name",
                            true,
                        [new Graphic(new Extent(-37.1501,
                                    -59.1611,
                                    -13.8250,
                                    89.5416,
                                    396.2161,
                                    34.4478,
                                    51.3099,
                                    275.5944,
                                new SpatialReference(5,
                                        "rem",
                                        "commodi",
                                        "harum"),
                                    true,
                                    true),
                            new TextSymbol("eveniet rerum eum",
                                new MapColor(86, 129, 41),
                                new MapColor(112, 175, 189),
                                    new Dimension(799.1307),
                                new MapFont(new Dimension(477.3144),
                                        "Courier New",
                                    MapFontStyle.Italic,
                                    FontWeight.Normal,
                                    TextDecoration.None),
                                    828.9618,
                                new MapColor(123, 136, 55),
                                new MapColor(168, 228, 181),
                                    973.3624,
                                HorizontalAlignment.Left,
                                    true,
                                    882.3084,
                                    new Dimension(8.1494),
                                    true),
                            new PopupTemplate("quis odit dolores",
                                    "incidunt",
                                    ["possimus",
                                        "ut",
                                        "est"],
                                [new FieldInfo("email",
                                        "dolores",
                                        "quo",
                                    StringFieldOption.TextArea,
                                    new FieldInfoFormat(6,
                                            true,
                                        DateFormat.LongMonthDayYear),
                                        true,
                                        true,
                                    StatisticType.Avg),
                                new FieldInfo("password",
                                        "voluptas",
                                        "voluptatem",
                                    StringFieldOption.TextArea,
                                    new FieldInfoFormat(8,
                                            true,
                                        DateFormat.ShortDateShortTime),
                                        true,
                                        true,
                                    StatisticType.Avg),
                                new FieldInfo("password",
                                        "enim",
                                        "vel",
                                    StringFieldOption.TextArea,
                                    new FieldInfoFormat(6,
                                            true,
                                        DateFormat.ShortDateLeShortTime),
                                        true,
                                        true,
                                    StatisticType.Count)],
                                [new ExpressionPopupContent(new ElementExpressionInfo("var x = $feature.X; var y = $feature.Y; return x + ', ' + y;",
                                            "reiciendis",
                                            "quia sunt error"))],
                                [new ExpressionInfo("return $feature.Population / $feature.Area;",
                                        "email",
                                        "mollitia nam velit",
                                        ExpressionInfoReturnType.String),
                                new ExpressionInfo("return $feature['FieldName'];",
                                        "category",
                                        "eum culpa ea",
                                        ExpressionInfoReturnType.String),
                                new ExpressionInfo("if ($feature.Age > 21) { return 'Adult'; } else { return 'Minor'; }",
                                        "avatar",
                                        "voluptas numquam quos",
                                        ExpressionInfoReturnType.String),
                                new ExpressionInfo("if ($feature.Age > 21) { return 'Adult'; } else { return 'Minor'; }",
                                        "name",
                                        "quod porro ea",
                                        ExpressionInfoReturnType.String)],
                                    true,
                                    true,
                                [new ActionButton("accusantium aut nesciunt",
                                        "https://picsum.photos/640/480/?image=161",
                                        "1de3c1d2-d91f-ce79-68c8-14558c563382",
                                        () => { Console.WriteLine("autem"); return Task.CompletedTask; },
                                        "updatedAt",
                                        true,
                                        true,
                                        true,
                                        "veniam"),
                                new ActionButton("voluptatem molestiae sed",
                                        "https://picsum.photos/640/480/?image=81",
                                        "ca2a6a9b-980c-953c-10eb-730af2f3f2ca",
                                        () => { Console.WriteLine("omnis"); return Task.CompletedTask; },
                                        "token",
                                        true,
                                        true,
                                        true,
                                        "repellendus")]),
                                new AttributesDictionary(),
                                true,
                                "magnam",
                                "quam",
                                new GraphicOrigin(Guid.NewGuid(),
                                    "quasi",
                                    1)),
                        new Graphic(new Polygon([new MapPath([new MapPoint([372.7508,
                                        753.9020]),
                                    new MapPoint([815.3318,
                                        626.5475]),
                                    new MapPoint([541.5058,
                                        336.7435,
                                        56.6800]),
                                    new MapPoint([255.2763,
                                        63.6176,
                                        781.5456])]),
                                    new MapPath([new MapPoint([525.7189,
                                            552.3576,
                                            217.6269,
                                            699.9957]),
                                        new MapPoint([964.2191,
                                            287.4646,
                                            76.0847,
                                            699.2982]),
                                        new MapPoint([163.5720,
                                            442.2251,
                                            956.7511,
                                            177.2938])])],
                                new SpatialReference(5,
                                        "fuga",
                                        "temporibus",
                                        "dolore"),
                                new Point(-168.9694,
                                        3.8082,
                                        -160.0718,
                                        61.8235,
                                        11.3847,
                                    new SpatialReference(5,
                                            "commodi",
                                            "quis",
                                            "ea"),
                                        true,
                                        true,
                                        966.2122),
                                    true,
                                    true,
                                    true),
                            new TextSymbol("quos itaque quibusdam",
                                new MapColor(208, 58, 104),
                                new MapColor(45, 37, 56),
                                    new Dimension(5.5374),
                                new MapFont(new Dimension(147.9352),
                                        "Verdana",
                                    MapFontStyle.Italic,
                                    FontWeight.Lighter,
                                    TextDecoration.Underline),
                                    115.6311,
                                new MapColor(52, 226, 179),
                                new MapColor(9, 226, 251),
                                    982.0132,
                                HorizontalAlignment.Right,
                                    true,
                                    132.5411,
                                    new Dimension(530.5952),
                                    true),
                            new PopupTemplate("nihil suscipit harum",
                                    "illum",
                                    ["enim",
                                        "tempora",
                                        "quisquam"],
                                [new FieldInfo("category",
                                        "rerum",
                                        "ratione",
                                    StringFieldOption.TextBox,
                                    new FieldInfoFormat(5,
                                            true,
                                        DateFormat.LongDate),
                                        true,
                                        true,
                                    StatisticType.Stddev),
                                new FieldInfo("title",
                                        "voluptate",
                                        "rerum",
                                    StringFieldOption.TextBox,
                                    new FieldInfoFormat(7,
                                            true,
                                        DateFormat.DayShortMonthYearLongTime),
                                        true,
                                        true,
                                    StatisticType.Var),
                                new FieldInfo("status",
                                        "consectetur",
                                        "aut",
                                    StringFieldOption.RichText,
                                    new FieldInfoFormat(9,
                                            true,
                                        DateFormat.DayShortMonthYearLongTime24),
                                        true,
                                        true,
                                    StatisticType.Sum),
                                new FieldInfo("id",
                                        "qui",
                                        "dolorem",
                                    StringFieldOption.TextArea,
                                    new FieldInfoFormat(7,
                                            true,
                                        DateFormat.DayShortMonthYearShortTime24),
                                        true,
                                        true,
                                    StatisticType.Stddev)],
                                [new FieldsPopupContent([new FieldInfo("email",
                                            "ex",
                                            "magni",
                                        StringFieldOption.RichText,
                                        new FieldInfoFormat(6,
                                                true,
                                            DateFormat.LongDateShortTime),
                                            true,
                                            true,
                                        StatisticType.Max)],
                                        "aut optio omnis impedit ipsum neque nihil",
                                        "quisquam fuga voluptas"),
                                new RelationshipPopupContent("hic autem quis",
                                        "quibusdam nihil error et placeat corrupti",
                                        4,
                                        "unde",
                                    [new RelatedRecordsInfoFieldOrder("voluptas",
                                        OrderBy.Desc)],
                                        9),
                                new RelationshipPopupContent("commodi consequatur blanditiis",
                                        "modi sit vitae dolorem",
                                        3,
                                        "harum",
                                    [new RelatedRecordsInfoFieldOrder("sapiente",
                                        OrderBy.Asc),
                                    new RelatedRecordsInfoFieldOrder("sed",
                                        OrderBy.Desc),
                                    new RelatedRecordsInfoFieldOrder("id",
                                        OrderBy.Desc),
                                    new RelatedRecordsInfoFieldOrder("non",
                                        OrderBy.Asc)],
                                        5)],
                                [new ExpressionInfo("var length = Geometry($feature).length; return length;",
                                        "phone",
                                        "sed hic deserunt",
                                        ExpressionInfoReturnType.String),
                                new ExpressionInfo("return $feature.Name;",
                                        "avatar",
                                        "omnis et sit",
                                        ExpressionInfoReturnType.String)],
                                    true,
                                    true,
                                [new ActionButton("et sint sunt",
                                        "https://picsum.photos/640/480/?image=1035",
                                        "cc37cffe-7524-68c4-f882-c7d198165e25",
                                        () => { Console.WriteLine("ut"); return Task.CompletedTask; },
                                        "updatedAt",
                                        true,
                                        true,
                                        true,
                                        "nobis"),
                                new ActionToggle("fugit voluptas doloremque",
                                        "376d3ef1-28c5-975b-2e6a-0aee5eae5d18",
                                        () => { Console.WriteLine("ut"); return Task.CompletedTask; },
                                        true,
                                        true,
                                        true,
                                        true,
                                        "status",
                                        "in"),
                                new ActionToggle("nostrum aut eius",
                                        "8b00f3fa-f5c4-3b4b-519b-ca3943b9cb0b",
                                        () => { Console.WriteLine("voluptas"); return Task.CompletedTask; },
                                        true,
                                        true,
                                        true,
                                        true,
                                        "avatar",
                                        "qui"),
                                new ActionButton("consequatur possimus voluptate",
                                        "https://picsum.photos/640/480/?image=576",
                                        "f07d27a9-3d9a-9473-4b36-909aa490e89c",
                                        () => { Console.WriteLine("corrupti"); return Task.CompletedTask; },
                                        "token",
                                        true,
                                        true,
                                        true,
                                        "fugit")]),
                                new AttributesDictionary(),
                                true,
                                "velit",
                                "accusamus",
                                new GraphicOrigin(Guid.NewGuid(),
                                    "sed",
                                    3))],
                        [new Field(default,
                                "phone",
                                "ut",
                                "porro perferendis impedit voluptatem in qui",
                                4,
                                true,
                                true,
                                new { Value = "quis" },
                            FieldValueType.OrderedOrRanked,
                            new RangeDomain("est",
                                    "qui",
                                    "createdAt")),
                        new Field(default,
                                "token",
                                "alias",
                                "sint quis non eaque quae debitis",
                                6,
                                true,
                                true,
                                new { Value = "dignissimos" },
                            FieldValueType.LocationOrPlaceName,
                            new InheritedDomain("email"))],
                        GeometryType.Extent,
                        new Point(107.8406,
                                -84.3885,
                                -114.3889,
                                61.8262,
                                516.1769,
                            new SpatialReference(2,
                                    "neque",
                                    "eaque",
                                    "alias"),
                                true,
                                true,
                                503.3375),
                        new SpatialReference(8,
                                "eum",
                                "quia",
                                "a")),
                        1,
                    [new RasterBandInfo(127.4153,
                            349.8213,
                            "category",
                            548.1272,
                            608.8898,
                            870.9633,
                            124.0786,
                            668.6635),
                    new RasterBandInfo(162.4815,
                            369.8292,
                            "password",
                            762.1496,
                            223.1702,
                            149.4035,
                            367.5610,
                            51.8956),
                    new RasterBandInfo(256.6494,
                            371.9488,
                            "name",
                            772.8186,
                            309.5598,
                            921.8824,
                            402.3524,
                            242.5159)],
                        [new ColormapPixel(620.6464,
                            794.7279,
                            592.0049,
                            274.9407),
                            new ColormapPixel(625.9185,
                                688.4926,
                                400.5645,
                                125.3996),
                            new ColormapPixel(425.7141,
                                369.5876,
                                625.9974,
                                761.9158)],
                    DataType.VectorMagnitude,
                    new Extent(141.8340,
                            11.1782,
                            64.3265,
                            -53.9562,
                            774.1872,
                            173.2712,
                            425.7878,
                            434.7607,
                        new SpatialReference(2,
                                "ratione",
                                "qui",
                                "voluptate"),
                            true,
                            true),
                        true,
                        6,
                        ["ex",
                            "blanditiis",
                            "ipsam"],
                        "eveniet",
                    new RasterMultidimensionalInfo([new RasterMultidimensionalInfoVariables("et quasi enim ea",
                            [new RasterMultidimensionalInfoVariablesDimensions("voluptate quam accusamus officia in qui",
                                    [757.6985,
                                        526.0664,
                                        859.8182,
                                        630.4282],
                                    true,
                                    780.8284,
                                    "unde",
                                    "email",
                                    "beatae",
                                    [458.4901,
                                        272.9132,
                                        362.1313,
                                        525.3855]),
                            new RasterMultidimensionalInfoVariablesDimensions("nam qui est ratione perspiciatis",
                                    [21.0322,
                                        896.5926,
                                        979.9537,
                                        678.9316],
                                    true,
                                    962.4723,
                                    "sed",
                                    "createdAt",
                                    "beatae",
                                    [967.5699,
                                        235.7409,
                                        784.5238,
                                        9.9186]),
                            new RasterMultidimensionalInfoVariablesDimensions("dolor quisquam voluptatem culpa ab sit",
                                    [794.3171,
                                        319.3411,
                                        22.4133,
                                        85.4183],
                                    true,
                                    309.0777,
                                    "incidunt",
                                    "avatar",
                                    "nisi",
                                    [953.0678,
                                        59.3904,
                                        459.1254,
                                        417.2656]),
                            new RasterMultidimensionalInfoVariablesDimensions("quae quasi iure nobis quae",
                                    [685.5013,
                                        501.9854],
                                    true,
                                    361.8002,
                                    "aliquam",
                                    "comment",
                                    "voluptatem",
                                    [37.0435,
                                        401.4169,
                                        470.5562])],
                            [new RasterHistogram([94.2929,
                                    267.2751],
                                    [2,
                                        3,
                                        8,
                                        4],
                                    414.5183,
                                    160.2566,
                                    9)],
                                "status",
                            [new RasterBandStatistics(480.0197,
                                    1,
                                    299.3304,
                                    648.3349,
                                    596.4217,
                                    68.2599,
                                    926.0949,
                                    840.0502),
                            new RasterBandStatistics(857.5764,
                                    5,
                                    927.7955,
                                    485.4050,
                                    417.8238,
                                    478.3779,
                                    149.0276,
                                    39.5668),
                            new RasterBandStatistics(71.2366,
                                    1,
                                    343.0911,
                                    210.2851,
                                    968.7384,
                                    271.8360,
                                    714.6520,
                                    452.5108),
                            new RasterBandStatistics(988.6085,
                                    9,
                                    749.0390,
                                    80.6394,
                                    76.2106,
                                    68.0650,
                                    161.7670,
                                    927.0468)],
                                "rem")]),
                    new RasterInfoPixelSize(130.8705,
                            -14.4631),
                    PixelType.U32,
                    new RasterSensorInfo(new DateTime(2008, 5, 26, 13, 29, 56),
                            241.9566,
                            "updatedAt",
                            148.9390,
                            363.9896,
                            "title",
                            690.5928,
                            930.6208)),
                    ["harum",
                        "autem",
                        "esse",
                        "blanditiis"],
                [SupportedInterpolations.Bilinear,
                SupportedInterpolations.Cubic,
                SupportedInterpolations.Majority],
                    "est impedit quia",
                    true,
                CoverageInfoVersion.One_1_1);
        await wCSLayer.SetCoverageInfo(testCoverageInfo);
        var coverageInfo = await wCSLayer.GetCoverageInfo();
        Assert.AreEqual(testCoverageInfo, coverageInfo);
        Extent testFullExtent = new Extent(109.6781,
                    -143.7519,
                    -54.4238,
                    52.9265,
                    223.1464,
                    636.5900,
                    662.1810,
                    333.6310,
                new SpatialReference(5,
                        "excepturi",
                        "non",
                        "ipsa"),
                    true,
                    true);
        await wCSLayer.SetFullExtent(testFullExtent);
        var fullExtent = await wCSLayer.GetFullExtent();
        Assert.AreEqual(testFullExtent, fullExtent);
        Interpolation testInterpolation = Interpolation.Cubic;
        await wCSLayer.SetInterpolation(testInterpolation);
        var interpolation = await wCSLayer.GetInterpolation();
        Assert.AreEqual(testInterpolation, interpolation);
        ListMode testListMode = ListMode.Hide;
        await wCSLayer.SetListMode(testListMode);
        var listMode = await wCSLayer.GetListMode();
        Assert.AreEqual(testListMode, listMode);
        MultidimensionalSubset testMultidimensionalSubset = new MultidimensionalSubset(new Polygon([new MapPath([new MapPoint([91.7023,
                            615.1300,
                            14.6553,
                            985.7609]),
                        new MapPoint([307.9932,
                            84.3947,
                            706.2297]),
                        new MapPoint([344.2982,
                            444.1027,
                            428.3117,
                            868.4797])])],
                    new SpatialReference(6,
                            "odio",
                            "deleniti",
                            "officia"),
                    new Point(160.4819,
                            -4.9485,
                            -82.6127,
                            0.4424,
                            956.8568,
                        new SpatialReference(6,
                                "harum",
                                "nihil",
                                "quae"),
                            true,
                            true,
                            932.6494),
                        true,
                        true,
                        true),
                [new DimensionalDefinition("id",
                        true,
                        "avatar"),
                new DimensionalDefinition("password",
                        true,
                        "name"),
                new DimensionalDefinition("token",
                        true,
                        "id")]);
        await wCSLayer.SetMultidimensionalSubset(testMultidimensionalSubset);
        var multidimensionalSubset = await wCSLayer.GetMultidimensionalSubset();
        Assert.AreEqual(testMultidimensionalSubset, multidimensionalSubset);
        PopupTemplate testPopupTemplate = new PopupTemplate("repellendus in sunt",
                    "et",
                    ["repellendus",
                        "odit",
                        "quidem"],
                [new FieldInfo("name",
                        "occaecati",
                        "ad",
                    StringFieldOption.TextArea,
                    new FieldInfoFormat(7,
                            true,
                        DateFormat.ShortDate),
                        true,
                        true,
                    StatisticType.Max),
                new FieldInfo("email",
                        "ut",
                        "aut",
                    StringFieldOption.TextBox,
                    new FieldInfoFormat(3,
                            true,
                        DateFormat.DayShortMonthYearShortTime),
                        true,
                        true,
                    StatisticType.Sum)],
                [new RelationshipPopupContent("iste iste aut",
                        "voluptatem nemo ratione sed reprehenderit",
                        7,
                        "id",
                    [new RelatedRecordsInfoFieldOrder("alias",
                        OrderBy.Desc)],
                        7),
                new RelationshipPopupContent("ut ab distinctio",
                        "perspiciatis tenetur quis qui voluptates",
                        1,
                        "eaque",
                    [new RelatedRecordsInfoFieldOrder("voluptate",
                        OrderBy.Desc),
                    new RelatedRecordsInfoFieldOrder("corrupti",
                        OrderBy.Desc),
                    new RelatedRecordsInfoFieldOrder("quia",
                        OrderBy.Desc),
                    new RelatedRecordsInfoFieldOrder("quaerat",
                        OrderBy.Desc)],
                        6)],
                [new ExpressionInfo("return $feature['FieldName'];",
                        "title",
                        "quae inventore unde",
                        ExpressionInfoReturnType.String)],
                    true,
                    true,
                [new ActionButton("quidem expedita eligendi",
                        "https://picsum.photos/640/480/?image=975",
                        "110ee6f2-f594-5909-51ad-d0c6f9875af9",
                        () => { Console.WriteLine("vero"); return Task.CompletedTask; },
                        "group",
                        true,
                        true,
                        true,
                        "maxime"),
                new ActionButton("voluptate quidem voluptates",
                        "https://picsum.photos/640/480/?image=72",
                        "86e04c62-4fab-91cb-8546-3a70ba9e57c7",
                        () => { Console.WriteLine("ut"); return Task.CompletedTask; },
                        "updatedAt",
                        true,
                        true,
                        true,
                        "distinctio")]);
        await wCSLayer.SetPopupTemplate(testPopupTemplate);
        var popupTemplate = await wCSLayer.GetPopupTemplate();
        Assert.AreEqual(testPopupTemplate, popupTemplate);
        IReadOnlyList<Field> testRasterFields = [new Field(default,
                    "status",
                    "voluptatem",
                    "est non perspiciatis iste",
                    9,
                    true,
                    true,
                    new { Value = "dolor" },
                FieldValueType.UniqueIdentifier,
                new RangeDomain("adipisci",
                        "enim",
                        "createdAt")),
            new Field(default,
                    "updatedAt",
                    "doloremque",
                    "et sequi aut porro sint voluptate",
                    2,
                    true,
                    true,
                    new { Value = "rerum" },
                FieldValueType.Coordinate,
                new RangeDomain("nemo",
                        "sed",
                        "comment")),
            new Field(default,
                    "comment",
                    "qui",
                    "quo illo inventore at ad",
                    4,
                    true,
                    true,
                    new { Value = "accusantium" },
                FieldValueType.Measurement,
                new RangeDomain("omnis",
                        "veritatis",
                        "category"))];
        await wCSLayer.SetRasterFields(testRasterFields);
        var rasterFields = await wCSLayer.GetRasterFields();
        Assert.AreEqual(testRasterFields, rasterFields);
        TimeExtent testTimeExtent = new TimeExtent(new DateTime(2005, 3, 17, 10, 48, 58),
                    new DateTime(2009, 11, 16, 19, 49, 6));
        await wCSLayer.SetTimeExtent(testTimeExtent);
        var timeExtent = await wCSLayer.GetTimeExtent();
        Assert.AreEqual(testTimeExtent, timeExtent);
        TimeInfo testTimeInfo = new TimeInfo("atque",
                    "ex",
                new TimeExtent(new DateTime(2023, 7, 24, 17, 18, 1),
                        new DateTime(2010, 6, 17, 14, 53, 39)),
                new TimeInterval(TemporalTime.Months,
                        343.0653),
                    [new DateTime(2004, 11, 16, 9, 39, 54),
                        new DateTime(2022, 7, 12, 22, 28, 35),
                        new DateTime(2007, 4, 12, 9, 57, 39),
                        new DateTime(2010, 4, 26, 14, 32, 1)],
                    "Europe/Helsinki",
                    "impedit");
        await wCSLayer.SetTimeInfo(testTimeInfo);
        var timeInfo = await wCSLayer.GetTimeInfo();
        Assert.AreEqual(testTimeInfo, timeInfo);
        TimeInterval testTimeOffset = new TimeInterval(TemporalTime.Months,
                    451.7832);
        await wCSLayer.SetTimeOffset(testTimeOffset);
        var timeOffset = await wCSLayer.GetTimeOffset();
        Assert.AreEqual(testTimeOffset, timeOffset);
        TimeExtent testVisibilityTimeExtent = new TimeExtent(new DateTime(2012, 2, 22, 1, 58, 11),
                    new DateTime(2002, 7, 9, 5, 3, 38));
        await wCSLayer.SetVisibilityTimeExtent(testVisibilityTimeExtent);
        var visibilityTimeExtent = await wCSLayer.GetVisibilityTimeExtent();
        Assert.AreEqual(testVisibilityTimeExtent, visibilityTimeExtent);
    }
}
