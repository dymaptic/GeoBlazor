@inherits TestRunnerBase

@{
    base.BuildRenderTree(__builder);
}

@code {

    [TestMethod]
    public async Task TestCanRenderGeneratedBookmarksWidget(Action renderHandler)
    {
        BookmarksWidget? bookmarksWidget = null;

        BookmarksBookmarkEditEvent? bookmarkEditResult = null;
        void OnBookmarkEdit(BookmarksBookmarkEditEvent result)
        {
            bookmarkEditResult = result;
        }
        BookmarkSelectEvent? bookmarkSelectResult = null;
        void OnBookmarkSelect(BookmarkSelectEvent result)
        {
            bookmarkSelectResult = result;
        }
        AddMapRenderFragment(
            @<MapView class="map-view" OnViewRendered="renderHandler">
                <Map>
                    <Basemap>
                        <BasemapStyle Name="BasemapStyleName.ArcgisTopographic" />
                    </Basemap>
                </Map>
                <BookmarksWidget 
                    Bookmarks="@([new Bookmark("password",
                        new TimeExtent(new DateTime(2016, 3, 3, 20, 7, 52),
                                new DateTime(2001, 9, 15, 5, 2, 49)),
                        new BookmarkThumbnail("https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Parks_and_Open_Space/FeatureServer/0"),
                        new Viewpoint(new Point(34.5695,
                                    -58.4870,
                                    -70.5032,
                                    33.0555,
                                    307.7064,
                                new SpatialReference(5,
                                        "autem",
                                        "et",
                                        "cumque"),
                                    true,
                                    true,
                                    339.5449),
                                47233435.4612,
                                267.0862,
                            new Camera(470.7597,
                                    700.4415,
                                new CameraLayout(848.3345,
                                        526.6449,
                                        694.5445,
                                        987.8017),
                                new Point(60.2791,
                                        -49.8514,
                                        40.0851,
                                        -78.1625,
                                        429.8200,
                                    new SpatialReference(7,
                                            "possimus",
                                            "quo",
                                            "id"),
                                        true,
                                        true,
                                        827.9458),
                                    374.6354))),
                    new Bookmark("name",
                        new TimeExtent(new DateTime(2013, 8, 22, 19, 33, 49),
                                new DateTime(2000, 3, 24, 8, 53, 12)),
                        new BookmarkThumbnail("https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/World_Countries_(Generalized)/FeatureServer/0"),
                        new Viewpoint(new Polyline([new MapPath([new MapPoint([812.7813,
                                        275.1584])])],
                                new SpatialReference(7,
                                        "enim",
                                        "est",
                                        "numquam"),
                                    true,
                                    true),
                                45793203.0113,
                                170.9817,
                            new Camera(488.8205,
                                    13.4445,
                                new CameraLayout(715.2391,
                                        553.8628,
                                        311.9421,
                                        426.3249),
                                new Point(-125.6212,
                                        66.8168,
                                        49.3750,
                                        -51.7750,
                                        230.7604,
                                    new SpatialReference(4,
                                            "et",
                                            "recusandae",
                                            "dolorem"),
                                        true,
                                        true,
                                        74.4503),
                                    837.1468)))])"
                    DefaultCreateOptions="@(new BookmarkOptions(true,
                            true,
                            true,
                            true,
                        new BookmarkOptionsScreenshotSettings(new BookmarkOptionsScreenshotSettingsArea(6,
                                    8,
                                    -88.9451,
                                    12.1566),
                                4,
                            [new KMLLayer("https://earthquake.usgs.gov/fdsnws/event/1/query?format=kml&minmagnitude=5.8",
                                new PortalItem(),
                                BlendMode.Difference,
                                    new Effect("quibusdam",
                                        38808407.6035),
                                new Extent(-79.2494,
                                        -132.1353,
                                        -17.7956,
                                        -64.3898,
                                        326.4441,
                                        656.8955,
                                        225.2572,
                                        67.1262,
                                    new SpatialReference(7,
                                            "consequuntur",
                                            "molestiae",
                                            "beatae"),
                                        true,
                                        true),
                                ListMode.Hide,
                                    30367687.8900,
                                    1902.7869,
                                    0.4914,
                                    true,
                                [new KMLSublayer("esse natus qui soluta",
                                        9,
                                        "facilis",
                                        "doloribus maxime sapiente"),
                                new KMLSublayer("est inventore deleniti",
                                        4,
                                        "voluptatem",
                                        "id aliquid rerum")],
                                    "numquam sed dolorum",
                                new TimeExtent(new DateTime(2016, 4, 2, 18, 51, 40),
                                        new DateTime(2016, 6, 7, 7, 30, 35)))],
                                1),
                            true))"
                    DefaultEditOptions="@(new BookmarkOptions(true,
                            true,
                            true,
                            true,
                        new BookmarkOptionsScreenshotSettings(new BookmarkOptionsScreenshotSettingsArea(2,
                                    6,
                                    -19.8443,
                                    -42.6262),
                                8,
                            [new ElevationLayer("velit",
                                new Extent(111.4308,
                                        -159.4646,
                                        -13.4454,
                                        21.6795,
                                        788.9691,
                                        593.5254,
                                        624.2441,
                                        606.9977,
                                    new SpatialReference(2,
                                            "ex",
                                            "quasi",
                                            "dolorem"),
                                        true,
                                        true),
                                ListMode.Hide,
                                    0.6386,
                                    true,
                                new PortalItem(),
                                new TileInfo(823.5225,
                                        TileInfoFormat.Ps,
                                        true,
                                    [new LOD(7,
                                            "earum",
                                            78.1858,
                                            21142137.7514),
                                    new LOD(6,
                                            "fuga",
                                            85.2714,
                                            7899247.4779)],
                                    new Point(-42.2448,
                                            60.2704,
                                            126.9431,
                                            42.9925,
                                            285.7132,
                                        new SpatialReference(9,
                                                "harum",
                                                "ut",
                                                "non"),
                                            true,
                                            true,
                                            680.2248),
                                        [4,
                                            9],
                                    new SpatialReference(2,
                                            "quia",
                                            "provident",
                                            "ipsam")),
                                    "doloremque id rerum",
                                    "https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/weather_stations_010417/FeatureServer/0",
                                new TimeExtent(new DateTime(2010, 1, 20, 19, 43, 55),
                                        new DateTime(2020, 8, 22, 9, 34, 0)))],
                                4),
                            true))"
                    Disabled="@(true)"
                    DragEnabled="@(true)"
                    FilterPlaceholder="@("quisquam")"
                    FilterText="@("eaque cupiditate impedit")"
                    GoToOverride="@(new GoToOverride())"
                    HeadingLevel="@(4)"
                    Icon="@("voluptatem")"
                    Label="@("dignissimos")"
                    WidgetId="@("ut")"
                    OnBookmarkEdit="OnBookmarkEdit"
                    OnBookmarkSelect="OnBookmarkSelect">
                    <BookmarksVisibleElements 
                        AddBookmarkButton="@(true)"
                        CloseButton="@(true)"
                        CollapseButton="@(true)"
                        EditBookmarkButton="@(true)"
                        Filter="@(true)"
                        Flow="@(true)"
                        Heading="@(true)"
                        Thumbnail="@(true)"
                        Time="@(true)">
                    </BookmarksVisibleElements>
                    <BookmarksViewModel 
                        Bookmarks="@([new Bookmark("title",
                            new TimeExtent(new DateTime(2007, 10, 8, 4, 32, 52),
                                    new DateTime(2015, 8, 11, 20, 27, 16)),
                            new BookmarkThumbnail("https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/IncidentsReport/FeatureServer/0"),
                            new Viewpoint(new Polyline([new MapPath([new MapPoint([330.9490])])],
                                    new SpatialReference(1,
                                            "facilis",
                                            "maiores",
                                            "nesciunt"),
                                        true,
                                        true),
                                    36910552.0517,
                                    308.3556,
                                new Camera(112.1030,
                                        550.3826,
                                    new CameraLayout(254.0435,
                                            859.2038,
                                            466.0341,
                                            970.0902),
                                    new Point(47.7921,
                                            -5.1273,
                                            24.9191,
                                            -86.1982,
                                            361.3999,
                                        new SpatialReference(6,
                                                "accusamus",
                                                "est",
                                                "qui"),
                                            true,
                                            true,
                                            315.1282),
                                        611.9505)))])"
                        Capabilities="@(new BookmarksCapabilities(true))"
                        DefaultCreateOptions="@(new BookmarkOptions(true,
                                true,
                                true,
                                true,
                            new BookmarkOptionsScreenshotSettings(new BookmarkOptionsScreenshotSettingsArea(3,
                                        5,
                                        159.8626,
                                        -3.8615),
                                    8,
                                [new WCSLayer("https://landsat2.arcgis.com/arcgis/rest/services/Landsat/MS/ImageServer",
                                    [new DimensionalDefinition("password",
                                            true,
                                            "status")],
                                        new RasterStretchRenderer(new AlgorithmicColorRamp(Algorithm.LabLch,
                                                new MapColor(188, 42, 198),
                                                new MapColor(234, 55, 112)),
                                            true,
                                            true,
                                            [1],
                                            8,
                                            4,
                                            StretchType.HistogramEqualization,
                                            [new RasterBandStatistics(496.9235,
                                                2,
                                                182.1857,
                                                647.5100,
                                                162.8653,
                                                557.4249,
                                                173.1807,
                                                902.3480),
                                            new RasterBandStatistics(907.6272,
                                                2,
                                                118.4809,
                                                561.0564,
                                                111.0852,
                                                741.9736,
                                                443.7760,
                                                489.7226)],
                                            true,
                                            9),
                                        0.8273,
                                        "delectus consequatur ea",
                                    new PortalItem(),
                                        [1,
                                            3],
                                    BlendMode.SoftLight,
                                        "magnam",
                                        "vitae",
                                    new CoverageInfo(["email",
                                            "createdAt"],
                                        default,
                                            "id",
                                            "vel necessitatibus est hic",
                                        new Extent(-153.0720,
                                                145.9042,
                                                -63.7546,
                                                -89.1143,
                                                692.6894,
                                                668.0765,
                                                695.7180,
                                                30.8525,
                                            new SpatialReference(7,
                                                    "rerum",
                                                    "expedita",
                                                    "molestiae"),
                                                true,
                                                true),
                                        new RasterInfo(new FeatureSet("createdAt",
                                                    true,
                                                [new Graphic(new Point(),
                                                    new TextSymbol("doloribus reiciendis eum"),
                                                    new PopupTemplate("fugit esse vero",
                                                            "nam"),
                                                        null,
                                                        true,
                                                        "libero",
                                                        "numquam")],
                                                [new Field(default,
                                                        "createdAt",
                                                        "velit",
                                                        "et ut corporis ut",
                                                        1,
                                                        true,
                                                        true,
                                                        new { Value = "explicabo" },
                                                    FieldValueType.DateAndTime,
                                                    new CodedValueDomain()),
                                                new Field(default,
                                                        "password",
                                                        "qui",
                                                        "quo officia tempore",
                                                        2,
                                                        true,
                                                        true,
                                                        new { Value = "itaque" },
                                                    FieldValueType.Description,
                                                    new RangeDomain())],
                                                GeometryType.Point,
                                                new Polyline([new MapPath([new MapPoint([972.6998,
                                                            997.0091]),
                                                        new MapPoint([762.6154])]),
                                                        new MapPath([new MapPoint([480.5755,
                                                                614.6432]),
                                                            new MapPoint([787.2350,
                                                                669.4898])])],
                                                    new SpatialReference(),
                                                        true,
                                                        true),
                                                new SpatialReference(5,
                                                        "et",
                                                        "aut",
                                                        "qui")),
                                                1,
                                            [new RasterBandInfo(867.4852,
                                                    315.5494,
                                                    "title",
                                                    968.5564,
                                                    827.5025,
                                                    810.1065,
                                                    959.8645,
                                                    141.2814),
                                            new RasterBandInfo(657.7988,
                                                    885.9209,
                                                    "password",
                                                    420.9504,
                                                    31.1476,
                                                    871.8942,
                                                    764.8546,
                                                    546.7394)],
                                                [new ColormapPixel(921.6336,
                                                    659.1151,
                                                    555.4958,
                                                    705.1968),
                                                    new ColormapPixel(854.9432,
                                                        983.6678,
                                                        405.9910,
                                                        706.0794)],
                                            DataType.Scientific,
                                            new Extent(13.0238,
                                                    139.3994,
                                                    39.3252,
                                                    52.9716,
                                                    311.6168,
                                                    961.2987,
                                                    133.0149,
                                                    558.1472,
                                                new SpatialReference(4,
                                                        "assumenda",
                                                        "ab",
                                                        "deleniti"),
                                                    true,
                                                    true),
                                                true,
                                                6,
                                                ["recusandae",
                                                    "omnis"],
                                                "non",
                                            new RasterMultidimensionalInfo([new RasterMultidimensionalInfoVariables("quo autem accusantium",
                                                    [new RasterMultidimensionalInfoVariablesDimensions(),
                                                    new RasterMultidimensionalInfoVariablesDimensions()],
                                                    [new RasterHistogram()],
                                                        "email",
                                                    [new RasterBandStatistics(),
                                                    new RasterBandStatistics()],
                                                        "dolor")]),
                                            new RasterInfoPixelSize(90.8338,
                                                    18.0226),
                                            PixelType.S8,
                                            new RasterSensorInfo(new DateTime(2011, 5, 27, 21, 8, 41),
                                                    725.8614,
                                                    "category",
                                                    60.8422,
                                                    810.4563,
                                                    "category",
                                                    823.4564,
                                                    742.3208)),
                                            ["ut",
                                                "magni"],
                                        [SupportedInterpolations.Bilinear],
                                            "illo voluptatem non",
                                            true,
                                        CoverageInfoVersion.One_0_0),
                                        default,
                                        new Effect("blanditiis",
                                            3329307.5339),
                                    new Extent(152.5208,
                                            -121.9867,
                                            84.0817,
                                            -48.4964,
                                            836.7488,
                                            527.6979,
                                            537.2854,
                                            973.4383,
                                        new SpatialReference(9,
                                                "aut",
                                                "dolor",
                                                "sequi"),
                                            true,
                                            true)),
                                new GraphicsLayer([new Graphic(new Polygon([new MapPath([new MapPoint([438.7701]),
                                                new MapPoint([802.7864,
                                                    21.7317])]),
                                                new MapPath([new MapPoint([192.5344]),
                                                    new MapPoint([127.8102])])],
                                            new SpatialReference(5,
                                                    "minima",
                                                    "earum",
                                                    "sed"),
                                            new Point(44.2369,
                                                    -56.2151,
                                                    -103.6760,
                                                    -58.5675,
                                                    626.3771,
                                                new SpatialReference(7,
                                                        "aut",
                                                        "aperiam",
                                                        "velit"),
                                                    true,
                                                    true,
                                                    66.9902),
                                                true,
                                                true,
                                                true),
                                        new TextSymbol("libero ratione aut",
                                            new MapColor(133, 236, 96),
                                            new MapColor(24, 133, 89),
                                                new Dimension(337.0033),
                                            new MapFont(new Dimension(473.7139),
                                                    "Helvetica",
                                                MapFontStyle.Normal,
                                                FontWeight.Bold,
                                                TextDecoration.LineThrough),
                                                183.7913,
                                            new MapColor(78, 222, 88),
                                            new MapColor(101, 57, 150),
                                                630.4779,
                                            HorizontalAlignment.Left,
                                                true,
                                                594.6802,
                                                new Dimension(852.4454),
                                                true),
                                        new PopupTemplate("eveniet porro qui",
                                                "iure",
                                                ["quod",
                                                    "facilis"],
                                            [new FieldInfo("createdAt",
                                                    "at",
                                                    "voluptatem",
                                                StringFieldOption.TextArea,
                                                new FieldInfoFormat(4,
                                                        true,
                                                    DateFormat.DayShortMonthYear),
                                                    true,
                                                    true,
                                                StatisticType.Avg)],
                                            [new TextPopupContent("neque architecto voluptatem")],
                                            [new ExpressionInfo("return $feature.Status == 'Active' ? 'Active' : 'Inactive';",
                                                    "comment",
                                                    "dolorum alias et",
                                                    ExpressionInfoReturnType.String)],
                                                true,
                                                true,
                                                [new ActionButton("corporis odio similique",
                                                    "https://picsum.photos/640/480/?image=296",
                                                    "8a1b88f8-6244-7c07-333f-1fcc95b3a3b1",
                                                    () => { Console.WriteLine("dolores"); return Task.CompletedTask; },
                                                    "comment",
                                                    true,
                                                    true,
                                                    true,
                                                    "neque"),
                                                    new ActionButton("commodi sunt neque",
                                                        "https://picsum.photos/640/480/?image=553",
                                                        "cc60c075-525d-b814-243d-89eb4dc728aa",
                                                        () => { Console.WriteLine("mollitia"); return Task.CompletedTask; },
                                                        "id",
                                                        true,
                                                        true,
                                                        true,
                                                        "optio")]),
                                            new AttributesDictionary(),
                                            true,
                                            "nulla",
                                            "quasi",
                                            new GraphicOrigin(Guid.NewGuid(),
                                                "autem",
                                                9))],
                                        "iusto aut ea",
                                        0.7601,
                                        true,
                                    ListMode.Hide,
                                        true,
                                        44251.6563,
                                        23757825.1274,
                                        true,
                                    BlendMode.Reflect,
                                        new Effect("cum",
                                            36556788.2593),
                                    new GraphicsLayerElevationInfo(new GraphicsLayerElevationInfoFeatureExpressionInfo("var area = Geometry($feature).area; return area;",
                                                "quidem deserunt reiciendis"),
                                        ElevationInfoMode.AbsoluteHeight,
                                            937.7839,
                                        ElevationUnit.DecimalDegrees),
                                    new Extent(-83.7475,
                                            -137.2015,
                                            5.2984,
                                            -68.8372,
                                            197.8952,
                                            516.6038,
                                            172.5329,
                                            953.7698,
                                        new SpatialReference(3,
                                                "fuga",
                                                "est",
                                                "adipisci"),
                                            true,
                                            true),
                                    new TimeExtent(new DateTime(2015, 8, 19, 13, 51, 32),
                                            new DateTime(2003, 11, 6, 12, 46, 37)))],
                                    4),
                                true))"
                        DefaultEditOptions="@(new BookmarkOptions(true,
                                true,
                                true,
                                true,
                            new BookmarkOptionsScreenshotSettings(new BookmarkOptionsScreenshotSettingsArea(5,
                                        6,
                                        100.0848,
                                        -19.8224),
                                    6,
                                [new GeoJSONLayer("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson",
                                        "ratione",
                                        "ipsam quia rerum",
                                        0.9633,
                                        true,
                                    ListMode.Hide,
                                    BlendMode.Luminosity,
                                        default,
                                        "ex",
                                        "sed",
                                        true,
                                        new Effect("hic",
                                            45846963.7973),
                                    new GeoJSONLayerElevationInfo(new GeoJSONLayerElevationInfoFeatureExpressionInfo("return $feature.Name;",
                                                "sapiente ut et"),
                                        ElevationInfoMode.OnTheGround,
                                            589.3508,
                                        ElevationUnit.UsFeet),
                                    new FeatureEffect([new Effect("saepe",
                                            20450794.5993)],
                                            true,
                                        new FeatureFilter(822.5565,
                                            new Extent(10.2625,
                                                    -102.1101,
                                                    -78.7953,
                                                    -13.0815,
                                                    650.2550,
                                                    749.6680,
                                                    688.7036,
                                                    797.7948,
                                                new SpatialReference(5,
                                                        "aspernatur",
                                                        "aliquid",
                                                        "hic"),
                                                    true,
                                                    true),
                                                [2],
                                            SpatialRelationship.Contains,
                                            new TimeExtent(new DateTime(2011, 3, 8, 21, 48, 50),
                                                    new DateTime(2019, 9, 1, 1, 45, 6)),
                                                QueryUnits.NauticalMiles,
                                                "Age > 21"),
                                            [new Effect("vel",
                                                5413059.8400)]))],
                                    8),
                                true))"
                        GoToOverride="@(new GoToOverride())">
                    </BookmarksViewModel>
                </BookmarksWidget>
            </MapView>);
        await WaitForMapToRender();
        Assert.IsNotNull(bookmarksWidget!);
        await AssertJavaScript("dispatchEvent", args: [bookmarksWidget!.Id, "bookmark-edit"]);
        await AssertJavaScript("dispatchEvent", args: [bookmarksWidget!.Id, "bookmark-select"]);
        int tries = 100;
        while (tries > 0 &&
            (bookmarkEditResult is null || 
            bookmarkSelectResult is null))
        {
            await Task.Delay(100);
            tries--;
        }
        Assert.IsInstanceOfType<BookmarksBookmarkEditEvent>(bookmarkEditResult);
        Assert.IsInstanceOfType<BookmarkSelectEvent>(bookmarkSelectResult);
        await AssertJavaScript("assertWidgetExists", args: "bookmarks");
        var goToMethodResult = await bookmarksWidget.GoTo(new Bookmark("avatar",
                new TimeExtent(new DateTime(2000, 11, 23, 0, 1, 2),
                        new DateTime(2013, 11, 27, 2, 34, 51)),
                new BookmarkThumbnail("https://sampleserver6.arcgisonline.com/arcgis/rest/services/Hurricanes/MapServer/1"),
                new Viewpoint(new Polygon([new MapPath([new MapPoint([553.7441,
                                478.9604])]),
                            new MapPath([new MapPoint([59.8293]),
                                new MapPoint([985.0077,
                                    263.1298])])],
                        new SpatialReference(4,
                                "libero",
                                "natus",
                                "at"),
                        new Point(-65.6506,
                                6.8343,
                                91.1990,
                                77.6189,
                                149.1133,
                            new SpatialReference(1,
                                    "aut",
                                    "suscipit",
                                    "quos"),
                                true,
                                true,
                                308.2778),
                            true,
                            true,
                            true),
                        17057089.5299,
                        328.8378,
                    new Camera(366.2800,
                            164.2841,
                        new CameraLayout(506.6627,
                                432.8696,
                                343.0364,
                                681.3575),
                        new Point(-169.5380,
                                26.8411,
                                -172.9439,
                                -1.1220,
                                143.2829,
                            new SpatialReference(1,
                                    "explicabo",
                                    "consequatur",
                                    "est"),
                                true,
                                true,
                                834.8752),
                            682.7574))));
        Assert.IsNotNull(goToMethodResult);
        IReadOnlyList<Bookmark> testBookmarks = [new Bookmark("token",
                new TimeExtent(new DateTime(2021, 5, 17, 8, 33, 33),
                        new DateTime(2022, 5, 19, 16, 2, 5)),
                new BookmarkThumbnail("https://services9.arcgis.com/RHVPKKiFTONKtxq3/arcgis/rest/services/NDFD_Precipitation_v1/FeatureServer/0"),
                new Viewpoint(new Point(-159.5341,
                            -41.4535,
                            -113.5858,
                            16.4387,
                            809.5525,
                        new SpatialReference(7,
                                "optio",
                                "ut",
                                "rerum"),
                            true,
                            true,
                            177.7881),
                        5246776.6149,
                        257.8399,
                    new Camera(419.2929,
                            595.6853,
                        new CameraLayout(828.5258,
                                530.1382,
                                208.6374,
                                929.3110),
                        new Point(4.7081,
                                -76.8193,
                                -49.0270,
                                56.7058,
                                196.2636,
                            new SpatialReference(4,
                                    "ut",
                                    "ab",
                                    "exercitationem"),
                                true,
                                true,
                                323.6799),
                            867.4382)))];
        await bookmarksWidget.SetBookmarks(testBookmarks);
        var bookmarks = await bookmarksWidget.GetBookmarks();
        Assert.AreEqual(testBookmarks, bookmarks);
        BookmarkOptions testDefaultCreateOptions = new BookmarkOptions(true,
                    true,
                    true,
                    true,
                new BookmarkOptionsScreenshotSettings(new BookmarkOptionsScreenshotSettingsArea(6,
                            1,
                            -6.4497,
                            -79.9069),
                        2,
                    [new ElevationLayer("quod",
                        new Extent(118.4312,
                                -164.7492,
                                -47.8318,
                                -1.8662,
                                519.2552,
                                610.5243,
                                767.2572,
                                727.1630,
                            new SpatialReference(1,
                                    "quis",
                                    "velit",
                                    "ipsa"),
                                true,
                                true),
                        ListMode.Show,
                            0.5778,
                            true,
                        new PortalItem(),
                        new TileInfo(540.6140,
                                TileInfoFormat.Lerc,
                                true,
                            [new LOD(2,
                                    "aperiam",
                                    9.6422,
                                    17163297.7686)],
                            new Point(-36.8769,
                                    -77.6727,
                                    165.9665,
                                    37.2608,
                                    481.0026,
                                new SpatialReference(8,
                                        "distinctio",
                                        "quia",
                                        "numquam"),
                                    true,
                                    true,
                                    360.3675),
                                [7,
                                    6],
                            new SpatialReference(3,
                                    "repellat",
                                    "praesentium",
                                    "laboriosam")),
                            "ullam qui quam",
                            "https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/IncidentsReport/FeatureServer/0",
                        new TimeExtent(new DateTime(2007, 6, 18, 13, 22, 52),
                                new DateTime(2018, 5, 21, 12, 39, 40))),
                    new MapImageLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer",
                        new PortalItem(),
                        BlendMode.Minus,
                            default,
                            906.5402,
                            new Effect("nam",
                                41322322.2931),
                            "0.4.4.2",
                            MapImageFormat.Pdf,
                            3,
                            5,
                            true,
                            true,
                            34932967.5896,
                            15606.9110,
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                            true)],
                        7),
                    true);
        await bookmarksWidget.SetDefaultCreateOptions(testDefaultCreateOptions);
        var defaultCreateOptions = await bookmarksWidget.GetDefaultCreateOptions();
        Assert.AreEqual(testDefaultCreateOptions, defaultCreateOptions);
        BookmarkOptions testDefaultEditOptions = new BookmarkOptions(true,
                    true,
                    true,
                    true,
                new BookmarkOptionsScreenshotSettings(new BookmarkOptionsScreenshotSettingsArea(2,
                            8,
                            103.6740,
                            -13.9858),
                        8,
                    [new GraphicsLayer([new Graphic(new Point(-122.4776,
                                    -88.7185,
                                    -32.4171,
                                    -66.3503,
                                    592.7073,
                                new SpatialReference(1,
                                        "laudantium",
                                        "qui",
                                        "ab"),
                                    true,
                                    true,
                                    114.2978),
                            new TextSymbol("adipisci et ut",
                                new MapColor(165, 137, 209),
                                new MapColor(65, 112, 202),
                                    new Dimension(554.5268),
                                new MapFont(new Dimension(518.2717),
                                        "Helvetica",
                                    MapFontStyle.Oblique,
                                    FontWeight.Lighter,
                                    TextDecoration.Underline),
                                    88.6239,
                                new MapColor(116, 157, 121),
                                new MapColor(153, 141, 215),
                                    290.6115,
                                HorizontalAlignment.Right,
                                    true,
                                    958.7753,
                                    new Dimension(941.5908),
                                    true),
                            new PopupTemplate("sint dolorum voluptatum",
                                    "beatae",
                                    ["veniam",
                                        "saepe"],
                                [new FieldInfo("createdAt",
                                        "consectetur",
                                        "dolores",
                                    StringFieldOption.TextBox,
                                    new FieldInfoFormat(2,
                                            true,
                                        DateFormat.LongDate),
                                        true,
                                        true,
                                    StatisticType.Stddev)],
                                [new FieldsPopupContent([new FieldInfo("phone",
                                            "amet",
                                            "in",
                                        StringFieldOption.TextBox,
                                        new FieldInfoFormat(2,
                                                true,
                                            DateFormat.LongMonthDayYearShortTime24),
                                            true,
                                            true,
                                        StatisticType.Max)],
                                        "veritatis ad",
                                        "qui odio sit"),
                                new RelationshipPopupContent("ratione ipsum facere",
                                        "reiciendis est",
                                        5,
                                        "consectetur",
                                    [new RelatedRecordsInfoFieldOrder("tempore",
                                        OrderBy.Asc),
                                    new RelatedRecordsInfoFieldOrder("voluptatem",
                                        OrderBy.Desc)],
                                        5)],
                                [new ExpressionInfo("return $feature['FieldName'];",
                                        "avatar",
                                        "repellat excepturi voluptatibus",
                                        ExpressionInfoReturnType.String)],
                                    true,
                                    true,
                                    [new ActionButton("saepe optio eum",
                                        "https://picsum.photos/640/480/?image=376",
                                        "74cb049f-e95c-ba9d-6bbb-b0523a4420cd",
                                        () => { Console.WriteLine("qui"); return Task.CompletedTask; },
                                        "phone",
                                        true,
                                        true,
                                        true,
                                        "neque"),
                                        new ActionButton("laborum nemo rerum",
                                            "https://picsum.photos/640/480/?image=8",
                                            "66a90888-3931-14a2-3ed0-b1de19d887a3",
                                            () => { Console.WriteLine("cupiditate"); return Task.CompletedTask; },
                                            "name",
                                            true,
                                            true,
                                            true,
                                            "velit")]),
                                new AttributesDictionary(),
                                true,
                                "odio",
                                "dolorem",
                                new GraphicOrigin(Guid.NewGuid(),
                                    "excepturi",
                                    6))],
                            "sit dolores enim",
                            0.6625,
                            true,
                        ListMode.Show,
                            true,
                            22722.7813,
                            2935733.5176,
                            true,
                        BlendMode.Multiply,
                            new Effect("libero",
                                20261366.7744),
                        new GraphicsLayerElevationInfo(new GraphicsLayerElevationInfoFeatureExpressionInfo("var area = Geometry($feature).area; return area;",
                                    "voluptatem ad nostrum"),
                            ElevationInfoMode.RelativeToScene,
                                829.3270,
                            ElevationUnit.Meters),
                        new Extent(-71.8791,
                                -98.8919,
                                2.0270,
                                83.9734,
                                475.6131,
                                531.9826,
                                373.8933,
                                959.4532,
                            new SpatialReference(9,
                                    "est",
                                    "non",
                                    "dolores"),
                                true,
                                true),
                        new TimeExtent(new DateTime(2004, 9, 1, 7, 31, 40),
                                new DateTime(2009, 4, 6, 12, 52, 6))),
                    new TileLayer("nihil",
                        BlendMode.SoftLight,
                            "sunt",
                            default,
                            new Effect("beatae",
                                32032422.7159),
                        new Extent(-17.1685,
                                -65.9927,
                                59.0931,
                                52.2332,
                                958.3683,
                                873.1883,
                                872.2480,
                                538.5018,
                            new SpatialReference(3,
                                    "impedit",
                                    "in",
                                    "aut"),
                                true,
                                true),
                            true,
                        ListMode.Hide,
                            29562988.8259,
                            48781.9941,
                            0.7843,
                            true,
                        new PortalItem(),
                            410.8202)],
                        7),
                    true);
        await bookmarksWidget.SetDefaultEditOptions(testDefaultEditOptions);
        var defaultEditOptions = await bookmarksWidget.GetDefaultEditOptions();
        Assert.AreEqual(testDefaultEditOptions, defaultEditOptions);
        GoToOverride testGoToOverride = new GoToOverride();
        await bookmarksWidget.SetGoToOverride(testGoToOverride);
        var goToOverride = await bookmarksWidget.GetGoToOverride();
        Assert.AreEqual(testGoToOverride, goToOverride);
        BookmarksViewModel testViewModel = new BookmarksViewModel([new Bookmark("createdAt",
                    new TimeExtent(new DateTime(2017, 6, 13, 7, 48, 16),
                            new DateTime(2019, 8, 18, 14, 53, 42)),
                    new BookmarkThumbnail("https://sampleserver6.arcgisonline.com/arcgis/rest/services/Hurricanes/MapServer/1"),
                    new Viewpoint(new Polygon([new MapPath([new MapPoint([778.3459]),
                                new MapPoint([729.6744,
                                    414.3322])])],
                            new SpatialReference(8,
                                    "quae",
                                    "perspiciatis",
                                    "perferendis"),
                            new Point(69.4852,
                                    23.1312,
                                    158.3208,
                                    -11.4841,
                                    519.7433,
                                new SpatialReference(9,
                                        "laudantium",
                                        "ut",
                                        "ut"),
                                    true,
                                    true,
                                    662.6068),
                                true,
                                true,
                                true),
                            8769809.5776,
                            95.9618,
                        new Camera(332.5908,
                                464.6213,
                            new CameraLayout(500.0321,
                                    498.5419,
                                    883.2993,
                                    748.5136),
                            new Point(146.0770,
                                    -10.3840,
                                    -13.6246,
                                    -49.0278,
                                    37.8869,
                                new SpatialReference(8,
                                        "minus",
                                        "deserunt",
                                        "magni"),
                                    true,
                                    true,
                                    401.1508),
                                517.5843)))],
                new BookmarksCapabilities(true),
                new BookmarkOptions(true,
                        true,
                        true,
                        true,
                    new BookmarkOptionsScreenshotSettings(new BookmarkOptionsScreenshotSettingsArea(9,
                                1,
                                143.6625,
                                -16.3631),
                            2,
                        [new KMLLayer("https://earthquake.usgs.gov/fdsnws/event/1/query?format=kml&minmagnitude=5.8",
                            new PortalItem(),
                            BlendMode.SoftLight,
                                new Effect("et",
                                    21415478.2506),
                            new Extent(21.1353,
                                    49.5796,
                                    25.0820,
                                    62.5024,
                                    410.6903,
                                    95.7498,
                                    965.6166,
                                    112.7313,
                                new SpatialReference(8,
                                        "et",
                                        "magni",
                                        "cum"),
                                    true,
                                    true),
                            ListMode.Hide,
                                37700218.9698,
                                9875.0601,
                                0.8008,
                                true,
                            [new KMLSublayer("iusto ut at quam",
                                    7,
                                    "quis",
                                    "laudantium eum quibusdam"),
                            new KMLSublayer("quod reiciendis",
                                    1,
                                    "iure",
                                    "et pariatur id")],
                                "ducimus libero delectus",
                            new TimeExtent(new DateTime(2014, 7, 21, 22, 39, 33),
                                    new DateTime(2020, 1, 21, 1, 20, 37))),
                        new CSVLayer("https://developers.arcgis.com/javascript/latest//sample-code/layers-csv/live/earthquakes.csv",
                                "est qui quas",
                                "illum",
                                0.4779,
                                true,
                            ListMode.Hide,
                            BlendMode.Average,
                            new PopupTemplate("eum aut ea",
                                    "perferendis",
                                    ["at",
                                        "necessitatibus"],
                                [new FieldInfo("token",
                                        "est",
                                        "ut",
                                    StringFieldOption.TextBox,
                                    new FieldInfoFormat(8,
                                            true,
                                        DateFormat.LongMonthDayYear),
                                        true,
                                        true,
                                    StatisticType.Min)],
                                [new FieldsPopupContent([new FieldInfo("phone",
                                            "sed",
                                            "magnam",
                                        StringFieldOption.RichText,
                                        new FieldInfoFormat(1,
                                                true,
                                            DateFormat.DayShortMonthYearLongTime),
                                            true,
                                            true,
                                        StatisticType.Max),
                                    new FieldInfo("category",
                                            "nulla",
                                            "doloremque",
                                        StringFieldOption.TextBox,
                                        new FieldInfoFormat(8,
                                                true,
                                            DateFormat.DayShortMonthYear),
                                            true,
                                            true,
                                        StatisticType.Min)],
                                        "quas quia nulla voluptas",
                                        "quidem iure et")],
                                [new ExpressionInfo("if ($feature.Age > 21) { return 'Adult'; } else { return 'Minor'; }",
                                        "category",
                                        "quisquam expedita vitae",
                                        ExpressionInfoReturnType.String)],
                                    true,
                                    true,
                                    [new ActionButton("alias voluptas a",
                                        "https://picsum.photos/640/480/?image=471",
                                        "3d7f486e-a6e6-a67c-c5ce-035115ecb589",
                                        () => { Console.WriteLine("aspernatur"); return Task.CompletedTask; },
                                        "avatar",
                                        true,
                                        true,
                                        true,
                                        "sed")]),
                                default,
                                "numquam",
                                CSVDelimiter.Comma,
                                "nam",
                                new Effect("sit",
                                    22601369.7470),
                            new CSVLayerElevationInfo(new CSVLayerElevationInfoFeatureExpressionInfo("return Date();",
                                        "aut odio rerum"),
                                ElevationInfoMode.RelativeToGround,
                                    74.8885,
                                ElevationUnit.Inches))],
                            5),
                        true),
                new BookmarkOptions(true,
                        true,
                        true,
                        true,
                    new BookmarkOptionsScreenshotSettings(new BookmarkOptionsScreenshotSettingsArea(2,
                                4,
                                -124.6585,
                                86.9256),
                            4,
                        [new TileLayer("debitis",
                            BlendMode.Hue,
                                "incidunt",
                                default,
                                new Effect("at",
                                    35729397.0281),
                            new Extent(20.1048,
                                    179.5019,
                                    -27.0534,
                                    -33.1463,
                                    820.1945,
                                    209.3557,
                                    278.7670,
                                    688.7450,
                                new SpatialReference(6,
                                        "placeat",
                                        "quaerat",
                                        "necessitatibus"),
                                    true,
                                    true),
                                true,
                            ListMode.Show,
                                16325157.7209,
                                30549.0156,
                                0.2556,
                                true,
                            new PortalItem(),
                                961.6902)],
                            8),
                        true),
                new GoToOverride());
        await bookmarksWidget.SetViewModel(testViewModel);
        var viewModel = await bookmarksWidget.GetViewModel();
        Assert.AreEqual(testViewModel, viewModel);
        BookmarksVisibleElements testVisibleElements = new BookmarksVisibleElements(true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true);
        await bookmarksWidget.SetVisibleElements(testVisibleElements);
        var visibleElements = await bookmarksWidget.GetVisibleElements();
        Assert.AreEqual(testVisibleElements, visibleElements);
    }
}
