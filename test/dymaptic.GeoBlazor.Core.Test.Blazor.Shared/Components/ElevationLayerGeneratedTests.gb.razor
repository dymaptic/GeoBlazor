@inherits TestRunnerBase

@{
    base.BuildRenderTree(__builder);
}

@code {

    [TestMethod]
    public async Task TestCanRenderElevationLayer(Action renderHandler)
    {
        ElevationLayer? elevationLayer = null;

        AddMapRenderFragment(
            @<MapView class="map-view" OnViewRendered="renderHandler">
                <Map>
                    <Basemap>
                        <BasemapStyle Name="BasemapStyleName.ArcgisTopographic" />
                    </Basemap>
                    <ElevationLayer 
                        Copyright="@("quas")"
                        FullExtent="@(new Extent(150.6424,
                                -69.5825,
                                -67.7853,
                                -80.6353,
                                732.3498,
                                618.0952,
                                270.0176,
                                53.3943,
                            new SpatialReference(7,
                                    "iste",
                                    "nihil",
                                    "possimus"),
                                true,
                                true))"
                        ListMode="@(ListMode.Hide)"
                        Opacity="@(0.3054)"
                        PersistenceEnabled="@(true)"
                        Title="@("eveniet laborum deleniti")"
                        Url="@("https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trailheads/FeatureServer/0")">
                        <TimeExtent 
                            Start="@(new DateTime(2008, 8, 7, 3, 51, 49))"
                            End="@(new DateTime(2006, 10, 5, 1, 47, 50))">
                        </TimeExtent>
                        <TileInfo 
                            Dpi="@(779.4549)"
                            Format="@(TileInfoFormat.Mixed)"
                            IsWrappable="@(true)"
                            Lods="@([new LOD(2,
                                    "qui",
                                    33.9085,
                                    42906461.9682),
                            new LOD(2,
                                    "labore",
                                    94.8948,
                                    31036340.7881),
                            new LOD(7,
                                    "consequatur",
                                    59.9889,
                                    49262514.8316),
                            new LOD(5,
                                    "corporis",
                                    64.4754,
                                    44506559.9641)])"
                            Origin="@(new Point(-3.1135,
                                    61.8322,
                                    -97.3923,
                                    -51.0171,
                                    107.3390,
                                new SpatialReference(3,
                                        "adipisci",
                                        "saepe",
                                        "corrupti"),
                                    true,
                                    true,
                                    511.8168))"
                            Size="@([5,
                                6,
                                5,
                                4])"
                            SpatialReference="@(new SpatialReference(2,
                                    "et",
                                    "magnam",
                                    "quasi"))">
                        </TileInfo>
                    </ElevationLayer>
                </Map>
            </MapView>);
        await WaitForMapToRender();
        Assert.IsNotNull(elevationLayer!);
        await AssertJavaScript("assertLayerExists", args: "elevation");
        var createElevationSamplerMethodResult = await elevationLayer.CreateElevationSampler(new Extent(-147.2579,
                    118.1194,
                    78.2538,
                    24.9114,
                    813.9063,
                    500.2765,
                    440.2174,
                    547.4028,
                new SpatialReference(2,
                        "est",
                        "fugiat",
                        "ut"),
                    true,
                    true),
            new ElevationLayerCreateElevationSamplerOptions("sed",
                    652.8528));
        Assert.IsNotNull(createElevationSamplerMethodResult);
        var fetchTileMethodResult = await elevationLayer.FetchTile(553.7098,
                719.7175,
                604.3945,
            new ElevationLayerFetchTileOptions(432.1175));
        Assert.IsNotNull(fetchTileMethodResult);
        var getTileUrlMethodResult = await elevationLayer.GetTileUrl(156.3829,
                389.1628,
                274.1693);
        Assert.IsNotNull(getTileUrlMethodResult);
        var queryElevationMethodResult = await elevationLayer.QueryElevation(new Point(-170.6876,
                    -7.9918,
                    141.4822,
                    85.6187,
                    642.5244,
                new SpatialReference(1,
                        "repellendus",
                        "sunt",
                        "tempora"),
                    true,
                    true,
                    545.4589),
            new ElevationLayerQueryElevationOptions("quia",
                    373.9272,
                    true));
        Assert.IsNotNull(queryElevationMethodResult);
        Extent testFullExtent = new Extent(137.7661,
                    167.1248,
                    43.2233,
                    27.4784,
                    613.2475,
                    72.4207,
                    296.4290,
                    788.0557,
                new SpatialReference(5,
                        "tempora",
                        "qui",
                        "earum"),
                    true,
                    true);
        await elevationLayer.SetFullExtent(testFullExtent);
        var fullExtent = await elevationLayer.GetFullExtent();
        Assert.AreEqual(testFullExtent, fullExtent);
        ListMode testListMode = ListMode.Show;
        await elevationLayer.SetListMode(testListMode);
        var listMode = await elevationLayer.GetListMode();
        Assert.AreEqual(testListMode, listMode);
        PortalItem testPortalItem = new PortalItem(PortalItemAccess.Shared,
                    "sunt",
                    "id",
                    208.0237,
                    ["molestias",
                        "aut",
                        "et",
                        "incidunt"],
                    new DateTime(2011, 4, 8, 9, 17, 25),
                    "provident",
                    "voluptas nihil sed nisi dolorum nisi exercitationem",
                new Extent(35.3566,
                        -37.2271,
                        84.5421,
                        -30.6269,
                        74.3595,
                        734.2573,
                        156.7568,
                        876.2529,
                    new SpatialReference(9,
                            "minima",
                            "quae",
                            "qui"),
                        true,
                        true),
                    ["rerum",
                        "eaque",
                        "modi",
                        "enim"],
                    "repellendus",
                    new DateTime(2003, 10, 26, 22, 17, 27),
                    "group",
                    30.5503);
        await elevationLayer.SetPortalItem(testPortalItem);
        var portalItem = await elevationLayer.GetPortalItem();
        Assert.AreEqual(testPortalItem, portalItem);
        TileInfo testTileInfo = new TileInfo(695.0077,
                    TileInfoFormat.Mixed,
                    true,
                [new LOD(8,
                        "ad",
                        16.4988,
                        33739047.5066)],
                new Point(-94.0816,
                        -82.3995,
                        154.0494,
                        -3.9808,
                        565.5992,
                    new SpatialReference(9,
                            "perspiciatis",
                            "id",
                            "tenetur"),
                        true,
                        true,
                        38.1189),
                    [5,
                        8,
                        2],
                new SpatialReference(6,
                        "sed",
                        "velit",
                        "dolores"));
        await elevationLayer.SetTileInfo(testTileInfo);
        var tileInfo = await elevationLayer.GetTileInfo();
        Assert.AreEqual(testTileInfo, tileInfo);
        TimeExtent testVisibilityTimeExtent = new TimeExtent(new DateTime(2011, 7, 27, 4, 41, 36),
                    new DateTime(2007, 5, 4, 9, 13, 10));
        await elevationLayer.SetVisibilityTimeExtent(testVisibilityTimeExtent);
        var visibilityTimeExtent = await elevationLayer.GetVisibilityTimeExtent();
        Assert.AreEqual(testVisibilityTimeExtent, visibilityTimeExtent);
    }
}
