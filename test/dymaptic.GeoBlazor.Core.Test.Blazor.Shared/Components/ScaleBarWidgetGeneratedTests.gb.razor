@inherits TestRunnerBase

@{
    base.BuildRenderTree(__builder);
}

@code {

    [TestMethod]
    public async Task TestCanRenderGeneratedScaleBarWidget(Action renderHandler)
    {
        ScaleBarWidget? scaleBarWidget = null;

        AddMapRenderFragment(
            @<MapView class="map-view" OnViewRendered="renderHandler">
                <Map>
                    <Basemap>
                        <BasemapStyle Name="BasemapStyleName.ArcgisTopographic" />
                    </Basemap>
                </Map>
                <ScaleBarWidget 
                    Icon="@("dolor")"
                    Label="@("laboriosam")"
                    Style="@(ScaleBarWidgetStyle.Ruler)"
                    Unit="@(ScaleUnit.NonMetric)"
                    WidgetId="@("amet")">
                    <ScaleBarViewModel />
                </ScaleBarWidget>
            </MapView>);
        await WaitForMapToRender();
        Assert.IsNotNull(scaleBarWidget!);
        await AssertJavaScript("assertWidgetExists", args: "scale-bar");
        ScaleBarWidgetStyle testStyle = ScaleBarWidgetStyle.Ruler;
        await scaleBarWidget.SetStyle(testStyle);
        var style = await scaleBarWidget.GetStyle();
        Assert.AreEqual(testStyle, style);
        ScaleBarViewModel testViewModel = new ScaleBarViewModel();
        await scaleBarWidget.SetViewModel(testViewModel);
        var viewModel = await scaleBarWidget.GetViewModel();
        Assert.AreEqual(testViewModel, viewModel);
    }
}
