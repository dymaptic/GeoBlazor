@inherits TestRunnerBase

@{
    base.BuildRenderTree(__builder);
}

@code {

    [TestMethod]
    public async Task TestCanRenderGeneratedLegendWidget(Action renderHandler)
    {
        LegendWidget? legendWidget = null;

        AddMapRenderFragment(
            @<MapView class="map-view" OnViewRendered="renderHandler">
                <Map>
                    <Basemap>
                        <BasemapStyle Name="BasemapStyleName.ArcgisTopographic" />
                    </Basemap>
                </Map>
                <LegendWidget 
                    BasemapLegendVisible="@(true)"
                    HeadingLevel="@(975.1602)"
                    HideLayersNotInCurrentView="@(true)"
                    Icon="@("animi")"
                    Label="@("distinctio")"
                    RespectLayerDefinitionExpression="@(true)"
                    RespectLayerVisibility="@(true)"
                    WidgetId="@("amet")">
                    <LegendViewModel 
                        BasemapLegendVisible="@(true)"
                        HideLayersNotInCurrentView="@(true)"
                        LayerInfos="@([new LegendViewModelLayerInfos(new BaseTileLayer(BlendMode.SourceOut,
                                    new Effect("hic",
                                        15797274.6868),
                                    10417209.1577,
                                    22243.2575,
                                    260.0474,
                                new SpatialReference(1,
                                        "velit",
                                        "debitis",
                                        "illum"),
                                new Extent(134.0492,
                                        154.0787,
                                        75.7113,
                                        -49.5156,
                                        593.5807,
                                        609.8075,
                                        821.7178,
                                        626.9429,
                                    new SpatialReference(9,
                                            "expedita",
                                            "dolorum",
                                            "sit"),
                                        true,
                                        true),
                                ListMode.Show,
                                    0.8315,
                                    true,
                                new TileInfo(32.2565,
                                        TileInfoFormat.Svgz,
                                        true,
                                    [new LOD(6,
                                            "ut",
                                            16.4950,
                                            14716588.0978)],
                                    new Point(32.4505,
                                            61.3554,
                                            46.4782,
                                            -18.2618,
                                            277.5162,
                                        new SpatialReference(7,
                                                "neque",
                                                "harum",
                                                "maiores"),
                                            true,
                                            true,
                                            881.8803),
                                        [4,
                                            8],
                                    new SpatialReference(9,
                                            "mollitia",
                                            "in",
                                            "dolore")),
                                    "non deserunt nihil",
                                new TimeExtent(new DateTime(2019, 6, 20, 3, 30, 36),
                                        new DateTime(2006, 6, 10, 14, 58, 3))),
                                "neque consequatur ipsam"),
                        new LegendViewModelLayerInfos(new ElevationLayer("neque",
                                new Extent(-163.6552,
                                        -89.2626,
                                        71.7268,
                                        -19.3166,
                                        934.6264,
                                        116.0812,
                                        781.2703,
                                        647.4413,
                                    new SpatialReference(6,
                                            "eligendi",
                                            "itaque",
                                            "hic"),
                                        true,
                                        true),
                                ListMode.Hide,
                                    0.5722,
                                    true,
                                new PortalItem(),
                                new TileInfo(533.5033,
                                        TileInfoFormat.Png32,
                                        true,
                                    [new LOD(8,
                                            "consequuntur",
                                            98.2701,
                                            30345115.3359),
                                    new LOD(9,
                                            "animi",
                                            31.5929,
                                            44519073.0015)],
                                    new Point(-149.9962,
                                            54.0604,
                                            -69.8598,
                                            85.5009,
                                            578.7282,
                                        new SpatialReference(6,
                                                "sint",
                                                "eum",
                                                "est"),
                                            true,
                                            true,
                                            101.7280),
                                        [2],
                                    new SpatialReference(5,
                                            "sit",
                                            "tempora",
                                            "sit")),
                                    "repudiandae omnis cum",
                                    "https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trailheads/FeatureServer/0",
                                new TimeExtent(new DateTime(2021, 1, 23, 18, 24, 22),
                                        new DateTime(2012, 8, 1, 13, 36, 50))),
                                "earum omnis dicta")])"
                        RespectLayerVisibility="@(true)">
                        <ActiveLayerInfo 
                            HideLayersNotInCurrentView="@(true)"
                            IsScaleDriven="@(true)"
                            Layer="@(new BingMapsLayer("quia",
                                    BingImageryStyle.Road,
                                BlendMode.SourceOut,
                                    new Effect("odio",
                                        23592415.6473),
                                    5912328.2097,
                                    41377.9795,
                                    961.0178,
                                new SpatialReference(6,
                                        "sed",
                                        "amet",
                                        "et"),
                                    default,
                                new Extent(70.4244,
                                        139.4424,
                                        10.8142,
                                        47.9642,
                                        646.3622,
                                        235.5394,
                                        499.6523,
                                        428.0700,
                                    new SpatialReference(7,
                                            "aspernatur",
                                            "numquam",
                                            "sint"),
                                        true,
                                        true),
                                ListMode.Hide,
                                    0.6205,
                                    true,
                                    "eius"))"
                            LayerView="@(new FeatureLayerView(new LayerView(),
                                    new AbortManager(default,
                                        new JsModuleManager()),
                                new FeatureEffect([new Effect("dolores",
                                        23552259.0519)],
                                        true,
                                    new FeatureFilter(472.0508,
                                        new Polyline([new MapPath([new MapPoint([94.6260,
                                                    911.1400]),
                                                new MapPoint([479.8894,
                                                    15.1550])])],
                                            new SpatialReference(7,
                                                    "rerum",
                                                    "nobis",
                                                    "quaerat"),
                                                true,
                                                true),
                                            [8],
                                        SpatialRelationship.Overlaps,
                                        new TimeExtent(new DateTime(2004, 11, 22, 10, 33, 8),
                                                new DateTime(2009, 9, 12, 18, 35, 32)),
                                            QueryUnits.Feet,
                                            "Province = 'Ontario'"),
                                        [new Effect("iure",
                                            11165318.2163)]),
                                new FeatureFilter(514.3997,
                                    new Polyline([new MapPath([new MapPoint([985.1753,
                                                961.4501]),
                                            new MapPoint([634.7501])]),
                                            new MapPath([new MapPoint([141.7289,
                                                    283.2240])])],
                                        new SpatialReference(5,
                                                "placeat",
                                                "sed",
                                                "sit"),
                                            true,
                                            true),
                                        [2,
                                            5],
                                    SpatialRelationship.Overlaps,
                                    new TimeExtent(new DateTime(2016, 10, 20, 0, 26, 6),
                                            new DateTime(2004, 8, 15, 11, 29, 24)),
                                        QueryUnits.UsNauticalMiles,
                                        "Street = '123 Main St.'"),
                                new HighlightOptions(new MapColor(84, 82, 120),
                                    new MapColor(31, 32, 241),
                                        913.2788,
                                        231.9851,
                                    new MapColor(195, 173, 202),
                                        881.7233,
                                        126.6754),
                                    570.1729,
                                    true))"
                            LegendElements="@([default])"
                            Ready="@(true)"
                            RespectLayerVisibility="@(true)"
                            Scale="@(37885662.3898)"
                            SublayerIds="@([7])"
                            Title="@("adipisci a repellendus")"
                            Version="@(386.3204)">
                        </ActiveLayerInfo>
                    </LegendViewModel>
                    <LayerInfo 
                        GeometryType="@(GeometryType.Polygon)"
                        LayerInfoId="@(7)"
                        Name="@("name")"
                        Url="@("https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/IncidentsReport/FeatureServer/0")">
                    </LayerInfo>
                    <ActiveLayerInfo 
                        HideLayersNotInCurrentView="@(true)"
                        IsScaleDriven="@(true)"
                        Layer="@(new ElevationLayer("et",
                            new Extent(82.8377,
                                    -100.9302,
                                    70.2970,
                                    52.8571,
                                    623.5625,
                                    485.5576,
                                    589.2950,
                                    408.0872,
                                new SpatialReference(6,
                                        "praesentium",
                                        "nihil",
                                        "qui"),
                                    true,
                                    true),
                            ListMode.Show,
                                0.8861,
                                true,
                            new PortalItem(),
                            new TileInfo(95.8923,
                                    TileInfoFormat.Ps,
                                    true,
                                [new LOD(2,
                                        "praesentium",
                                        90.8843,
                                        6439163.4523),
                                new LOD(3,
                                        "assumenda",
                                        80.8311,
                                        25184354.1346)],
                                new Point(-9.5193,
                                        29.3419,
                                        -13.6228,
                                        60.4102,
                                        190.8758,
                                    new SpatialReference(6,
                                            "qui",
                                            "et",
                                            "laudantium"),
                                        true,
                                        true,
                                        855.1557),
                                    [4,
                                        7],
                                new SpatialReference(5,
                                        "et",
                                        "qui",
                                        "qui")),
                                "dolor nam odio",
                                "https://services3.arcgis.com/GVgbJbqm8hXASVYi/arcgis/rest/services/Trails/FeatureServer/0",
                            new TimeExtent(new DateTime(2010, 6, 14, 10, 12, 33),
                                    new DateTime(2020, 8, 4, 7, 23, 6))))"
                        LayerView="@(new LayerView())"
                        LegendElements="@([default])"
                        Ready="@(true)"
                        RespectLayerVisibility="@(true)"
                        Scale="@(48438133.5404)"
                        SublayerIds="@([4])"
                        Title="@("voluptas necessitatibus et")"
                        Version="@(628.7706)">
                    </ActiveLayerInfo>
                </LegendWidget>
            </MapView>);
        await WaitForMapToRender();
        Assert.IsNotNull(legendWidget!);
        await AssertJavaScript("assertWidgetExists", args: "legend");
        IReadOnlyList<ActiveLayerInfo> testActiveLayerInfos = [new ActiveLayerInfo(true,
                    true,
                new ImageryLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/NLCDLandCover2001/ImageServer",
                    new PortalItem(),
                        new RasterStretchRenderer(new AlgorithmicColorRamp(Algorithm.CieLab,
                                new MapColor(84, 189, 73),
                                new MapColor(35, 176, 121)),
                            true,
                            true,
                            [9],
                            2,
                            5,
                            StretchType.None,
                            [new RasterBandStatistics(364.4259,
                                8,
                                720.2758,
                                523.9025,
                                540.0647,
                                574.6673,
                                720.3921,
                                388.8275)],
                            true,
                            9),
                        [4,
                            2],
                    BlendMode.SourceIn,
                        645.5995,
                        853.6731,
                        "eius",
                        "tenetur",
                        new Effect("qui",
                            3632234.8415),
                    ImageFormat.Png32,
                        true,
                        9,
                        2,
                    null,
                    null,
                    null,
                    null,
                    null,
                    null,
                    null,
                    null,
                    null,
                    null,
                    null,
                    null,
                    new TileInfo(397.2039,
                            TileInfoFormat.Ps,
                            true,
                        [new LOD(7,
                                "debitis",
                                85.9133,
                                43819002.6639),
                        new LOD(7,
                                "libero",
                                75.0205,
                                44269168.3083)],
                        new Point(172.9012,
                                -81.1898,
                                -133.9040,
                                30.5651,
                                527.9396,
                            new SpatialReference(7,
                                    "maiores",
                                    "explicabo",
                                    "quis"),
                                true,
                                true,
                                548.6283),
                            [4],
                        new SpatialReference(9,
                                "natus",
                                "quis",
                                "architecto")),
                    null,
                    null,
                    null,
                    null,
                    null,
                    null,
                        true),
                new LayerView(),
                [default],
                    true,
                    true,
                    40973526.1482,
                    [8],
                    "nesciunt provident ipsum",
                    36.0179),
            new ActiveLayerInfo(true,
                    true,
                new WCSLayer("https://landsat2.arcgis.com/arcgis/rest/services/Landsat8_Views/ImageServer",
                    [new DimensionalDefinition("category",
                            true,
                            "status"),
                    new DimensionalDefinition("avatar",
                            true,
                            "title")],
                        new RasterStretchRenderer(new AlgorithmicColorRamp(Algorithm.CieLab,
                                new MapColor(219, 230, 56),
                                new MapColor(95, 187, 188)),
                            true,
                            true,
                            [5,
                            2],
                            1,
                            2,
                            StretchType.None,
                            [new RasterBandStatistics(509.7794,
                                3,
                                827.0827,
                                356.9674,
                                848.6151,
                                663.3674,
                                904.0890,
                                491.6320)],
                            true,
                            9),
                        0.3535,
                        "ipsa aspernatur laudantium",
                    new PortalItem(),
                        [5,
                            3],
                    BlendMode.Color,
                        "et",
                        "atque",
                    new CoverageInfo(["email",
                            "title"],
                        default,
                            "blanditiis",
                            "sapiente ex dolores",
                        new Extent(86.4784,
                                92.6886,
                                39.7391,
                                47.6830,
                                245.0901,
                                374.5740,
                                539.8614,
                                49.1128,
                            new SpatialReference(8,
                                    "vel",
                                    "et",
                                    "architecto"),
                                true,
                                true),
                        new RasterInfo(new FeatureSet("name",
                                    true,
                                [new Graphic(new Point(36.3083,
                                            -74.6931,
                                            10.1129,
                                            -60.8622,
                                            965.7590,
                                        new SpatialReference(6,
                                                "soluta",
                                                "suscipit",
                                                "et"),
                                            true,
                                            true,
                                            304.0176),
                                    new TextSymbol("qui qui aut",
                                        new MapColor(178, 8, 170),
                                        new MapColor(23, 189, 94),
                                            new Dimension(496.1690),
                                        new MapFont(new Dimension(577.7231),
                                                "Verdana",
                                            MapFontStyle.Oblique,
                                            FontWeight.Bold,
                                            TextDecoration.LineThrough),
                                            211.5051,
                                        new MapColor(240, 238, 21),
                                        new MapColor(132, 221, 205),
                                            932.9807,
                                        HorizontalAlignment.Center,
                                            true,
                                            981.6306,
                                            new Dimension(700.3265),
                                            true),
                                    new PopupTemplate("neque nobis incidunt",
                                            "ea",
                                            ["officiis"],
                                        [new FieldInfo("phone",
                                                "praesentium",
                                                "sed",
                                            StringFieldOption.TextBox,
                                            new FieldInfoFormat(1,
                                                    true,
                                                DateFormat.Year),
                                                true,
                                                true,
                                            StatisticType.Count),
                                        new FieldInfo("status",
                                                "eos",
                                                "nihil",
                                            StringFieldOption.TextBox,
                                            new FieldInfoFormat(8,
                                                    true,
                                                DateFormat.LongDateShortTime24),
                                                true,
                                                true,
                                            StatisticType.Sum)],
                                        [new MediaPopupContent("autem ea omnis",
                                                "id est magni ab",
                                            [new LineChartMediaInfo("culpa repellat est",
                                                    "deleniti",
                                                    "tempora voluptatem possimus",
                                                new ChartMediaInfoValue(["assumenda"],
                                                        "error",
                                                        "ad",
                                                    [new ChartMediaInfoValueSeries()],
                                                    [new MapColor(151, 37, 233),
                                                    new MapColor(227, 3, 75)]))],
                                                3),
                                        new TextPopupContent("ut suscipit nemo")],
                                        [new ExpressionInfo("return $feature.Status == 'Active' ? 'Active' : 'Inactive';",
                                                "id",
                                                "placeat nihil et",
                                                ExpressionInfoReturnType.String),
                                        new ExpressionInfo("var length = Geometry($feature).length; return length;",
                                                "email",
                                                "rerum molestiae qui",
                                                ExpressionInfoReturnType.String)],
                                            true,
                                            true,
                                            [new ActionButton("amet earum praesentium",
                                                "https://picsum.photos/640/480/?image=135",
                                                "3892ad72-5cd2-5544-3e29-b77a1cad1138",
                                                () => { Console.WriteLine("nihil"); return Task.CompletedTask; },
                                                "avatar",
                                                true,
                                                true,
                                                true,
                                                "quos")]),
                                        new AttributesDictionary(),
                                        true,
                                        "ut",
                                        "est",
                                        new GraphicOrigin(Guid.NewGuid(),
                                            "in",
                                            2))],
                                [new Field(default,
                                        "updatedAt",
                                        "dolor",
                                        "ut autem aut repellendus",
                                        3,
                                        true,
                                        true,
                                        new { Value = "eligendi" },
                                    FieldValueType.None,
                                    new RangeDomain("officiis",
                                            "unde",
                                            "avatar")),
                                new Field(default,
                                        "avatar",
                                        "iusto",
                                        "provident aliquid",
                                        4,
                                        true,
                                        true,
                                        new { Value = "voluptatem" },
                                    FieldValueType.TypeOrCategory,
                                    new InheritedDomain("email"))],
                                GeometryType.Mesh,
                                new Point(165.0395,
                                        -36.7666,
                                        73.0663,
                                        51.7645,
                                        181.8009,
                                    new SpatialReference(5,
                                            "deleniti",
                                            "eum",
                                            "molestiae"),
                                        true,
                                        true,
                                        241.7785),
                                new SpatialReference(3,
                                        "et",
                                        "fuga",
                                        "sequi")),
                                9,
                            [new RasterBandInfo(49.3700,
                                    875.0347,
                                    "updatedAt",
                                    358.3539,
                                    454.6974,
                                    815.2675,
                                    927.5158,
                                    745.3645)],
                                [new ColormapPixel(145.7811,
                                    239.7865,
                                    926.3075,
                                    150.4663),
                                    new ColormapPixel(198.0235,
                                        443.6205,
                                        367.5484,
                                        223.2295)],
                            DataType.VectorMagdir,
                            new Extent(144.5321,
                                    24.9323,
                                    -33.9664,
                                    35.0200,
                                    363.4215,
                                    59.1474,
                                    305.1447,
                                    692.9329,
                                new SpatialReference(7,
                                        "maxime",
                                        "saepe",
                                        "et"),
                                    true,
                                    true),
                                true,
                                7,
                                ["dolores",
                                    "et"],
                                "ex",
                            new RasterMultidimensionalInfo([new RasterMultidimensionalInfoVariables("pariatur veritatis",
                                    [new RasterMultidimensionalInfoVariablesDimensions("velit natus excepturi accusamus",
                                            [334.3703],
                                            true,
                                            77.2525,
                                            "neque",
                                            "title",
                                            "vitae",
                                            [622.2972]),
                                    new RasterMultidimensionalInfoVariablesDimensions("voluptatem omnis in eius",
                                            [737.5551,
                                                181.1521],
                                            true,
                                            566.0723,
                                            "aut",
                                            "name",
                                            "quos",
                                            [215.3828,
                                                391.7439])],
                                    [new RasterHistogram([2.9784,
                                            205.4111],
                                            [7],
                                            917.0790,
                                            112.9207,
                                            5)],
                                        "title",
                                    [new RasterBandStatistics(306.1699,
                                            7,
                                            773.8481,
                                            45.6328,
                                            779.6833,
                                            180.1320,
                                            220.2667,
                                            657.8239),
                                    new RasterBandStatistics(771.5637,
                                            2,
                                            6.2413,
                                            298.5646,
                                            179.0369,
                                            443.6144,
                                            436.4789,
                                            566.1044)],
                                        "nemo")]),
                            new RasterInfoPixelSize(-140.4076,
                                    13.9743),
                            PixelType.F64,
                            new RasterSensorInfo(new DateTime(2008, 3, 19, 5, 23, 51),
                                    923.0414,
                                    "createdAt",
                                    428.4338,
                                    593.6598,
                                    "title",
                                    937.7355,
                                    178.2264)),
                            ["ut"],
                        [SupportedInterpolations.Nearest,
                        SupportedInterpolations.Nearest],
                            "nihil doloribus ab",
                            true,
                        CoverageInfoVersion.One_0_0),
                        default,
                        new Effect("sed",
                            34332459.6825),
                    new Extent(140.7908,
                            -105.2957,
                            6.5468,
                            -44.7100,
                            317.5307,
                            834.7324,
                            26.3592,
                            167.2259,
                        new SpatialReference(2,
                                "eum",
                                "voluptas",
                                "et"),
                            true,
                            true)),
                new FeatureLayerView(new LayerView(),
                        new AbortManager(default,
                            new JsModuleManager()),
                    new FeatureEffect([new Effect("laboriosam",
                            28918479.7873)],
                            true,
                        new FeatureFilter(849.0708,
                            new Polygon([new MapPath([new MapPoint([924.5101,
                                        651.1284]),
                                    new MapPoint([593.1778])])],
                                new SpatialReference(8,
                                        "delectus",
                                        "quod",
                                        "quas"),
                                new Point(41.2784,
                                        -1.4575,
                                        94.8163,
                                        -39.1205,
                                        579.2926,
                                    new SpatialReference(6,
                                            "maxime",
                                            "sunt",
                                            "aut"),
                                        true,
                                        true,
                                        560.8568),
                                    true,
                                    true,
                                    true),
                                [9],
                            SpatialRelationship.Relation,
                            new TimeExtent(new DateTime(2013, 9, 22, 0, 17, 46),
                                    new DateTime(2011, 7, 2, 5, 17, 20)),
                                QueryUnits.Meters,
                                "Province = 'Ontario'"),
                            [new Effect("suscipit",
                                23260054.7954),
                                new Effect("sunt",
                                    40301636.3738)]),
                    new FeatureFilter(531.6126,
                        new Polyline([new MapPath([new MapPoint([199.8934])]),
                                new MapPath([new MapPoint([582.6270,
                                        131.7895]),
                                    new MapPoint([247.7748,
                                        362.5341])])],
                            new SpatialReference(5,
                                    "animi",
                                    "doloribus",
                                    "tempore"),
                                true,
                                true),
                            [9],
                        SpatialRelationship.Touches,
                        new TimeExtent(new DateTime(2023, 9, 4, 16, 37, 1),
                                new DateTime(2021, 8, 1, 14, 38, 12)),
                            QueryUnits.UsNauticalMiles,
                            "Name = 'John Doe'"),
                    new HighlightOptions(new MapColor(180, 79, 83),
                        new MapColor(233, 209, 201),
                            654.8453,
                            872.0819,
                        new MapColor(9, 127, 202),
                            23.8122,
                            434.3409),
                        520.8660,
                        true),
                [default,
                default],
                    true,
                    true,
                    26735239.4812,
                    [7,
                        4],
                    "aut porro autem",
                    814.3985)];
        await legendWidget.SetActiveLayerInfos(testActiveLayerInfos);
        var activeLayerInfos = await legendWidget.GetActiveLayerInfos();
        Assert.AreEqual(testActiveLayerInfos, activeLayerInfos);
        LegendViewModel testViewModel = new LegendViewModel([new ActiveLayerInfo(true,
                        true,
                    new ImageryTileLayer("https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",
                        new PortalItem(),
                            new RasterStretchRenderer(new AlgorithmicColorRamp(Algorithm.LabLch,
                                    new MapColor(141, 78, 128),
                                    new MapColor(166, 137, 27)),
                                true,
                                true,
                                [1],
                                1,
                                2,
                                StretchType.None,
                                [new RasterBandStatistics(812.6722,
                                    5,
                                    550.1206,
                                    698.8663,
                                    217.7588,
                                    809.3905,
                                    237.5570,
                                    318.2689),
                                new RasterBandStatistics(826.4157,
                                    6,
                                    261.5221,
                                    539.3779,
                                    377.0539,
                                    949.8421,
                                    883.8707,
                                    132.2286)],
                                true,
                                1),
                            [4],
                        BlendMode.Average,
                            "illo",
                            new Effect("ut",
                                38087367.3395),
                            PixelInterpolation.Bilinear,
                            true,
                        ListMode.Hide,
                            44930327.6862,
                            30469.2520,
                        [new DimensionalDefinition("name",
                                true,
                                "email"),
                        new DimensionalDefinition("token",
                                true,
                                "title")],
                        new MultidimensionalSubset(new Polygon([new MapPath([new MapPoint([323.2798]),
                                    new MapPoint([457.1824])])],
                                new SpatialReference(6,
                                        "est",
                                        "ut",
                                        "voluptas"),
                                new Point(158.4308,
                                        72.3786,
                                        -40.9903,
                                        -58.1520,
                                        231.4193,
                                    new SpatialReference(6,
                                            "sit",
                                            "minus",
                                            "impedit"),
                                        true,
                                        true,
                                        517.3577),
                                    true,
                                    true,
                                    true),
                            [new DimensionalDefinition("name",
                                    true,
                                    "phone"),
                            new DimensionalDefinition("id",
                                    true,
                                    "category")])),
                    new LayerView(),
                    [default,
                    default],
                        true,
                        true,
                        44357112.9754,
                        [5,
                            4],
                        "incidunt corrupti consequatur",
                        789.3709),
                new ActiveLayerInfo(true,
                        true,
                    new MapImageLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer",
                        new PortalItem(),
                        BlendMode.DestinationOver,
                            default,
                            108.6207,
                            new Effect("adipisci",
                                11033076.7165),
                            "3.5.7.7",
                            MapImageFormat.Pdf,
                            3,
                            9,
                            true,
                            true,
                            43601487.2780,
                            3849.5472,
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                            true),
                    new LayerView(),
                    [default,
                    default],
                        true,
                        true,
                        44831114.4405,
                        [1],
                        "atque molestiae maxime",
                        51.2909)],
                    true,
                    true,
                [new LegendViewModelLayerInfos(new KMLLayer("https://earthquake.usgs.gov/fdsnws/event/1/query?format=kml&minmagnitude=5.8",
                        new PortalItem(),
                        BlendMode.Reflect,
                            new Effect("et",
                                11029746.4960),
                        new Extent(-139.0798,
                                -42.6338,
                                21.3006,
                                69.6508,
                                366.7924,
                                415.2481,
                                400.6779,
                                489.3474,
                            new SpatialReference(5,
                                    "aspernatur",
                                    "aperiam",
                                    "ab"),
                                true,
                                true),
                        ListMode.Hide,
                            46471875.9361,
                            9929.0079,
                            0.9551,
                            true,
                        [new KMLSublayer("quia placeat hic",
                                4,
                                "adipisci",
                                "sapiente iure deleniti")],
                            "consequuntur consequatur vel",
                        new TimeExtent(new DateTime(2018, 1, 17, 12, 6, 10),
                                new DateTime(2000, 2, 1, 22, 42, 4))),
                        "fugiat quas eligendi"),
                new LegendViewModelLayerInfos(new KMLLayer("https://earthquake.usgs.gov/fdsnws/event/1/query?format=kml&minmagnitude=5.8",
                        new PortalItem(),
                        BlendMode.Xor,
                            new Effect("quam",
                                11773711.6653),
                        new Extent(63.5071,
                                20.5925,
                                -12.5549,
                                11.2667,
                                108.1206,
                                205.1934,
                                267.9513,
                                585.4584,
                            new SpatialReference(5,
                                    "eius",
                                    "nam",
                                    "ut"),
                                true,
                                true),
                        ListMode.Show,
                            4419147.4458,
                            30492.8741,
                            0.8649,
                            true,
                        [new KMLSublayer("sint eveniet qui nihil",
                                9,
                                "architecto",
                                "ut enim nihil"),
                        new KMLSublayer("reprehenderit non deleniti",
                                6,
                                "harum",
                                "rem quia molestiae")],
                            "molestiae eius blanditiis",
                        new TimeExtent(new DateTime(2016, 1, 2, 8, 23, 52),
                                new DateTime(2000, 10, 20, 15, 56, 14))),
                        "esse earum iusto")],
                    true);
        await legendWidget.SetViewModel(testViewModel);
        var viewModel = await legendWidget.GetViewModel();
        Assert.AreEqual(testViewModel, viewModel);
    }
}
