@inherits TestRunnerBase

@{
    base.BuildRenderTree(__builder);
}

@code {

    [TestMethod]
    public async Task TestCanRenderGeneratedLegendWidget(Action renderHandler)
    {
        LegendWidget? legendWidget = null;

        AddMapRenderFragment(
            @<MapView class="map-view" OnViewRendered="renderHandler">
                <Map>
                    <Basemap>
                        <BasemapStyle Name="BasemapStyleName.ArcgisTopographic" />
                    </Basemap>
                </Map>
                <LegendWidget 
                    BasemapLegendVisible="@(true)"
                    HeadingLevel="@(575.5134)"
                    HideLayersNotInCurrentView="@(true)"
                    Icon="@("voluptas")"
                    Label="@("vitae")"
                    RespectLayerDefinitionExpression="@(true)"
                    RespectLayerVisibility="@(true)"
                    WidgetId="@("nihil")">
                    <LegendViewModel 
                        BasemapLegendVisible="@(true)"
                        HideLayersNotInCurrentView="@(true)"
                        LayerInfos="@([new LegendViewModelLayerInfos(new WebTileLayer(BlendMode.Darken,
                                    "quia",
                                    new Effect("autem",
                                        12882127.5542),
                                new Extent(15.8748,
                                        -19.1724,
                                        -47.9079,
                                        36.6363,
                                        162.4008,
                                        199.5127,
                                        136.6383,
                                        485.3129,
                                    new SpatialReference(8,
                                            "eius",
                                            "magnam",
                                            "nostrum"),
                                        true,
                                        true),
                                ListMode.Hide,
                                    11835707.5565,
                                    11819.0473,
                                    0.1367,
                                    true,
                                new PortalItem(),
                                    394.0393,
                                    ["ut"],
                                new TileInfo(638.6832,
                                        TileInfoFormat.Pdf,
                                        true,
                                    [new LOD(4,
                                            "ab",
                                            34.5329,
                                            23068507.3555)],
                                    new Point(117.9703,
                                            72.8086,
                                            2.4426,
                                            69.8322,
                                            773.6159,
                                        new SpatialReference(8,
                                                "temporibus",
                                                "eius",
                                                "officiis"),
                                            true,
                                            true,
                                            36.4600),
                                        [9],
                                    new SpatialReference(3,
                                            "explicabo",
                                            "excepturi",
                                            "provident")),
                                    "et voluptatem numquam"),
                                "cumque et debitis"),
                        new LegendViewModelLayerInfos(new ElevationLayer("ut",
                                new Extent(-158.2944,
                                        -24.4824,
                                        9.5301,
                                        50.5139,
                                        284.3154,
                                        744.0191,
                                        615.8408,
                                        48.5555,
                                    new SpatialReference(5,
                                            "itaque",
                                            "sit",
                                            "necessitatibus"),
                                        true,
                                        true),
                                ListMode.Hide,
                                    0.5753,
                                    true,
                                new PortalItem(),
                                new TileInfo(727.7226,
                                        TileInfoFormat.Png24,
                                        true,
                                    [new LOD(6,
                                            "id",
                                            34.5736,
                                            21924189.4951)],
                                    new Point(92.5176,
                                            80.4408,
                                            36.9229,
                                            44.5434,
                                            664.7722,
                                        new SpatialReference(5,
                                                "aut",
                                                "hic",
                                                "quibusdam"),
                                            true,
                                            true,
                                            924.0949),
                                        [5],
                                    new SpatialReference(6,
                                            "provident",
                                            "est",
                                            "rerum")),
                                    "distinctio dolore corporis",
                                    "https://services9.arcgis.com/RHVPKKiFTONKtxq3/arcgis/rest/services/NDFD_Precipitation_v1/FeatureServer/0",
                                new TimeExtent(new DateTime(2007, 3, 21, 8, 0, 49),
                                        new DateTime(2008, 10, 6, 8, 22, 38))),
                                "quidem ratione impedit")])"
                        RespectLayerVisibility="@(true)">
                        <ActiveLayerInfo 
                            HideLayersNotInCurrentView="@(true)"
                            IsScaleDriven="@(true)"
                            Layer="@(new ImageryTileLayer("https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",
                                new PortalItem(),
                                    new RasterStretchRenderer(new AlgorithmicColorRamp(Algorithm.LabLch,
                                            new MapColor(37, 59, 51),
                                            new MapColor(99, 68, 101)),
                                        true,
                                        true,
                                        [7,
                                        2],
                                        9,
                                        6,
                                        StretchType.HistogramEqualization,
                                        [new RasterBandStatistics(158.2205,
                                            2,
                                            624.4278,
                                            523.9049,
                                            600.7534,
                                            203.7484,
                                            729.4210,
                                            274.8205),
                                        new RasterBandStatistics(952.7121,
                                            5,
                                            461.8056,
                                            891.1274,
                                            997.3612,
                                            355.1666,
                                            709.1513,
                                            339.1025)],
                                        true,
                                        1),
                                    [3],
                                BlendMode.Color,
                                    "aliquam",
                                    new Effect("commodi",
                                        37438500.6910),
                                    PixelInterpolation.Nearest,
                                    true,
                                ListMode.Hide,
                                    30517209.1575,
                                    28398.3149,
                                [new DimensionalDefinition("updatedAt",
                                        true,
                                        "status")],
                                new MultidimensionalSubset(new Point(53.2578,
                                            -22.7381,
                                            120.0211,
                                            62.2417,
                                            172.7427,
                                        new SpatialReference(3,
                                                "perspiciatis",
                                                "veniam",
                                                "qui"),
                                            true,
                                            true,
                                            817.2370),
                                    [new DimensionalDefinition("title",
                                            true,
                                            "updatedAt"),
                                    new DimensionalDefinition("status",
                                            true,
                                            "avatar")])))"
                            LayerView="@(new LayerView())"
                            LegendElements="@([default])"
                            Ready="@(true)"
                            RespectLayerVisibility="@(true)"
                            Scale="@(42817276.9779)"
                            SublayerIds="@([2])"
                            Title="@("voluptas et repudiandae")"
                            Version="@(374.9403)">
                        </ActiveLayerInfo>
                    </LegendViewModel>
                    <LegendLayerInfos 
                        Layer="@(new ImageryTileLayer("https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",
                            new PortalItem(),
                                new RasterStretchRenderer(new AlgorithmicColorRamp(Algorithm.LabLch,
                                        new MapColor(22, 33, 167),
                                        new MapColor(173, 49, 225)),
                                    true,
                                    true,
                                    [9,
                                    2],
                                    3,
                                    7,
                                    StretchType.MinMax,
                                    [new RasterBandStatistics(494.9923,
                                        5,
                                        721.6705,
                                        12.5064,
                                        694.6451,
                                        19.6254,
                                        513.6805,
                                        843.2593)],
                                    true,
                                    8),
                                [6,
                                    7],
                            BlendMode.DestinationOver,
                                "tempora",
                                new Effect("eaque",
                                    17390621.6005),
                                PixelInterpolation.Nearest,
                                true,
                            ListMode.Show,
                                35173531.1476,
                                15160.3278,
                            [new DimensionalDefinition("email",
                                    true,
                                    "category")],
                            new MultidimensionalSubset(new Point(-35.4720,
                                        -20.7915,
                                        142.8247,
                                        -41.8090,
                                        809.2945,
                                    new SpatialReference(1,
                                            "molestias",
                                            "quisquam",
                                            "et"),
                                        true,
                                        true,
                                        577.9446),
                                [new DimensionalDefinition("token",
                                        true,
                                        "comment"),
                                new DimensionalDefinition("title",
                                        true,
                                        "id")])))"
                        SublayerIds="@([2,
                            7])"
                        Title="@("pariatur nemo nam")">
                    </LegendLayerInfos>
                    <ActiveLayerInfo 
                        HideLayersNotInCurrentView="@(true)"
                        IsScaleDriven="@(true)"
                        Layer="@(new TileLayer("ipsa",
                            BlendMode.Overlay,
                                "quos",
                                default,
                                new Effect("est",
                                    18234283.9112),
                            new Extent(-122.3335,
                                    -95.1599,
                                    14.7340,
                                    74.9663,
                                    109.3504,
                                    178.3548,
                                    715.5844,
                                    832.8211,
                                new SpatialReference(8,
                                        "eum",
                                        "numquam",
                                        "animi"),
                                    true,
                                    true),
                                true,
                            ListMode.Hide,
                                5226127.0053,
                                28373.6068,
                                0.5511,
                                true,
                            new PortalItem(),
                                536.7514))"
                        LayerView="@(new LayerView())"
                        LegendElements="@([default,
                        default])"
                        Ready="@(true)"
                        RespectLayerVisibility="@(true)"
                        Scale="@(12905561.4048)"
                        SublayerIds="@([5,
                            8])"
                        Title="@("a officia velit")"
                        Version="@(316.1847)">
                    </ActiveLayerInfo>
                </LegendWidget>
            </MapView>);
        await WaitForMapToRender();
        Assert.IsNotNull(legendWidget!);
        await AssertJavaScript("assertWidgetExists", args: "legend");
        IReadOnlyList<ActiveLayerInfo> testActiveLayerInfos = [new ActiveLayerInfo(true,
                    true,
                new WCSLayer("https://landsat2.arcgis.com/arcgis/rest/services/Landsat8_Views/ImageServer",
                    [new DimensionalDefinition("title",
                            true,
                            "password"),
                    new DimensionalDefinition("password",
                            true,
                            "status")],
                        new RasterStretchRenderer(new AlgorithmicColorRamp(Algorithm.LabLch,
                                new MapColor(17, 91, 120),
                                new MapColor(87, 84, 161)),
                            true,
                            true,
                            [8],
                            8,
                            9,
                            StretchType.MinMax,
                            [new RasterBandStatistics(895.3385,
                                7,
                                354.2054,
                                632.3557,
                                608.4144,
                                442.9549,
                                696.6593,
                                830.3096)],
                            true,
                            8),
                        0.0142,
                        "dolores iure itaque",
                    new PortalItem(),
                        [2,
                            2],
                    BlendMode.Average,
                        "pariatur",
                        "voluptate",
                    new CoverageInfo(["category",
                            "token"],
                        default,
                            "cupiditate",
                            "quo sed",
                        new Extent(108.2836,
                                -124.6636,
                                -66.6886,
                                -69.9961,
                                611.9066,
                                522.3881,
                                194.4060,
                                793.3295,
                            new SpatialReference(5,
                                    "repudiandae",
                                    "accusamus",
                                    "rerum"),
                                true,
                                true),
                        new RasterInfo(new FeatureSet("title",
                                    true,
                                [new Graphic(new Polygon([new MapPath([new MapPoint([194.7168]),
                                            new MapPoint([20.8050])]),
                                            new MapPath([new MapPoint([338.5789]),
                                                new MapPoint([765.8259])])],
                                        new SpatialReference(6,
                                                "ut",
                                                "voluptatem",
                                                "fugit"),
                                        new Point(64.7723,
                                                48.0455,
                                                -175.3746,
                                                29.1587,
                                                113.2730,
                                            new SpatialReference(3,
                                                    "rerum",
                                                    "voluptatem",
                                                    "autem"),
                                                true,
                                                true,
                                                216.2957),
                                            true,
                                            true,
                                            true),
                                    new TextSymbol("sed atque mollitia",
                                        new MapColor(129, 45, 26),
                                        new MapColor(69, 57, 110),
                                            new Dimension(227.5762),
                                        new MapFont(new Dimension(198.1786),
                                                "Garamond",
                                            MapFontStyle.Oblique,
                                            FontWeight.Bold,
                                            TextDecoration.Underline),
                                            864.8489,
                                        new MapColor(152, 110, 170),
                                        new MapColor(182, 111, 174),
                                            121.7922,
                                        HorizontalAlignment.Right,
                                            true,
                                            803.9992,
                                            new Dimension(967.5954),
                                            true),
                                    new PopupTemplate("soluta voluptatibus iure",
                                            "est",
                                            ["ut"],
                                        [new FieldInfo("avatar",
                                                "voluptatibus",
                                                "omnis",
                                            StringFieldOption.TextArea,
                                            new FieldInfoFormat(2,
                                                    true,
                                                DateFormat.ShortDateLeLongTime),
                                                true,
                                                true,
                                            StatisticType.Min)],
                                        [new ExpressionPopupContent(new ElementExpressionInfo("return Date();",
                                                    "et",
                                                    "harum magnam exercitationem")),
                                        new AttachmentsPopupContent("ut est incidunt",
                                                "dolores commodi sed modi",
                                                AttachmentsPopupContentDisplayType.Preview)],
                                        [new ExpressionInfo("return $feature.Population / $feature.Area;",
                                                "password",
                                                "eos pariatur qui",
                                                ExpressionInfoReturnType.String)],
                                            true,
                                            true,
                                            [new ActionButton("alias quia natus",
                                                "https://picsum.photos/640/480/?image=362",
                                                "2de4c648-3203-599c-f7bd-7977225e9b3a",
                                                () => { Console.WriteLine("ut"); return Task.CompletedTask; },
                                                "title",
                                                true,
                                                true,
                                                true,
                                                "necessitatibus")]),
                                        new AttributesDictionary(),
                                        true,
                                        "omnis",
                                        "sed",
                                        new GraphicOrigin(Guid.NewGuid(),
                                            "molestias",
                                            6))],
                                [new Field(default,
                                        "updatedAt",
                                        "pariatur",
                                        "fugit vero",
                                        9,
                                        true,
                                        true,
                                        new { Value = "eius" },
                                    FieldValueType.NameOrTitle,
                                    new InheritedDomain("token")),
                                new Field(default,
                                        "category",
                                        "a",
                                        "suscipit qui quasi voluptatem",
                                        8,
                                        true,
                                        true,
                                        new { Value = "animi" },
                                    FieldValueType.None,
                                    new InheritedDomain("status"))],
                                GeometryType.Extent,
                                new Polygon([new MapPath([new MapPoint([466.8743,
                                            116.0644])])],
                                    new SpatialReference(1,
                                            "ut",
                                            "non",
                                            "vel"),
                                    new Point(-165.6307,
                                            56.4393,
                                            98.5519,
                                            -63.7691,
                                            703.7979,
                                        new SpatialReference(8,
                                                "rerum",
                                                "ea",
                                                "minima"),
                                            true,
                                            true,
                                            866.9465),
                                        true,
                                        true,
                                        true),
                                new SpatialReference(3,
                                        "adipisci",
                                        "pariatur",
                                        "numquam")),
                                6,
                            [new RasterBandInfo(180.7714,
                                    424.7766,
                                    "id",
                                    966.4654,
                                    898.4574,
                                    921.7237,
                                    597.1091,
                                    128.1663)],
                                [new ColormapPixel(334.5614,
                                    399.4135,
                                    547.9378,
                                    872.8810),
                                    new ColormapPixel(865.1748,
                                        633.2845,
                                        552.2905,
                                        498.4249)],
                            DataType.Thematic,
                            new Extent(42.5726,
                                    29.7134,
                                    6.5684,
                                    68.3213,
                                    994.5149,
                                    687.3015,
                                    687.9489,
                                    128.0372,
                                new SpatialReference(8,
                                        "qui",
                                        "animi",
                                        "occaecati"),
                                    true,
                                    true),
                                true,
                                8,
                                ["quia"],
                                "voluptatem",
                            new RasterMultidimensionalInfo([new RasterMultidimensionalInfoVariables("impedit et sit aut",
                                    [new RasterMultidimensionalInfoVariablesDimensions("et aperiam",
                                            [188.6087,
                                                393.2578],
                                            true,
                                            197.4289,
                                            "molestiae",
                                            "comment",
                                            "quia",
                                            [967.8955])],
                                    [new RasterHistogram([198.7101,
                                            836.3618],
                                            [4,
                                                8],
                                            492.1506,
                                            419.9511,
                                            7),
                                    new RasterHistogram([709.6508],
                                            [4],
                                            251.2450,
                                            200.7873,
                                            7)],
                                        "token",
                                    [new RasterBandStatistics(1.0408,
                                            2,
                                            573.1782,
                                            261.7929,
                                            579.5838,
                                            574.9533,
                                            683.9467,
                                            27.8514),
                                    new RasterBandStatistics(515.6210,
                                            2,
                                            541.6479,
                                            234.4973,
                                            269.2123,
                                            512.9838,
                                            803.6388,
                                            348.1143)],
                                        "odio"),
                                new RasterMultidimensionalInfoVariables("sint repellendus provident distinctio",
                                    [new RasterMultidimensionalInfoVariablesDimensions("velit quaerat",
                                            [823.8179],
                                            true,
                                            965.0866,
                                            "quia",
                                            "id",
                                            "quisquam",
                                            [406.5557,
                                                737.7027]),
                                    new RasterMultidimensionalInfoVariablesDimensions("doloremque ab excepturi",
                                            [321.6364],
                                            true,
                                            983.2742,
                                            "incidunt",
                                            "id",
                                            "officiis",
                                            [401.5097])],
                                    [new RasterHistogram([789.6596],
                                            [8,
                                                3],
                                            389.7470,
                                            384.7681,
                                            4)],
                                        "createdAt",
                                    [new RasterBandStatistics(37.4368,
                                            9,
                                            735.6173,
                                            83.6047,
                                            371.5525,
                                            502.7968,
                                            234.7516,
                                            732.3705),
                                    new RasterBandStatistics(498.9686,
                                            5,
                                            193.4675,
                                            298.3845,
                                            571.8950,
                                            181.4978,
                                            708.2147,
                                            947.1804)],
                                        "voluptate")]),
                            new RasterInfoPixelSize(-115.1191,
                                    -28.9749),
                            PixelType.U8,
                            new RasterSensorInfo(new DateTime(2015, 3, 25, 14, 31, 54),
                                    46.5670,
                                    "updatedAt",
                                    801.4255,
                                    46.8795,
                                    "comment",
                                    780.7664,
                                    512.7921)),
                            ["officia"],
                        [SupportedInterpolations.Cubic],
                            "natus omnis porro",
                            true,
                        CoverageInfoVersion.Two_0_1),
                        default,
                        new Effect("voluptatem",
                            15213772.2651),
                    new Extent(-48.9751,
                            114.3314,
                            44.8936,
                            37.0137,
                            754.6910,
                            633.4467,
                            135.1726,
                            354.9395,
                        new SpatialReference(3,
                                "et",
                                "sed",
                                "eveniet"),
                            true,
                            true)),
                new FeatureLayerView(new FeatureLayerView(new LayerView(),
                            new AbortManager(default,
                                new JsModuleManager()),
                        new FeatureEffect([new Effect("vitae",
                                44927049.8646)],
                                true,
                            new FeatureFilter(103.7109,
                                new Point(28.3866,
                                        -42.9396,
                                        -82.3073,
                                        60.2991,
                                        635.6293,
                                    new SpatialReference(1,
                                            "qui",
                                            "et",
                                            "molestiae"),
                                        true,
                                        true,
                                        614.8141),
                                    [9,
                                        7],
                                SpatialRelationship.EnvelopeIntersects,
                                new TimeExtent(new DateTime(2008, 6, 27, 21, 48, 2),
                                        new DateTime(2003, 5, 17, 12, 40, 38)),
                                    QueryUnits.Miles,
                                    "Phone = '555-555-5555'"),
                                [new Effect("aut",
                                    11692500.2551)]),
                        new FeatureFilter(716.2551,
                            new Polyline([new MapPath([new MapPoint([558.2187]),
                                    new MapPoint([195.8601])]),
                                    new MapPath([new MapPoint([844.2794])])],
                                new SpatialReference(4,
                                        "eveniet",
                                        "nostrum",
                                        "corporis"),
                                    true,
                                    true),
                                [8],
                            SpatialRelationship.Intersects,
                            new TimeExtent(new DateTime(2018, 8, 13, 19, 43, 21),
                                    new DateTime(2016, 7, 20, 1, 22, 13)),
                                QueryUnits.Miles,
                                "City = 'Toronto'"),
                        new HighlightOptions(new MapColor(247, 11, 11),
                            new MapColor(134, 246, 14),
                                929.8782,
                                443.6376,
                            new MapColor(178, 52, 66),
                                478.8219,
                                629.8114),
                            419.0387,
                            true),
                        new AbortManager(default,
                            new JsModuleManager()),
                    new FeatureEffect([new Effect("odit",
                            24392532.3808)],
                            true,
                        new FeatureFilter(129.2009,
                            new Extent(-174.4925,
                                    -48.2197,
                                    69.0172,
                                    29.3875,
                                    621.1881,
                                    370.0520,
                                    397.8520,
                                    559.4057,
                                new SpatialReference(8,
                                        "et",
                                        "sit",
                                        "laudantium"),
                                    true,
                                    true),
                                [8,
                                    2],
                            SpatialRelationship.EnvelopeIntersects,
                            new TimeExtent(new DateTime(2021, 2, 9, 19, 58, 24),
                                    new DateTime(2013, 1, 22, 16, 41, 9)),
                                QueryUnits.Feet,
                                "Province = 'Ontario'"),
                            [new Effect("quibusdam",
                                17995030.8601),
                                new Effect("rerum",
                                    24049724.4093)]),
                    new FeatureFilter(174.9806,
                        new Polygon([new MapPath([new MapPoint([24.6175,
                                    95.2640]),
                                new MapPoint([776.8509,
                                    465.2215])]),
                                new MapPath([new MapPoint([715.4350])])],
                            new SpatialReference(6,
                                    "exercitationem",
                                    "dolorem",
                                    "atque"),
                            new Point(129.3351,
                                    -35.8950,
                                    -93.2344,
                                    -26.1081,
                                    39.9085,
                                new SpatialReference(3,
                                        "enim",
                                        "neque",
                                        "omnis"),
                                    true,
                                    true,
                                    57.0474),
                                true,
                                true,
                                true),
                            [6],
                        SpatialRelationship.EnvelopeIntersects,
                        new TimeExtent(new DateTime(2006, 6, 17, 6, 19, 13),
                                new DateTime(2014, 11, 25, 16, 3, 2)),
                            QueryUnits.NauticalMiles,
                            "PostalCode = 'M5V 1J9'"),
                    new HighlightOptions(new MapColor(136, 9, 206),
                        new MapColor(249, 82, 127),
                            852.3083,
                            669.1183,
                        new MapColor(106, 41, 61),
                            248.4030,
                            287.1754),
                        158.9450,
                        true),
                [default],
                    true,
                    true,
                    48968352.9707,
                    [3],
                    "illo et aliquam",
                    950.1413)];
        await legendWidget.SetActiveLayerInfos(testActiveLayerInfos);
        var activeLayerInfos = await legendWidget.GetActiveLayerInfos();
        Assert.AreEqual(testActiveLayerInfos, activeLayerInfos);
        LegendViewModel testViewModel = new LegendViewModel([new ActiveLayerInfo(true,
                        true,
                    new BingMapsLayer("quia",
                            BingImageryStyle.Road,
                        BlendMode.Color,
                            new Effect("possimus",
                                44475297.8690),
                            28605532.0434,
                            13790.3298,
                            473.2582,
                        new SpatialReference(1,
                                "est",
                                "odio",
                                "non"),
                            default,
                        new Extent(-45.5805,
                                -88.2187,
                                53.8606,
                                -83.3947,
                                232.2785,
                                560.2691,
                                973.0336,
                                389.6206,
                            new SpatialReference(1,
                                    "voluptas",
                                    "saepe",
                                    "quo"),
                                true,
                                true),
                        ListMode.Hide,
                            0.4807,
                            true,
                            "eum"),
                    new LayerView(),
                    [default],
                        true,
                        true,
                        33320690.8777,
                        [3],
                        "asperiores deserunt reiciendis",
                        157.8858),
                new ActiveLayerInfo(true,
                        true,
                    new ElevationLayer("autem",
                        new Extent(-133.1751,
                                -10.5153,
                                -54.1656,
                                -59.5055,
                                702.4215,
                                1.2451,
                                32.2962,
                                914.4071,
                            new SpatialReference(5,
                                    "occaecati",
                                    "dolor",
                                    "voluptas"),
                                true,
                                true),
                        ListMode.Show,
                            0.4923,
                            true,
                        new PortalItem(),
                        new TileInfo(431.7187,
                                TileInfoFormat.Svgz,
                                true,
                            [new LOD(2,
                                    "delectus",
                                    33.6670,
                                    35193416.4326),
                            new LOD(4,
                                    "corporis",
                                    9.2927,
                                    49370096.9701)],
                            new Point(-115.0514,
                                    28.4395,
                                    -14.6834,
                                    -55.4869,
                                    568.4464,
                                new SpatialReference(5,
                                        "debitis",
                                        "laborum",
                                        "voluptatem"),
                                    true,
                                    true,
                                    203.3541),
                                [6],
                            new SpatialReference(9,
                                    "neque",
                                    "laudantium",
                                    "debitis")),
                            "sed sunt laborum",
                            "https://services9.arcgis.com/RHVPKKiFTONKtxq3/arcgis/rest/services/NDFD_Precipitation_v1/FeatureServer/0",
                        new TimeExtent(new DateTime(2017, 3, 1, 20, 51, 26),
                                new DateTime(2020, 1, 1, 22, 1, 28))),
                    new LayerView(),
                    [default,
                    default],
                        true,
                        true,
                        25873044.1014,
                        [4],
                        "reprehenderit nobis perferendis",
                        40.8719)],
                    true,
                    true,
                [new LegendViewModelLayerInfos(new ImageryLayer("https://sampleserver6.arcgisonline.com/arcgis/rest/services/NLCDLandCover2001/ImageServer",
                        new PortalItem(),
                            new RasterStretchRenderer(new AlgorithmicColorRamp(Algorithm.CieLab,
                                    new MapColor(65, 236, 106),
                                    new MapColor(86, 189, 3)),
                                true,
                                true,
                                [3,
                                9],
                                7,
                                9,
                                StretchType.MinMax,
                                [new RasterBandStatistics(843.5115,
                                    2,
                                    732.5371,
                                    624.7495,
                                    998.4360,
                                    65.6982,
                                    937.0568,
                                    903.5058)],
                                true,
                                4),
                            [1,
                                5],
                        BlendMode.DestinationOut,
                            452.7163,
                            241.2572,
                            "quibusdam",
                            "nesciunt",
                            new Effect("sit",
                                30133305.7574),
                        ImageFormat.Png24,
                            true,
                            8,
                            4,
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                        new TileInfo(903.6689,
                                TileInfoFormat.Ps,
                                true,
                            [new LOD(2,
                                    "velit",
                                    6.0817,
                                    38299658.8341),
                            new LOD(7,
                                    "vero",
                                    63.8990,
                                    15886869.4472)],
                            new Point(-109.8687,
                                    50.7918,
                                    -117.7712,
                                    43.6664,
                                    231.0477,
                                new SpatialReference(5,
                                        "in",
                                        "cumque",
                                        "sapiente"),
                                    true,
                                    true,
                                    501.0411),
                                [3,
                                    8],
                            new SpatialReference(4,
                                    "rerum",
                                    "fugit",
                                    "harum")),
                        null,
                        null,
                        null,
                        null,
                        null,
                        null,
                            true),
                        "quasi perferendis eveniet")],
                    true);
        await legendWidget.SetViewModel(testViewModel);
        var viewModel = await legendWidget.GetViewModel();
        Assert.AreEqual(testViewModel, viewModel);
    }
}
