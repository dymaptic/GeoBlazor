@inherits TestRunnerBase

@{
    base.BuildRenderTree(__builder);
}

@code {

    [TestMethod]
    public async Task TestCanRenderGeneratedListItemPanelWidget(Action renderHandler)
    {
        ListItemPanelWidget? listItemPanelWidget = null;

        AddMapRenderFragment(
            @<MapView class="map-view" OnViewRendered="renderHandler">
                <Map>
                    <Basemap>
                        <BasemapStyle Name="BasemapStyleName.ArcgisTopographic" />
                    </Basemap>
                </Map>
                <ListItemPanelWidget 
                    Content="@([new ListItemPanelContent()])"
                    Disabled="@(true)"
                    FlowEnabled="@(true)"
                    Icon="@("aspernatur")"
                    Image="@("https://picsum.photos/640/480/?image=725")"
                    Label="@("tempora")"
                    Open="@(true)"
                    Title="@("harum occaecati incidunt")"
                    WidgetId="@("et")">
                    <ListItem 
                        ActionsOpen="@(true)"
                        ActionsSections="@(new ActionButton("sit et ipsum",
                            "https://picsum.photos/640/480/?image=674",
                            "a22178a3-35cc-784c-c1e6-40e376d7ca32",
                            () => { Console.WriteLine("quibusdam"); return Task.CompletedTask; },
                            "createdAt",
                            true,
                            true,
                            true,
                            "eveniet"))"
                        ChildrenSortable="@(true)"
                        Hidden="@(true)"
                        Layer="@(new BaseTileLayer(BlendMode.DestinationOut,
                                new Effect("odit",
                                    26439558.9518),
                                29859597.0710,
                                17998.6008,
                                117.3636,
                            new SpatialReference(3,
                                    "impedit",
                                    "voluptatem",
                                    "vitae"),
                            new Extent(108.9956,
                                    64.5362,
                                    58.4505,
                                    69.5468,
                                    470.7259,
                                    302.9262,
                                    212.2140,
                                    656.3023,
                                new SpatialReference(4,
                                        "praesentium",
                                        "ut",
                                        "et"),
                                    true,
                                    true),
                            ListMode.Hide,
                                0.2584,
                                true,
                            new TileInfo(706.5613,
                                    TileInfoFormat.Gif,
                                    true,
                                [new LOD(4,
                                        "amet",
                                        48.9164,
                                        47420283.7838)],
                                new Point(-151.2372,
                                        -81.7702,
                                        72.2491,
                                        40.0575,
                                        393.4169,
                                    new SpatialReference(2,
                                            "aut",
                                            "nobis",
                                            "a"),
                                        true,
                                        true,
                                        76.7648),
                                    [4,
                                        4],
                                new SpatialReference(3,
                                        "suscipit",
                                        "id",
                                        "facere")),
                                "error ut omnis",
                            new TimeExtent(new DateTime(2013, 8, 1, 21, 0, 49),
                                    new DateTime(2003, 5, 17, 18, 6, 36))))"
                        ListModeDisabled="@(true)"
                        Open="@(true)"
                        Sortable="@(true)"
                        Title="@("et laborum est")">
                    </ListItem>
                </ListItemPanelWidget>
            </MapView>);
        await WaitForMapToRender();
        Assert.IsNotNull(listItemPanelWidget!);
        await AssertJavaScript("assertWidgetExists", args: "list-item-panel");
        ListItem testListItem = new ListItem(true,
                    new ActionButton("aliquam ducimus quos",
                        "https://picsum.photos/640/480/?image=754",
                        "9d982549-c16f-3798-5ec1-f1d963a4d997",
                        () => { Console.WriteLine("perferendis"); return Task.CompletedTask; },
                        "category",
                        true,
                        true,
                        true,
                        "omnis"),
                    true,
                    true,
                new GeoRSSLayer("https://arcgis.github.io/arcgis-samples-javascript/sample-data/layers-georss/sample-georss.xml",
                        "enim et officia",
                        0.1592,
                        true,
                    ListMode.Hide,
                    BlendMode.Lighter,
                        new Effect("aut",
                            23711220.9759),
                    new Extent(145.8599,
                            108.4319,
                            7.4411,
                            -14.3500,
                            444.2427,
                            527.8536,
                            867.9345,
                            699.6034,
                        new SpatialReference(4,
                                "eos",
                                "dolores",
                                "est"),
                            true,
                            true),
                        true,
                    new SimpleLineSymbol(new MapColor(2, 251, 141),
                            new Dimension(286.7727),
                        SimpleLineSymbolStyle.Solid,
                        Cap.Round,
                        Join.Bevel,
                        new LineSymbolMarker(new MapColor(34, 128, 221),
                            LinePlacement.End,
                            LineSymbolMarkerStyle.X),
                            864.6339),
                        43728808.5646,
                        13813.9733,
                        true,
                    new PictureMarkerSymbol("https://static.arcgis.com/images/Symbols/Shapes/BluePin1LargeB.png",
                            new Dimension(477.1334),
                            new Dimension(815.4512),
                            89.3538,
                            new Dimension(561.8867),
                            new Dimension(739.7208),
                        new MapColor(57, 53, 253))),
                    true,
                    true,
                    true,
                    "ducimus corporis hic");
        await listItemPanelWidget.SetListItem(testListItem);
        var listItem = await listItemPanelWidget.GetListItem();
        Assert.AreEqual(testListItem, listItem);
    }
}
